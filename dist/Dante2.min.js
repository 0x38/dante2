!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["react","react-dom"],t):"object"==typeof exports?exports.Dante2=t(require("react"),require("react-dom")):e.Dante2=t(e.React,e.ReactDOM)}(this,function(__WEBPACK_EXTERNAL_MODULE_6__,__WEBPACK_EXTERNAL_MODULE_13__){return webpackJsonpDante2([1],{0:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var r=o(225),i=o(350),a=(n(i),o(351));n(a);e.exports={Dante:r.Dante,DanteEditor:r.DanteEditor}},6:function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE_6__},13:function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE_13__},27:function(e,t,o){"use strict";t.__esModule=!0,t.addNewBlockAt=t.updateTextOfBlock=t.updateDataOfBlock=t.resetBlockWithType=t.addNewBlock=t.getCurrentBlock=t.getNode=t.getDefaultBlockData=void 0;var n=o(53),r=o(9),i=t.getDefaultBlockData=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(e){default:return t}},a=(t.getNode=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=null;return e.getSelection?t=e.getSelection():e.document.getSelection?t=e.document.getSelection():e.document.selection&&(t=e.document.selection.createRange().text),t},t.getCurrentBlock=function(e){var t=e.getSelection(),o=e.getCurrentContent(),n=o.getBlockForKey(t.getStartKey());return n});t.addNewBlock=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unstyled",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e.getSelection();if(!n.isCollapsed())return e;var l=e.getCurrentContent(),s=n.getStartKey(),d=l.getBlockMap(),c=a(e);if(!c)return e;if(0===c.getLength()){if(c.getType()===t)return e;var u=c.merge({type:t,data:i(t,o)}),p=l.merge({blockMap:d.set(s,u),selectionAfter:n});return r.EditorState.push(e,p,"change-block-type")}return e},t.resetBlockWithType=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unstyled",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e.getCurrentContent(),a=e.getSelection(),l=a.getStartKey(),s=n.getBlockMap(),d=s.get(l),c="";console.log("DATA FOR PLACEHOLDER!",o);var u=d.getText();d.getLength()>=2&&(c=u.substr(1));var p=d.merge({text:c,type:t,data:i(t,o)}),h=n.merge({blockMap:s.set(l,p),selectionAfter:a.merge({anchorOffset:0,focusOffset:0})});return r.EditorState.push(e,h,"change-block-type")},t.updateDataOfBlock=function(e,t,o){var n=e.getCurrentContent(),i=t.merge({data:o}),a=n.merge({blockMap:n.getBlockMap().set(t.getKey(),i)});return r.EditorState.push(e,a,"change-block-type")},t.updateTextOfBlock=function(e,t,o){var n=e.getCurrentContent(),i=t.merge({text:o}),a=n.merge({blockMap:n.getBlockMap().set(t.getKey(),i)});return r.EditorState.push(e,a,"change-block-type")},t.addNewBlockAt=function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"unstyled",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},l=e.getCurrentContent(),s=l.getBlockMap(),d=s.get(t),c=s.toSeq().takeUntil(function(e){return e===d}),u=s.toSeq().skipUntil(function(e){return e===d}).rest(),p=(0,r.genKey)(),h=new r.ContentBlock({key:p,type:o,text:"",characterList:d.getCharacterList().slice(0,0),depth:0,data:(0,n.Map)(i(o,a))}),f=c.concat([[t,d],[p,h]],u).toOrderedMap(),g=e.getSelection(),m=l.merge({blockMap:f,selectionBefore:g,selectionAfter:g.merge({anchorKey:p,anchorOffset:0,focusKey:p,focusOffset:0,isBackward:!1})});return r.EditorState.push(e,m,"split-block")}},62:function(e,t){"use strict";t.__esModule=!0;t.getSelectionRect=function(e){var t=e.getRangeAt(0).getBoundingClientRect(),o=t&&t.top?t:e.getRangeAt(0).getClientRects()[0];if(!o){if(!e.anchorNode||!e.anchorNode.getBoundingClientRect)return null;o=e.anchorNode.getBoundingClientRect(),o.isEmptyline=!0}return o},t.getSelection=function(e){var t=null;return e.getSelection?t=e.getSelection():e.document.getSelection?t=e.document.getSelection():e.document.selection&&(t=e.document.selection.createRange().text),t},t.getSelectedBlockNode=function(e){var t=e.getSelection();if(0===t.rangeCount)return null;var o=t.getRangeAt(0).startContainer;do{if(o.getAttribute&&"true"===o.getAttribute("data-block"))return o;o=o.parentNode}while(null!==o);return null}},183:function(e,t,o){e.exports=o.p+"fonts/dante.eot"},184:function(e,t,o){e.exports=o.p+"fonts/fontello.eot"},225:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}exports.__esModule=!0,exports.DanteEditor=exports.Dante=void 0;var _possibleConstructorReturn2=__webpack_require__(18),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=__webpack_require__(17),_inherits3=_interopRequireDefault(_inherits2),_classCallCheck2=__webpack_require__(15),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_react=__webpack_require__(6),_react2=_interopRequireDefault(_react),_reactDom=__webpack_require__(13),_reactDom2=_interopRequireDefault(_reactDom),_immutable=__webpack_require__(53),_immutable2=_interopRequireDefault(_immutable),_draftJs=__webpack_require__(9),_DraftPasteProcessor=__webpack_require__(157),_DraftPasteProcessor2=_interopRequireDefault(_DraftPasteProcessor),_draftConvert=__webpack_require__(284),_isSoftNewlineEvent=__webpack_require__(334),_isSoftNewlineEvent2=_interopRequireDefault(_isSoftNewlineEvent),_index=__webpack_require__(27),_image=__webpack_require__(233),_image2=_interopRequireDefault(_image),_link=__webpack_require__(234),_link2=_interopRequireDefault(_link),_selection=__webpack_require__(62),_addButton=__webpack_require__(232),_addButton2=_interopRequireDefault(_addButton),_toolTip=__webpack_require__(235),_toolTip2=_interopRequireDefault(_toolTip),_link3=__webpack_require__(231),_link4=_interopRequireDefault(_link3),_debug=__webpack_require__(230),_debug2=_interopRequireDefault(_debug),_find_entities=__webpack_require__(236),_find_entities2=_interopRequireDefault(_find_entities),_image3=__webpack_require__(227),_image4=_interopRequireDefault(_image3),_embed=__webpack_require__(226),_embed2=_interopRequireDefault(_embed),_video=__webpack_require__(229),_video2=_interopRequireDefault(_video),_placeholder=__webpack_require__(228),_placeholder2=_interopRequireDefault(_placeholder),_save_content=__webpack_require__(238),_save_content2=_interopRequireDefault(_save_content),_html2content=__webpack_require__(237),_html2content2=_interopRequireDefault(_html2content),Dante=exports.Dante=function(){function e(t){(0,_classCallCheck3["default"])(this,e),null==t&&(t={}),console.log("init editor Dante!");var o=(0,_immutable.Map)((0,_immutable.fromJS)(this.defaultOptions(t)));this.options=o.mergeDeep(t).toJS(),console.log(this.options)}return e.prototype.defaultOptions=function t(e){null==e&&(e={});var t={};return t.el="app",t.content="",t.read_only=!1,t.spellcheck=!1,t.title_placeholder="Title",t.body_placeholder="Write your story",t.widgets=[{title:"add an image",icon:"image",type:"image",block:_image4["default"],editable:!0,renderable:!0,breakOnContinuous:!0,wrapper_class:"graf graf--figure",selected_class:"is-selected is-mediaFocused",selectedFn:function(e){var t=e.getData().toJS(),o=t.direction;switch(o){case"left":return"graf--layoutOutsetLeft";case"center":return"";case"wide":return"sectionLayout--fullWidth";case"fill":return"graf--layoutFillWidth"}},handleEnterWithoutText:function(e,t){var o=e.state.editorState;return e.onChange((0,_index.addNewBlockAt)(o,t.getKey()))},handleEnterWithText:function(e,t){var o=e.state.editorState;return e.onChange((0,_index.addNewBlockAt)(o,t.getKey()))},widget_options:{displayOnInlineTooltip:!0,insertion:"upload",insert_block:"image"},options:{upload_url:e.upload_url,upload_headers:e.upload_headers,upload_formName:e.upload_formName,upload_callback:e.image_upload_callback,image_delete_callback:e.image_delete_callback,image_caption_placeholder:e.image_caption_placeholder}},{icon:"embed",title:"insert embed",type:"embed",block:_embed2["default"],editable:!0,renderable:!0,breakOnContinuous:!0,wrapper_class:"graf graf--mixtapeEmbed",selected_class:"is-selected is-mediaFocused",widget_options:{displayOnInlineTooltip:!0,insertion:"placeholder",insert_block:"embed"},options:{endpoint:"//api.embed.ly/1/extract?key="+e.api_key+"&url=",placeholder:"Paste a link to embed content from another site (e.g. Twitter) and press Enter"},handleEnterWithoutText:function(e,t){var o=e.state.editorState;return e.onChange((0,_index.addNewBlockAt)(o,t.getKey()))},handleEnterWithText:function(e,t){var o=e.state.editorState;return e.onChange((0,_index.addNewBlockAt)(o,t.getKey()))}},{icon:"video",title:"insert video",editable:!0,type:"video",block:_video2["default"],renderable:!0,breakOnContinuous:!0,wrapper_class:"graf--figure graf--iframe",selected_class:" is-selected is-mediaFocused",widget_options:{displayOnInlineTooltip:!0,insertion:"placeholder",insert_block:"video"},options:{endpoint:"//api.embed.ly/1/oembed?key="+e.api_key+"&url=",placeholder:"Paste a YouTube, Vine, Vimeo, or other video link, and press Enter",caption:"Type caption for embed (optional)"},handleEnterWithoutText:function(e,t){var o=e.state.editorState;return e.onChange((0,_index.addNewBlockAt)(o,t.getKey()))},handleEnterWithText:function(e,t){var o=e.state.editorState;return e.onChange((0,_index.addNewBlockAt)(o,t.getKey()))}},{renderable:!0,editable:!0,block:_placeholder2["default"],type:"placeholder",wrapper_class:"is-embedable",selected_class:" is-selected is-mediaFocused",widget_options:{displayOnInlineTooltip:!1},handleEnterWithText:function(e,t){var o=e.state.editorState,n={provisory_text:t.getText(),endpoint:t.getData().get("endpoint"),type:t.getData().get("type")};return e.onChange((0,_index.resetBlockWithType)(o,n.type,n))}}],t.tooltips=[{ref:"insert_tooltip",component:_toolTip2["default"],displayOnSelection:!0,selectionElements:["unstyled","blockquote","ordered-list","unordered-list","unordered-list-item","ordered-list-item","code-block","header-one","header-two","header-three","header-four"],widget_options:{block_types:[{label:"h2",style:"header-one",type:"block"},{label:"h3",style:"header-two",type:"block"},{label:"h4",style:"header-three",type:"block"},{label:"blockquote",style:"blockquote",type:"block"},{label:"insertunorderedlist",style:"unordered-list-item",type:"block"},{label:"insertorderedlist",style:"ordered-list-item",type:"block"},{label:"code",style:"code-block",type:"block"},{label:"bold",style:"BOLD",type:"inline"},{label:"italic",style:"ITALIC",type:"inline"}]}},{ref:"add_tooltip",component:_addButton2["default"]},{ref:"anchor_popover",component:_link2["default"]},{ref:"image_popover",component:_image2["default"]}],t.xhr={before_handler:null,success_handler:null,error_handler:null},t.data_storage={url:null,method:"POST",success_handler:null,failure_handler:null,interval:1500},t.default_wrappers=[{className:"graf--p",block:"unstyled"},{className:"graf--h2",block:"header-one"},{className:"graf--h3",block:"header-two"},{className:"graf--h4",block:"header-three"},{className:"graf--blockquote",block:"blockquote"},{className:"graf--insertunorderedlist",block:"unordered-list-item"},{className:"graf--insertorderedlist",block:"ordered-list-item"},{className:"graf--code",block:"code-block"},{className:"graf--bold",block:"BOLD"},{className:"graf--italic",block:"ITALIC"}],t.continuousBlocks=["unstyled","blockquote","ordered-list","unordered-list","unordered-list-item","ordered-list-item","code-block"],t.key_commands={"alt-shift":[{key:65,cmd:"add-new-block"}],"alt-cmd":[{key:49,cmd:"toggle_block:header-one"},{key:50,cmd:"toggle_block:header-two"},{key:53,cmd:"toggle_block:blockquote"}],cmd:[{key:66,cmd:"toggle_inline:BOLD"},{key:73,cmd:"toggle_inline:ITALIC"},{key:75,cmd:"insert:link"}]},t.character_convert_mapping={"> ":"blockquote","*.":"unordered-list-item","* ":"unordered-list-item","- ":"unordered-list-item","1.":"ordered-list-item","# ":"header-one","##":"header-two","==":"unstyled","` ":"code-block"},t},e.prototype.getContent=function(){return this.options.content},e.prototype.render=function(){return this.editor=_reactDom2["default"].render(_react2["default"].createElement(DanteEditor,{content:this.getContent(),config:this.options}),document.getElementById(this.options.el))},e}(),DanteEditor=exports.DanteEditor=function(_React$Component){function DanteEditor(e){(0,_classCallCheck3["default"])(this,DanteEditor);var t=(0,_possibleConstructorReturn3["default"])(this,_React$Component.call(this,e));return t.initializeState=t.initializeState.bind(t),t.refreshSelection=t.refreshSelection.bind(t),t.forceRender=t.forceRender.bind(t),t.onChange=t.onChange.bind(t),t.dispatchChangesToSave=t.dispatchChangesToSave.bind(t),t.setPreContent=t.setPreContent.bind(t),t.focus=t.focus.bind(t),t.getEditorState=t.getEditorState.bind(t),t.emitSerializedOutput=t.emitSerializedOutput.bind(t),t.decodeEditorContent=t.decodeEditorContent.bind(t),t.getTextFromEditor=t.getTextFromEditor.bind(t),t.getLocks=t.getLocks.bind(t),t.addLock=t.addLock.bind(t),t.removeLock=t.removeLock.bind(t),t.renderableBlocks=t.renderableBlocks.bind(t),t.defaultWrappers=t.defaultWrappers.bind(t),t.blockRenderer=t.blockRenderer.bind(t),t.handleBlockRenderer=t.handleBlockRenderer.bind(t),t.blockStyleFn=t.blockStyleFn.bind(t),t.getDataBlock=t.getDataBlock.bind(t),t.styleForBlock=t.styleForBlock.bind(t),t.handlePasteText=t.handlePasteText.bind(t),t.handleTXTPaste=t.handleTXTPaste.bind(t),t.handleHTMLPaste=t.handleHTMLPaste.bind(t),t.handlePasteImage=t.handlePasteImage.bind(t),t.handleDroppedFiles=t.handleDroppedFiles.bind(t),t.handleUpArrow=t.handleUpArrow.bind(t),t.handleDownArrow=t.handleDownArrow.bind(t),t.handleReturn=t.handleReturn.bind(t),t.handleBeforeInput=t.handleBeforeInput.bind(t),t.handleKeyCommand=t.handleKeyCommand.bind(t),t.findCommandKey=t.findCommandKey.bind(t),t.KeyBindingFn=t.KeyBindingFn.bind(t),t.updateBlockData=t.updateBlockData.bind(t),t.setDirection=t.setDirection.bind(t),t.toggleEditable=t.toggleEditable.bind(t),t.closePopOvers=t.closePopOvers.bind(t),t.relocateTooltips=t.relocateTooltips.bind(t),t.tooltipsWithProp=t.tooltipsWithProp.bind(t),t.tooltipHasSelectionElement=t.tooltipHasSelectionElement.bind(t),t.handleShowPopLinkOver=t.handleShowPopLinkOver.bind(t),t.handleHidePopLinkOver=t.handleHidePopLinkOver.bind(t),t.showPopLinkOver=t.showPopLinkOver.bind(t),t.hidePopLinkOver=t.hidePopLinkOver.bind(t),t.render=t.render.bind(t),t.decorator=new _draftJs.CompositeDecorator([{strategy:_find_entities2["default"].bind(null,"LINK",t),component:_link4["default"]}]),t.blockRenderMap=(0,_immutable.Map)({image:{element:"figure"},video:{element:"figure"},embed:{element:"div"},unstyled:{wrapper:null,element:"div"},paragraph:{wrapper:null,element:"div"},placeholder:{wrapper:null,element:"div"}}),t.extendedBlockRenderMap=_draftJs.DefaultDraftBlockRenderMap.merge(t.blockRenderMap),t.state={editorState:t.initializeState(),read_only:t.props.config.read_only,blockRenderMap:t.extendedBlockRenderMap,locks:0,debug:t.props.config.debug},t.widgets=t.props.config.widgets,t.tooltips=t.props.config.tooltips,t.key_commands=t.props.config.key_commands,t.continuousBlocks=t.props.config.continuousBlocks,t.block_types=t.props.config.block_types,t.default_wrappers=t.props.config.default_wrappers,t.character_convert_mapping=t.props.config.character_convert_mapping,t.save=new _save_content2["default"]({getLocks:t.getLocks,config:{xhr:t.props.config.xhr,data_storage:t.props.config.data_storage},editorState:t.state.editorState,editorContent:t.emitSerializedOutput()}),t}return(0,_inherits3["default"])(DanteEditor,_React$Component),DanteEditor.prototype.initializeState=function(){return this.props.content?this.decodeEditorContent(this.props.content):_draftJs.EditorState.createEmpty(this.decorator)},DanteEditor.prototype.refreshSelection=function(e){var t=this.state.editorState,o=this.state.editorState.getSelection(),n=(t.getCurrentContent(),o.getFocusOffset()),r=o.getAnchorKey(),i=_draftJs.SelectionState.createEmpty(o.getAnchorKey());i=i.merge({anchorOffset:n,focusKey:r,focusOffset:n});var a=_draftJs.EditorState.forceSelection(e,i);return this.onChange(a)},DanteEditor.prototype.forceRender=function(e){var t=(this.state.editorState.getSelection(),e.getCurrentContent()),o=_draftJs.EditorState.createWithContent(t,this.decorator);return this.refreshSelection(o)},DanteEditor.prototype.onChange=function(e){var t=this;this.setPreContent(),this.setState({editorState:e});var o=(0,_index.getCurrentBlock)(this.state.editorState),n=o.getType();if(e.getSelection().isCollapsed())this.handleTooltipDisplayOn("displayOnSelection",!1);else{var r=this.tooltipsWithProp("displayOnSelection")[0];if(!this.tooltipHasSelectionElement(r,n))return;this.handleTooltipDisplayOn("displayOnSelection")}return setTimeout(function(){return t.relocateTooltips()},0),this.dispatchChangesToSave()},DanteEditor.prototype.dispatchChangesToSave=function(){var e=this;return clearTimeout(this.saveTimeout),this.saveTimeout=setTimeout(function(){return e.save.store(e.emitSerializedOutput())},100)},DanteEditor.prototype.setPreContent=function(){var e=this.emitSerializedOutput();return this.save.editorContent=e},DanteEditor.prototype.focus=function(){},DanteEditor.prototype.getEditorState=function(){return this.state.editorState},DanteEditor.prototype.emitSerializedOutput=function(){var e=(0,_draftJs.convertToRaw)(this.state.editorState.getCurrentContent());return e},DanteEditor.prototype.decodeEditorContent=function(e){var t=(0,_draftJs.convertFromRaw)(e),o=void 0;return o=_draftJs.EditorState.createWithContent(t,this.decorator)},DanteEditor.prototype.getTextFromEditor=function(){var e=this.state.editorState.getCurrentContent(),t=e.getBlocksAsArray().map(function(e){return e.getText()}).join("\n");return t},DanteEditor.prototype.emitHTML2=function(){var e=void 0;return e=(0,_draftConvert.convertToHTML)({entityToHTML:function(e,t){return"LINK"===e.type?'<a href="'+e.data.url+'">'+t+"</a>":t}})(this.state.editorState.getCurrentContent())},DanteEditor.prototype.getLocks=function(){return this.state.locks},DanteEditor.prototype.addLock=function(){return this.setState({locks:this.state.locks+=1})},DanteEditor.prototype.removeLock=function(){return this.setState({locks:this.state.locks-=1})},DanteEditor.prototype.renderableBlocks=function(){return this.widgets.filter(function(e){return e.renderable}).map(function(e){return e.type})},DanteEditor.prototype.defaultWrappers=function(e){return this.default_wrappers.filter(function(t){return t.block===e}).map(function(e){return e.className})},DanteEditor.prototype.blockRenderer=function(e){switch(e.getType()){case"atomic":var t=e.getEntityAt(0);_draftJs.Entity.get(t).getType()}return this.renderableBlocks().includes(e.getType())?this.handleBlockRenderer(e):null},DanteEditor.prototype.handleBlockRenderer=function handleBlockRenderer(block){var dataBlock=this.getDataBlock(block);if(!dataBlock)return null;var read_only=!this.state.read_only&&null,editable=null!==read_only?read_only:dataBlock.editable;return{component:eval(dataBlock.block),editable:editable,props:{data:block.getData(),getEditorState:this.getEditorState,setEditorState:this.onChange,addLock:this.addLock,removeLock:this.removeLock,getLocks:this.getLocks,config:dataBlock.options}}},DanteEditor.prototype.blockStyleFn=function(e){var t=(0,_index.getCurrentBlock)(this.state.editorState),o=t.getKey()===e.getKey()?"is-selected":"";if(this.renderableBlocks().includes(e.getType()))return this.styleForBlock(e,t,o);var n=this.defaultWrappers(e.getType());return n.length>0?"graf "+n[0]+" "+o:"graf nana "+o},DanteEditor.prototype.getDataBlock=function(e){return this.widgets.find(function(t){return t.type===e.getType()})},DanteEditor.prototype.styleForBlock=function(e,t,o){var n=this.getDataBlock(e);if(!n)return null;var r=n.selectedFn?n.selectedFn(e):null,i=o?n.selected_class:"";return n.wrapper_class+" "+i+" "+r},DanteEditor.prototype.handleTooltipDisplayOn=function(e,t){var o=this;return null==t&&(t=!0),setTimeout(function(){var n=o.tooltipsWithProp(e);return n.map(function(e){return o.refs[e.ref].display(t),o.refs[e.ref].relocate()})},20)},DanteEditor.prototype.handlePasteText=function(e,t){return t?t?this.handleHTMLPaste(e,t):void 0:this.handleTXTPaste(e,t)},DanteEditor.prototype.handleTXTPaste=function(e,t){var o=(0,_index.getCurrentBlock)(this.state.editorState),n=this.state.editorState;switch(o.getType()){case"image":case"video":case"placeholder":var r=_draftJs.Modifier.replaceText(n.getCurrentContent(),new _draftJs.SelectionState({anchorKey:o.getKey(),anchorOffset:0,focusKey:o.getKey(),focusOffset:2}),e);return n=_draftJs.EditorState.push(n,r,"replace-text"),this.onChange(n),!0;default:return!1}},DanteEditor.prototype.handleHTMLPaste=function(e,t){var o=(0,_index.getCurrentBlock)(this.state.editorState);switch(o.getType()){case"image":case"video":case"placeholder":return this.handleTXTPaste(e,t)}var n=(0,_html2content2["default"])(t,this.extendedBlockRenderMap),r=this.state.editorState.getSelection(),i=r.getEndKey(),a=this.state.editorState.getCurrentContent(),l=a.blockMap.toSeq().takeUntil(function(e){return e.key===i}),s=a.blockMap.toSeq().skipUntil(function(e){return e.key===i}).rest(),d=n.blockMap.first().getKey(),c=l.concat(n.blockMap,s).toOrderedMap(),u=a.merge({blockMap:c,selectionBefore:r,selectionAfter:r.merge({anchorKey:d,anchorOffset:0,focusKey:d,focusOffset:0,isBackward:!1})}),p=_draftJs.EditorState.push(this.state.editorState,u,"insert-fragment");return this.onChange(p),!0},DanteEditor.prototype.handlePasteImage=function(e){var t=this;return e.map(function(e){var o={url:URL.createObjectURL(e),file:e};return t.onChange((0,_index.addNewBlock)(t.state.editorState,"image",o))})},DanteEditor.prototype.handleDroppedFiles=function(e,t){var o=this;return t.map(function(e){var t={url:URL.createObjectURL(e),file:e};return o.onChange((0,_index.addNewBlock)(o.state.editorState,"image",t))})},DanteEditor.prototype.handleUpArrow=function(e){var t=this;return setTimeout(function(){return t.forceRender(t.state.editorState)},10)},DanteEditor.prototype.handleDownArrow=function(e){var t=this;return setTimeout(function(){return t.forceRender(t.state.editorState)},10)},DanteEditor.prototype.handleReturn=function(e){if(this.props.handleReturn&&this.props.handleReturn())return!0;var t=this.state.editorState;if(!e.altKey&&!e.metaKey&&!e.ctrlKey){var o=(0,_index.getCurrentBlock)(t),n=o.getType(),r=t.getSelection(),i=this.getDataBlock(o);if(0===o.getText().length){if(i&&i.handleEnterWithoutText)return i.handleEnterWithText(this,o),this.closePopOvers(),!0;switch(n){case"header-one":return this.onChange((0,_index.resetBlockWithType)(t,"unstyled")),!0;default:return!1}}if(o.getText().length>0){if("unstyled"===n){var a=_draftJs.Modifier.splitBlock(this.state.editorState.getCurrentContent(),this.state.editorState.getSelection()),l=_draftJs.EditorState.push(this.state.editorState,a,"insert-characters");return this.onChange(l),setTimeout(function(){var e=document.getElementsByClassName("is-selected"),t=e[0].getBoundingClientRect();return window.scrollTo(0,t.top+window.scrollY-100)},0),!0}return i&&i.handleEnterWithText?(i.handleEnterWithText(this,o),this.closePopOvers(),!0):o.getLength()===r.getStartOffset()&&this.continuousBlocks.indexOf(n)<0&&(this.onChange((0,_index.addNewBlockAt)(t,o.getKey())),!0)}return o.getLength()===r.getStartOffset()&&(this.continuousBlocks.indexOf(n)<0&&(this.onChange((0,_index.addNewBlockAt)(t,o.getKey())),!0))}},DanteEditor.prototype.handleBeforeInput=function(e){var t=(0,_index.getCurrentBlock)(this.state.editorState),o=t.getType(),n=this.state.editorState.getSelection(),r=this.state.editorState;0!==t.getText().length&&this.closePopOvers();var i=n.getEndOffset(),a=t.getEntityAt(i-1),l=a&&_draftJs.Entity.get(a).getType(),s=t.getEntityAt(i),d=s&&_draftJs.Entity.get(s).getType();if(" "===e&&"LINK"===l&&"LINK"!==d){var c=_draftJs.Modifier.insertText(r.getCurrentContent(),n," "),u=_draftJs.EditorState.push(r,c,"insert-characters");return this.onChange(u),!0}if(0===o.indexOf("atomic"))return!1;var p=t.getLength();if(n.getAnchorOffset()>1||p>1)return!1;var h=this.character_convert_mapping[t.getText()+e];return console.log("BLOCK TO SHOW: "+h),!!h&&(this.onChange((0,_index.resetBlockWithType)(r,h)),!0)},DanteEditor.prototype.handleKeyCommand=function(e){var t=this.state.editorState,o=void 0,n=void 0;if(this.props.handleKeyCommand&&this.props.handleKeyCommand(e))return!0;if("add-new-block"===e)return this.onChange((0,_index.addNewBlock)(t,"blockquote")),!0;var r=(0,_index.getCurrentBlock)(t);if(0===e.indexOf("toggle_inline:"))return n=e.split(":")[1],o=r.getType(),this.onChange(_draftJs.RichUtils.toggleInlineStyle(t,n)),!0;if(0===e.indexOf("toggle_block:"))return n=e.split(":")[1],o=r.getType(),this.onChange(_draftJs.RichUtils.toggleBlockType(t,n)),!0;var i=_draftJs.RichUtils.handleKeyCommand(this.state.editorState,e);return!!i&&(this.onChange(i),!0)},DanteEditor.prototype.findCommandKey=function(e,t){return this.key_commands[e].find(function(e){return e.key===t})},DanteEditor.prototype.KeyBindingFn=function(e){var t=void 0;if(e.altKey){if(e.shiftKey)return t=this.findCommandKey("alt-shift",e.which),t?t.cmd:(0,_draftJs.getDefaultKeyBinding)(e);if(e.ctrlKey||e.metaKey)return t=this.findCommandKey("alt-cmd",e.which),t?t.cmd:(0,_draftJs.getDefaultKeyBinding)(e)}else if(e.ctrlKey||e.metaKey)return t=this.findCommandKey("cmd",e.which),t?t.cmd:(0,_draftJs.getDefaultKeyBinding)(e);return(0,_draftJs.getDefaultKeyBinding)(e)},DanteEditor.prototype.updateBlockData=function(e,t){var o=e.getData(),n=o.merge(t),r=(0,_index.updateDataOfBlock)(this.state.editorState,e,n);return this.forceRender(r)},DanteEditor.prototype.setDirection=function(e){var t=this.state.editorState.getCurrentContent(),o=this.state.editorState.getSelection(),n=t.getBlockForKey(o.anchorKey);return this.updateBlockData(n,{direction:e})},DanteEditor.prototype.toggleEditable=function(){return this.closePopOvers(),this.setState({read_only:!this.state.read_only},this.testEmitAndDecode)},DanteEditor.prototype.closePopOvers=function(){var e=this;return this.tooltips.map(function(t){return e.refs[t.ref].hide()})},DanteEditor.prototype.relocateTooltips=function(){var e=this;return this.tooltips.map(function(t){return e.refs[t.ref].relocate()})},DanteEditor.prototype.tooltipsWithProp=function(e){return this.tooltips.filter(function(t){return t[e]})},DanteEditor.prototype.tooltipHasSelectionElement=function(e,t){return e.selectionElements.includes(t)},DanteEditor.prototype.handleShowPopLinkOver=function(e){return this.showPopLinkOver()},DanteEditor.prototype.handleHidePopLinkOver=function(e){return this.hidePopLinkOver()},DanteEditor.prototype.showPopLinkOver=function(e){var t=(_reactDom2["default"].findDOMNode(this),void 0);return this.refs.anchor_popover.setState({url:e?e.href:this.refs.anchor_popover.state.url}),e&&(t=this.refs.anchor_popover.relocate(e)),t&&this.refs.anchor_popover.setPosition(t),this.refs.anchor_popover.setState({show:!0}),this.isHover=!0,this.cancelHide()},DanteEditor.prototype.hidePopLinkOver=function(){var e=this;return this.hideTimeout=setTimeout(function(){return e.refs.anchor_popover.hide()},300)},DanteEditor.prototype.cancelHide=function(){return clearTimeout(this.hideTimeout)},DanteEditor.prototype.render=function(){var e=this;return _react2["default"].createElement("div",{id:"content",suppressContentEditableWarning:!0},_react2["default"].createElement("article",{className:"postArticle"},_react2["default"].createElement("div",{className:"postContent"},_react2["default"].createElement("div",{className:"notesSource"},_react2["default"].createElement("div",{id:"editor",className:"postField postField--body"},_react2["default"].createElement("section",{className:"section--first section--last"},_react2["default"].createElement("div",{className:"section-divider layoutSingleColumn"},_react2["default"].createElement("hr",{className:"section-divider"})),_react2["default"].createElement("div",{className:"section-content"},_react2["default"].createElement("div",{ref:"richEditor",className:"section-inner layoutSingleColumn",onClick:this.focus},_react2["default"].createElement(_draftJs.Editor,{blockRendererFn:this.blockRenderer,editorState:this.state.editorState,onChange:this.onChange,onUpArrow:this.handleUpArrow,onDownArrow:this.handleDownArrow,handleReturn:this.handleReturn,blockRenderMap:this.state.blockRenderMap,blockStyleFn:this.blockStyleFn,handlePastedText:this.handlePasteText,handlePastedFiles:this.handlePasteImage,handleDroppedFiles:this.handleDroppedFiles,handleKeyCommand:this.handleKeyCommand,keyBindingFn:this.KeyBindingFn,handleBeforeInput:this.handleBeforeInput,readOnly:this.state.read_only,placeholder:this.props.config.body_placeholder,ref:"editor"})))))))),this.tooltips.map(function(t,o){return _react2["default"].createElement(t.component,{ref:t.ref,key:o,editor:e,editorState:e.state.editorState,onChange:e.onChange,configTooltip:t,widget_options:t.widget_options,showPopLinkOver:e.showPopLinkOver,hidePopLinkOver:e.hidePopLinkOver,handleOnMouseOver:e.handleShowPopLinkOver,handleOnMouseOut:e.handleHidePopLinkOver})}),this.state.debug?_react2["default"].createElement(_debug2["default"],{locks:this.state.locks,editor:this}):void 0)},DanteEditor}(_react2["default"].Component)},226:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=o(15),i=n(r),a=o(18),l=n(a),s=o(17),d=n(s),c=o(6),u=n(c),p=o(13),h=(n(p),o(9),o(61)),f=n(h),g=o(27),m=function(e){function t(o){(0,i["default"])(this,t);var n=(0,l["default"])(this,e.call(this,o));return n.updateData=n.updateData.bind(n),n.dataForUpdate=n.dataForUpdate.bind(n),n.componentDidMount=n.componentDidMount.bind(n),n.state={embed_data:n.defaultData(),error:""},n}return(0,d["default"])(t,e),t.prototype.defaultData=function(){var e=this.props.block.getData().toJS();return e.embed_data||{}},t.prototype.updateData=function(){var e=this.props,t=e.block,o=(e.blockProps,this.props.blockProps),n=o.getEditorState,r=o.setEditorState,i=t.getData(),a=i.merge(this.state);return r((0,g.updateDataOfBlock)(n(),t,a))},t.prototype.dataForUpdate=function(){return this.props.blockProps.data.toJS()},t.prototype.componentDidMount=function(){var e=this;if(this.props.blockProps.data&&(this.dataForUpdate().endpoint||this.dataForUpdate().provisory_text))return(0,f["default"])({method:"get",url:""+this.dataForUpdate().endpoint+this.dataForUpdate().provisory_text+"&scheme=https"}).then(function(t){return e.setState({embed_data:t.data},e.updateData)})["catch"](function(t){return e.setState({error:t.response.data.error_message}),console.log("TODO: error")})},t.prototype.classForImage=function(){return this.state.embed_data.images?"":"mixtapeImage--empty u-ignoreBlock"},t.prototype.picture=function(){return this.state.embed_data.images&&this.state.embed_data.images.length>0?this.state.embed_data.images[0].url:""},t.prototype.render=function(){return console.log("ERROR",this.state.error),u["default"].createElement("span",null,this.picture()?u["default"].createElement("a",{target:"_blank",className:"js-mixtapeImage mixtapeImage "+this.classForImage(),href:this.state.embed_data.url,style:{backgroundImage:"url('"+this.picture()+"')"}}):void 0,this.state.error?u["default"].createElement("h2",null,this.state.error):void 0,u["default"].createElement("a",{className:"markup--anchor markup--mixtapeEmbed-anchor",target:"_blank",href:this.state.embed_data.url},u["default"].createElement("strong",{className:"markup--strong markup--mixtapeEmbed-strong"},this.state.embed_data.title),u["default"].createElement("em",{className:"markup--em markup--mixtapeEmbed-em"},this.state.embed_data.description)),this.state.embed_data.provider_url)},t}(u["default"].Component);t["default"]=m,e.exports=t["default"]},227:function(e,t,o){"use strict";function r(e){
return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var i=o(81),a=r(i),l=o(15),s=r(l),d=o(18),c=r(d),u=o(17),p=r(u),h=o(6),f=r(h),g=o(13),m=(r(g),o(9)),_=o(61),y=r(_),k=o(27),b=function(e){function t(o){(0,s["default"])(this,t);var n=(0,c["default"])(this,e.call(this,o));n.blockPropsSrc=n.blockPropsSrc.bind(n),n.defaultUrl=n.defaultUrl.bind(n),n.defaultAspectRatio=n.defaultAspectRatio.bind(n),n.updateData=n.updateData.bind(n),n.replaceImg=n.replaceImg.bind(n),n.startLoader=n.startLoader.bind(n),n.stopLoader=n.stopLoader.bind(n),n.handleUpload=n.handleUpload.bind(n),n.aspectRatio=n.aspectRatio.bind(n),n.updateDataSelection=n.updateDataSelection.bind(n),n.handleGrafFigureSelectImg=n.handleGrafFigureSelectImg.bind(n),n.getUploadUrl=n.getUploadUrl.bind(n),n.uploadFile=n.uploadFile.bind(n),n.uploadCompleted=n.uploadCompleted.bind(n),n.updateProgressBar=n.updateProgressBar.bind(n),n.placeHolderEnabled=n.placeHolderEnabled.bind(n),n.placeholderText=n.placeholderText.bind(n),n.handleFocus=n.handleFocus.bind(n),n.render=n.render.bind(n);var r=n.props.block.getData().toJS();return n.config=n.props.blockProps.config,n.file=n.props.blockProps.data.get("file"),n.state={loading:!1,selected:!1,loading_progress:0,enabled:!1,caption:n.defaultPlaceholder(),direction:r.direction||"center",width:0,height:0,file:null,url:n.blockPropsSrc()||n.defaultUrl(r),aspect_ratio:n.defaultAspectRatio(r)},n}return(0,p["default"])(t,e),t.prototype.blockPropsSrc=function(){return this.props.blockProps.data.src},t.prototype.defaultUrl=function(e){return e.url?e.url:e.url?e.file?URL.createObjectURL(e.file):e.url:this.props.blockProps.data.src},t.prototype.defaultPlaceholder=function(){return this.props.blockProps.config.image_caption_placeholder},t.prototype.defaultAspectRatio=function(e){return e.aspect_ratio?{width:e.aspect_ratio.width,height:e.aspect_ratio.height,ratio:e.aspect_ratio.ratio}:{width:0,height:0,ratio:100}},t.prototype.getAspectRatio=function(e,t){var o=1e3,n=1e3,r=0,i=e,a=t;i>o?(r=o/i,a*=r,i*=r):a>n&&(r=n/a,i*=r,a*=r);var l=a/i*100,s={width:i,height:a,ratio:l};return s},t.prototype.updateData=function(){var e=(this.props.blockProps,this.props.block),t=this.props.blockProps.getEditorState,o=this.props.blockProps.setEditorState,n=e.getData(),r=n.merge(this.state).merge({forceUpload:!1});return o((0,k.updateDataOfBlock)(t(),e,r))},t.prototype.replaceImg=function(){var e=this;this.img=new Image,this.img.src=this.refs.image_tag.src,this.setState({url:this.img.src});var t=this;if(this.img.src.includes("blob:")||this.props.block.data.get("forceUpload"))return this.img.onload=function(){return e.setState({width:e.img.width,height:e.img.height,aspect_ratio:t.getAspectRatio(e.img.width,e.img.height)}),e.handleUpload()}},t.prototype.startLoader=function(){return this.setState({loading:!0})},t.prototype.stopLoader=function(){return this.setState({loading:!1})},t.prototype.handleUpload=function(){return this.startLoader(),this.props.blockProps.addLock(),this.updateData(),this.uploadFile()},t.prototype.componentDidMount=function(){return this.replaceImg()},t.prototype.aspectRatio=function(){return{maxWidth:""+this.state.aspect_ratio.width,maxHeight:""+this.state.aspect_ratio.height,ratio:""+this.state.aspect_ratio.height}},t.prototype.updateDataSelection=function(){var e=this.props.blockProps,t=e.getEditorState,o=e.setEditorState,n=t().getSelection().merge({anchorKey:this.props.block.getKey(),focusKey:this.props.block.getKey()});return o(m.EditorState.forceSelection(t(),n))},t.prototype.handleGrafFigureSelectImg=function(e){return e.preventDefault(),this.setState({selected:!0},this.updateDataSelection)},t.prototype.coords=function(){return{maxWidth:this.state.aspect_ratio.width+"px",maxHeight:this.state.aspect_ratio.height+"px"}},t.prototype.getBase64Image=function(e){var t=document.createElement("canvas");t.width=e.width,t.height=e.height;var o=t.getContext("2d");o.drawImage(e,0,0);var n=t.toDataURL("image/png");return n},t.prototype.formatData=function(){var e=new FormData;if(this.file){var t=this.config.upload_formName||"file";return e.append(t,this.file),e}return e.append("url",this.props.blockProps.data.get("url")),e},t.prototype.getUploadUrl=function(){var e=this.config.upload_url;return"function"==typeof e?e():e},t.prototype.getUploadHeaders=function(){return this.config.upload_headers||{}},t.prototype.uploadFile=function(){var e=this,t=void 0;return(0,y["default"])({method:"post",url:this.getUploadUrl(),headers:this.getUploadHeaders(),data:this.formatData(),onUploadProgress:function(t){return e.updateProgressBar(t)}}).then(function(t){if(e.uploadCompleted(t.data),e.props.blockProps.removeLock(),e.stopLoader(),e.file=null,e.config.upload_callback)return e.config.upload_callback(response,e)})["catch"](function(t){if(e.props.blockProps.removeLock(),e.stopLoader(),console.log("ERROR: got error uploading file "+t),e.config.upload_error_callback)return e.config.upload_error_callback(t,e)}),t=function(t){return e.uploadCompleted(t,n)}},t.prototype.uploadCompleted=function(e){return this.setState({url:e.url},this.updateData)},t.prototype.updateProgressBar=function(e){var t=this.state.loading_progress;if(e.lengthComputable)return t=e.loaded/e.total*100,t=null!=t?t:{complete:0},this.setState({loading_progress:t}),console.log("complete: "+t)},t.prototype.placeHolderEnabled=function(){return this.state.enabled||this.props.block.getText()},t.prototype.placeholderText=function(){return this.placeHolderEnabled()?"":"Write caption for image (optional)"},t.prototype.handleFocus=function(e){var t=this;return setTimeout(function(){return t.setState({enabled:!0})},0)},t.prototype.render=function(){return f["default"].createElement("div",{ref:"image_tag2",suppressContentEditableWarning:!0},f["default"].createElement("div",{className:"aspectRatioPlaceholder is-locked",style:this.coords(),onClick:this.handleGrafFigureSelectImg},f["default"].createElement("div",{style:{paddingBottom:this.state.aspect_ratio.ratio+"%"},className:"aspect-ratio-fill"}),f["default"].createElement("img",{src:this.state.url,ref:"image_tag",height:this.state.aspect_ratio.height,width:this.state.aspect_ratio.width,className:"graf-image"}),f["default"].createElement(v,{toggle:this.state.loading,progress:this.state.loading_progress})),f["default"].createElement("figcaption",{className:"imageCaption",onMouseDown:this.handleFocus},this.state.enabled?void 0:f["default"].createElement("span",{className:"danteDefaultPlaceholder"},this.placeholderText()),f["default"].createElement(m.EditorBlock,(0,a["default"])({},this.props,{editable:!0,className:"imageCaption"}))))},t}(f["default"].Component);t["default"]=b;var v=function(e){function t(){return(0,s["default"])(this,t),(0,c["default"])(this,e.apply(this,arguments))}return(0,p["default"])(t,e),t.prototype.render=function(){return f["default"].createElement("div",null,this.props.toggle?f["default"].createElement("div",{className:"image-upoader-loader"},f["default"].createElement("p",null,100===this.props.progress?"processing image...":f["default"].createElement("span",null,f["default"].createElement("span",null,"loading")," ",Math.round(this.props.progress)))):void 0)},t}(f["default"].Component);e.exports=t["default"]},228:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=o(81),i=n(r),a=o(15),l=n(a),s=o(18),d=n(s),c=o(17),u=n(c),p=o(6),h=n(p),f=o(13),g=(n(f),o(9)),m=function(e){function t(o){(0,l["default"])(this,t);var n=(0,d["default"])(this,e.call(this,o));return n.placeholderText=n.placeholderText.bind(n),n.placeholderFromProps=n.placeholderFromProps.bind(n),n.defaultText=n.defaultText.bind(n),n.handleFocus=n.handleFocus.bind(n),n.classForDefault=n.classForDefault.bind(n),n.state={enabled:!1,data:n.props.blockProps.data.toJS()},n}return(0,u["default"])(t,e),t.prototype.placeholderText=function(){return this.state.enabled?"":this.props.blockProps.data.toJS().placeholder||this.placeholderFromProps()||this.defaultText()},t.prototype.placeholderFromProps=function(){return this.props.block.toJS().placeholder},t.prototype.defaultText=function(){return"write something "},t.prototype.componentDidMount=function(){},t.prototype.handleFocus=function(e){var t=this;return setTimeout(function(){return t.setState({enabled:!0})},0)},t.prototype.classForDefault=function(){return this.state.enabled?"":"defaultValue defaultValue--root"},t.prototype.render=function(){return h["default"].createElement("span",{className:this.classForDefault(),onMouseDown:this.handleFocus},this.placeholderText(),h["default"].createElement(g.EditorBlock,(0,i["default"])({},this.props,{className:"imageCaption",placeholder:"escrive alalal"})))},t}(h["default"].Component);t["default"]=m,e.exports=t["default"]},229:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=o(81),i=n(r),a=o(15),l=n(a),s=o(18),d=n(s),c=o(17),u=n(c),p=o(6),h=n(p),f=o(13),g=(n(f),o(9)),m=o(27),_=o(61),y=n(_),k=function(e){function t(o){(0,l["default"])(this,t);var n=(0,d["default"])(this,e.call(this,o));return n.updateData=n.updateData.bind(n),n.dataForUpdate=n.dataForUpdate.bind(n),n.state={embed_data:n.defaultData()},n}return(0,u["default"])(t,e),t.prototype.defaultData=function(){var e=this.props.block.getData().toJS();return e.embed_data||{}},t.prototype.updateData=function(){var e=this.props,t=e.block,o=(e.blockProps,this.props.blockProps),n=o.getEditorState,r=o.setEditorState,i=t.getData(),a=i.merge(this.state);return r((0,m.updateDataOfBlock)(n(),t,a))},t.prototype.dataForUpdate=function(){return this.props.blockProps.data.toJS()},t.prototype.componentDidMount=function(){var e=this;if(this.props.blockProps.data&&(this.dataForUpdate().endpoint||this.dataForUpdate().provisory_text))return(0,y["default"])({method:"get",url:""+this.dataForUpdate().endpoint+this.dataForUpdate().provisory_text+"&scheme=https"}).then(function(t){return e.setState({embed_data:t.data},e.updateData)})["catch"](function(e){return console.log("TODO: error")})},t.prototype.classForImage=function(){return this.state.embed_data.thumbnail_url?"":"mixtapeImage--empty u-ignoreBlock"},t.prototype.render=function(){return h["default"].createElement("figure",{className:"graf--figure graf--iframe graf--first",tabIndex:"0"},h["default"].createElement("div",{className:"iframeContainer",dangerouslySetInnerHTML:{__html:this.state.embed_data.html}}),h["default"].createElement("figcaption",{className:"imageCaption"},h["default"].createElement(g.EditorBlock,(0,i["default"])({},this.props,{className:"imageCaption"}))))},t}(h["default"].Component);t["default"]=k,e.exports=t["default"]},230:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=o(80),i=n(r),a=o(15),l=n(a),s=o(18),d=n(s),c=o(17),u=n(c),p=o(6),h=n(p),f=function(e){function t(){(0,l["default"])(this,t);var o=(0,d["default"])(this,e.call(this));return o.handleToggleReadOnly=o.handleToggleReadOnly.bind(o),o.handleTestEmitAndDecode=o.handleTestEmitAndDecode.bind(o),o.handleTestEmitTEXT=o.handleTestEmitTEXT.bind(o),o.testEmitAndDecode=o.testEmitAndDecode.bind(o),o.testEmitTEXT=o.testEmitTEXT.bind(o),o.logState=o.logState.bind(o),o.toggleDisplay=o.toggleDisplay.bind(o),o.open=o.open.bind(o),o.render=o.render.bind(o),o.state={output:"",display:"none"},o}return(0,u["default"])(t,e),t.prototype.handleToggleReadOnly=function(e){return e.preventDefault(),this.props.editor.toggleEditable(),!1},t.prototype.handleTestEmitAndDecode=function(e){return e.preventDefault(),this.testEmitAndDecode()},t.prototype.handleTestEmitTEXT=function(e){return e.preventDefault(),this.testEmitTEXT()},t.prototype.testEmitAndDecode=function(e){var t=this.props.editor.emitSerializedOutput();return this.props.editor.setState({editorState:this.props.editor.decodeEditorContent(t)},this.logState((0,i["default"])(t))),!1},t.prototype.testEmitTEXT=function(){var e=this.props.editor.getTextFromEditor();return this.logState(e)},t.prototype.logState=function(e){return this.setState({output:e},this.open)},t.prototype.toggleDisplay=function(e){e.preventDefault();var t="block"===this.state.display?"none":this.state.display;return this.setState({display:t})},t.prototype.open=function(){return this.setState({display:"block"})},t.prototype.render=function(){return h["default"].createElement("div",null,h["default"].createElement("div",{className:"debugControls"},h["default"].createElement("ul",null,h["default"].createElement("li",null," LOCKS: ",this.props.editor.state.locks," "),h["default"].createElement("li",null,h["default"].createElement("a",{href:"#",onClick:this.handleToggleReadOnly},"EDITABLE: ",this.props.editor.state.read_only?"NO":"YES")),h["default"].createElement("li",null,h["default"].createElement("a",{href:"#",onClick:this.handleTestEmitTEXT},"EDITOR TEXT")),h["default"].createElement("li",null,h["default"].createElement("a",{href:"#",onClick:this.handleTestEmitAndDecode},"EDITOR STATE")))),h["default"].createElement("div",{className:"debugZone",style:{display:this.state.display}},h["default"].createElement("a",{href:"#",className:"dante-debug-close close",onClick:this.toggleDisplay}),h["default"].createElement("div",{className:"debugOutput"},h["default"].createElement("h2",null,"EDITOR OUTPUT"),this.state.output.length>0?h["default"].createElement("pre",null,this.state.output):void 0)))},t}(h["default"].Component);t["default"]=f,e.exports=t["default"]},231:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=o(15),i=n(r),a=o(18),l=n(a),s=o(17),d=n(s),c=o(6),u=n(c),p=o(9),h=function(e){function t(o){(0,i["default"])(this,t);var n=(0,l["default"])(this,e.call(this,o));return n._validateLink=n._validateLink.bind(n),n._checkProtocol=n._checkProtocol.bind(n),n._showPopLinkOver=n._showPopLinkOver.bind(n),n._hidePopLinkOver=n._hidePopLinkOver.bind(n),n.isHover=!1,n}return(0,d["default"])(t,e),t.prototype._validateLink=function(){var e=new RegExp("^(https?://)?((([a-zd]([a-zd-]*[a-zd])*).)+[a-z]{2,}|((d{1,3}.){3}d{1,3}))(:d+)?(/[-a-zd%_.~+]*)*(?[&a-zd%_.~+=-]*)?(#[-a-zd_]*)?$","i");return!!e.test(str)||(alert("Please enter a valid URL."),!1)},t.prototype._checkProtocol=function(){return console.log("xcvd")},t.prototype._showPopLinkOver=function(e){if(this.data.showPopLinkOver)return this.data.showPopLinkOver(this.refs.link)},t.prototype._hidePopLinkOver=function(e){if(this.data.hidePopLinkOver)return this.data.hidePopLinkOver()},t.prototype.render=function(){return this.data=p.Entity.get(this.props.entityKey).getData(),u["default"].createElement("a",{ref:"link",href:this.data.url,className:"markup--anchor",onMouseOver:this._showPopLinkOver,onMouseOut:this._hidePopLinkOver},this.props.children)},t}(u["default"].Component);t["default"]=h,e.exports=t["default"]},232:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=o(15),i=n(r),a=o(18),l=n(a),s=o(17),d=n(s),c=o(6),u=n(c),p=o(13),h=n(p),f=(o(9),o(27)),g=o(62),m=function(e){function t(o){(0,i["default"])(this,t);var n=(0,l["default"])(this,e.call(this,o));return n.display=n.display.bind(n),n.show=n.show.bind(n),n.hide=n.hide.bind(n),n._toggleScaled=n._toggleScaled.bind(n),n.scale=n.scale.bind(n),n.collapse=n.collapse.bind(n),n.componentWillReceiveProps=n.componentWillReceiveProps.bind(n),n.clickOnFileUpload=n.clickOnFileUpload.bind(n),n.handlePlaceholder=n.handlePlaceholder.bind(n),n.insertImage=n.insertImage.bind(n),n.handleFileInput=n.handleFileInput.bind(n),n.widgets=n.widgets.bind(n),n.clickHandler=n.clickHandler.bind(n),n.relocate=n.relocate.bind(n),n.state={position:{top:0,left:0},show:!1,scaled:!1},n}return(0,d["default"])(t,e),t.prototype.display=function(e){return e?this.show():this.hide()},t.prototype.show=function(){return this.setState({show:!0})},t.prototype.hide=function(){return this.setState({show:!1})},t.prototype.setPosition=function(e){return this.setState({position:e})},t.prototype._toggleScaled=function(e){return this.state.scaled?this.collapse():this.scale()},t.prototype.scale=function(){return this.setState({scaled:!0})},t.prototype.collapse=function(){return this.setState({scaled:!1})},t.prototype.componentWillReceiveProps=function(e){return this.collapse()},t.prototype.activeClass=function(){return this.isActive()?"is-active":""},t.prototype.isActive=function(){return this.state.show},t.prototype.scaledClass=function(){return this.state.scaled?"is-scaled":""},t.prototype.scaledWidth=function(){return this.state.scaled?"124":"0"},t.prototype.clickOnFileUpload=function(){return this.refs.fileInput.click(),this.collapse(),this.hide()},t.prototype.handlePlaceholder=function(e){var t={type:e.widget_options.insert_block,placeholder:e.options.placeholder,endpoint:e.options.endpoint};return this.props.onChange((0,f.resetBlockWithType)(this.props.editorState,"placeholder",t))},t.prototype.insertImage=function(e){var t={url:URL.createObjectURL(e),file:e};return this.props.onChange((0,f.addNewBlock)(this.props.editorState,"image",t))},t.prototype.handleFileInput=function(e){var t=e.target.files;return this.insertImage(t[0])},t.prototype.widgets=function(){return this.props.editor.widgets},t.prototype.clickHandler=function(e,t){var o=this.widgets().find(function(e){return e.icon===t});switch(o.widget_options.insertion){case"upload":return this.clickOnFileUpload(e,o);case"placeholder":return this.handlePlaceholder(o);default:return console.log("WRONG TYPE FOR "+o.widget_options.insertion)}},t.prototype.getItems=function(){return this.widgets().filter(function(e){return e.widget_options.displayOnInlineTooltip})},t.prototype.isDescendant=function(e,t){for(var o=t.parentNode;null!==o;){if(o===e)return!0;o=o.parentNode}return!1},t.prototype.relocate=function(){var e=this.props.editorState;if(e.getSelection().isCollapsed()){var t=(0,f.getCurrentBlock)(e),o=t.getType(),n=e.getCurrentContent(),r=e.getSelection(),i=n.getBlockForKey(r.anchorKey),a=(0,g.getSelection)(window);if(!a.rangeCount)return;var l=((0,f.getNode)(),(0,g.getSelectionRect)(a)),s=l,d=h["default"].findDOMNode(this.props.editor);d.getBoundingClientRect();return this.isDescendant(d,a.anchorNode)?(this.display(0===i.getText().length&&"unstyled"===o),this.setPosition({top:s.top+window.scrollY,left:s.left+window.scrollX-60})):void this.hide()}return this.hide()},t.prototype.render=function(){var e=this;return u["default"].createElement("div",{className:"inlineTooltip "+this.activeClass()+" "+this.scaledClass(),style:this.state.position},u["default"].createElement("button",{className:"inlineTooltip-button control",title:"Close Menu","data-action":"inline-menu",onClick:this._toggleScaled},u["default"].createElement("span",{className:"tooltip-icon dante-icon-plus"})),u["default"].createElement("div",{className:"inlineTooltip-menu",style:{width:this.scaledWidth()+"px"}},this.getItems().map(function(t,o){return u["default"].createElement(_,{item:t,key:o,clickHandler:e.clickHandler})}),u["default"].createElement("input",{type:"file",style:{display:"none"},ref:"fileInput",multiple:"multiple",onChange:this.handleFileInput})))},t}(u["default"].Component),_=function(e){function t(){(0,i["default"])(this,t);for(var o=arguments.length,n=Array(o),r=0;r<o;r++)n[r]=arguments[r];var a=(0,l["default"])(this,e.call.apply(e,[this].concat(n)));return a.clickHandler=a.clickHandler.bind(a),a}return(0,d["default"])(t,e),t.prototype.clickHandler=function(e){return e.preventDefault(),this.props.clickHandler(e,this.props.item.icon)},t.prototype.render=function(){return u["default"].createElement("button",{className:"inlineTooltip-button scale",title:this.props.title,onMouseDown:this.clickHandler},u["default"].createElement("span",{className:"tooltip-icon dante-icon-"+this.props.item.icon}))},t}(u["default"].Component);t["default"]=m,e.exports=t["default"]},233:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=o(15),i=n(r),a=o(18),l=n(a),s=o(17),d=n(s),c=o(6),u=n(c),p=o(13),h=n(p),f=(o(9),o(62)),g=o(27),m=function(e){function t(o){(0,i["default"])(this,t);var n=(0,l["default"])(this,e.call(this,o));return n.display=n.display.bind(n),n.show=n.show.bind(n),n.hide=n.hide.bind(n),n._toggleScaled=n._toggleScaled.bind(n),n.scale=n.scale.bind(n),n.collapse=n.collapse.bind(n),n.relocate=n.relocate.bind(n),n.componentWillReceiveProps=n.componentWillReceiveProps.bind(n),n.handleClick=n.handleClick.bind(n),n.state={position:{top:0,left:0},show:!1,scaled:!1,buttons:[{type:"left"},{type:"center"},{type:"fill"},{type:"wide"}]},n}return(0,d["default"])(t,e),t.prototype.display=function(e){return e?this.show():this.hide()},t.prototype.show=function(){return this.setState({show:!0})},t.prototype.hide=function(){return this.setState({show:!1})},t.prototype.setPosition=function(e){return this.setState({position:e})},t.prototype._toggleScaled=function(e){return this.state.scaled?this.collapse():this.scale()},t.prototype.scale=function(){return this.setState({scaled:!0})},t.prototype.collapse=function(){return this.setState({scaled:!1})},t.prototype.relocate=function(){var e=this.props.editorState;if(!e.getSelection().isCollapsed())return this.hide();var t=(0,g.getCurrentBlock)(e),o=t.getType(),n=e.getCurrentContent(),r=e.getSelection(),i=(n.getBlockForKey(r.anchorKey),(0,f.getSelection)(window));if(i.rangeCount){var a=(0,g.getNode)(),l=(0,f.getSelectionRect)(i),s=h["default"].findDOMNode(this.props.editor),d=s.getBoundingClientRect();if(this.display("image"===o),"image"===o){l=a.anchorNode.parentNode.parentNode.parentNode.getBoundingClientRect();var c=this.refs.image_popover,u=c.offsetWidth/2;return this.setPosition({top:l.top-d.top+60,left:l.left+l.width/2-u})}}},t.prototype.componentWillReceiveProps=function(e){return this.collapse()},t.prototype.getStyle=function(){if(!this.state.position)return{}},t.prototype.handleClick=function(e){return this.props.editor.setDirection(e.type)},t.prototype.render=function(){var e=this;return u["default"].createElement("div",{ref:"image_popover",className:"dante-popover popover--Aligntooltip popover--top popover--animated "+(this.state.show?"is-active":void 0),style:{top:this.state.position.top,left:this.state.position.left}},u["default"].createElement("div",{className:"popover-inner"},u["default"].createElement("ul",{className:"dante-menu-buttons"},this.state.buttons.map(function(t,o){return u["default"].createElement(_,{item:t,handleClick:e.handleClick,key:o})}))),u["default"].createElement("div",{className:"popover-arrow"}))},t}(u["default"].Component),_=function(e){function t(){(0,i["default"])(this,t);for(var o=arguments.length,n=Array(o),r=0;r<o;r++)n[r]=arguments[r];var a=(0,l["default"])(this,e.call.apply(e,[this].concat(n)));return a.handleClick=a.handleClick.bind(a),a.render=a.render.bind(a),a}return(0,d["default"])(t,e),t.prototype.handleClick=function(e){return e.preventDefault(),this.props.handleClick(this.props.item)},t.prototype.render=function(){return u["default"].createElement("li",{className:"dante-menu-button align-"+this.props.item.type,onMouseDown:this.handleClick},u["default"].createElement("span",{className:"tooltip-icon dante-icon-image-"+this.props.item.type}))},t}(u["default"].Component);t["default"]=m,e.exports=t["default"]},234:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=o(15),i=n(r),a=o(18),l=n(a),s=o(17),d=n(s),c=o(6),u=n(c),p=o(13),h=n(p),f=o(27),g=function(e){function t(o){(0,i["default"])(this,t);var n=(0,l["default"])(this,e.call(this,o));return n.display=n.display.bind(n),n.show=n.show.bind(n),n.hide=n.hide.bind(n),n.relocate=n.relocate.bind(n),n.render=n.render.bind(n),n.state={position:{top:0,left:0},show:!1,url:""},n}return(0,d["default"])(t,e),t.prototype.display=function(e){return e?this.show():this.hide()},t.prototype.show=function(){return this.setState({show:!0})},t.prototype.hide=function(){return this.setState({show:!1})},t.prototype.setPosition=function(e){return this.setState({position:e})},t.prototype.relocate=function(e){if(null==e&&(e=null),e){var t=this.props.editorState,o=(0,f.getCurrentBlock)(t),n=(o.getType(),t.getCurrentContent(),t.getSelection(),e.getBoundingClientRect()),r=this.refs.dante_popover,i=r.offsetWidth/2,a=h["default"].findDOMNode(this.props.editor),l=a.getBoundingClientRect();return{top:n.top-l.top+160,left:n.left+n.width/2-i}}},t.prototype.render=function(){var e=this.state.position,t={left:e.left,top:e.top,visibility:""+(this.state.show?"visible":"hidden")};return u["default"].createElement("div",{ref:"dante_popover",className:"dante-popover popover--tooltip popover--Linktooltip popover--bottom is-active",style:t,onMouseOver:this.props.handleOnMouseOver,onMouseOut:this.props.handleOnMouseOut},u["default"].createElement("div",{className:"popover-inner"},u["default"].createElement("a",{href:this.props.url,target:"_blank"},this.state.url)),u["default"].createElement("div",{className:"popover-arrow"}))},t}(u["default"].Component);t["default"]=g,e.exports=t["default"]},235:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=o(15),i=n(r),a=o(18),l=n(a),s=o(17),d=n(s),c=o(6),u=n(c),p=o(13),h=n(p),f=o(9),g=o(62),m=o(27),_=function(e){function t(o){(0,i["default"])(this,t);var n=(0,l["default"])(this,e.call(this,o));return n._clickInlineHandler=n._clickInlineHandler.bind(n),n.display=n.display.bind(n),n.show=n.show.bind(n),n.hide=n.hide.bind(n),n.relocate=n.relocate.bind(n),n._clickBlockHandler=n._clickBlockHandler.bind(n),n.displayLinkMode=n.displayLinkMode.bind(n),n.displayActiveMenu=n.displayActiveMenu.bind(n),n._enableLinkMode=n._enableLinkMode.bind(n),n._disableLinkMode=n._disableLinkMode.bind(n),n.handleInputEnter=n.handleInputEnter.bind(n),n.confirmLink=n.confirmLink.bind(n),n.inlineItems=n.inlineItems.bind(n),n.blockItems=n.blockItems.bind(n),n.getDefaultValue=n.getDefaultValue.bind(n),n.getVisibleSelectionRect=f.getVisibleSelectionRect,n.state={link_mode:!1,show:!1,position:{}},n}return(0,d["default"])(t,e),t.prototype._clickInlineHandler=function(e,t){var o=this;return e.preventDefault(),this.props.onChange(f.RichUtils.toggleInlineStyle(this.props.editorState,t)),setTimeout(function(){return o.relocate()},0)},t.prototype.display=function(e){return e?this.show():this.hide()},t.prototype.show=function(){return this.setState({show:!0})},t.prototype.hide=function(){return this.setState({link_mode:!1,show:!1})},t.prototype.setPosition=function(e){return this.setState({position:e})},t.prototype.isDescendant=function(e,t){for(var o=t.parentNode;null!==o;){if(o===e)return!0;o=o.parentNode}return!1},t.prototype.relocate=function(){var e=(0,m.getCurrentBlock)(this.props.editorState),t=e.getType();if(this.props.configTooltip.selectionElements.indexOf(t)<0)return void this.hide();if(!this.state.link_mode&&this.state.show){var o=this.refs.dante_menu,n=o.offsetWidth/2,r=(0,g.getSelection)(window);if(r.rangeCount){var i=(0,g.getSelectionRect)(r),a=h["default"].findDOMNode(this.props.editor),l=a.getBoundingClientRect();if(!this.isDescendant(a,r.anchorNode))return void this.hide();var s=i.top-l.top- -90-5,d=i.left+i.width/2-n;if(s&&d)return this.setState({show:!0,position:{left:d,top:s}})}}},t.prototype._clickBlockHandler=function(e,t){var o=this;return e.preventDefault(),this.props.onChange(f.RichUtils.toggleBlockType(this.props.editorState,t)),setTimeout(function(){return o.relocate()},0)},t.prototype.displayLinkMode=function(){return this.state.link_mode?"dante-menu--linkmode":""},t.prototype.displayActiveMenu=function(){return this.state.show?"dante-menu--active":""},t.prototype._enableLinkMode=function(e){return e.preventDefault(),this.setState({link_mode:!0})},t.prototype._disableLinkMode=function(e){return e.preventDefault(),this.setState({link_mode:!1,url:""})},t.prototype.hideMenu=function(){return this.hide()},t.prototype.handleInputEnter=function(e){if(13===e.which)return this.confirmLink(e)},t.prototype.confirmLink=function(e){e.preventDefault();var t=this.props.editorState,o=e.currentTarget.value,n=(t.getCurrentContent(),t.getSelection()),r={url:o,showPopLinkOver:this.props.showPopLinkOver,hidePopLinkOver:this.props.hidePopLinkOver},i=f.Entity.create("LINK","MUTABLE",r);return n.isCollapsed()?void console.log("COLLAPSED SKIPPING LINK"):(this.props.onChange(f.RichUtils.toggleLink(t,n,i)),this._disableLinkMode(e))},t.prototype.getPosition=function(){var e=this.state.position;return e},t.prototype.inlineItems=function(){return this.props.widget_options.block_types.filter(function(e){return"inline"===e.type})},t.prototype.blockItems=function(){return this.props.widget_options.block_types.filter(function(e){return"block"===e.type})},t.prototype.getDefaultValue=function(){var e=this;this.refs.dante_menu_input&&(this.refs.dante_menu_input.value="");var t=(0,m.getCurrentBlock)(this.props.editorState),o=(t.getType(),this.props.editor.state.editorState.getSelection()),n=null,r=null;return t.findEntityRanges(function(e){var t=e.getEntity();return n=t,null!==t&&"LINK"===f.Entity.get(t).getType()},function(t,i){var a=o.getAnchorOffset(),l=o.getFocusOffset();if(o.getIsBackward()&&(a=o.getFocusOffset(),l=o.getAnchorOffset()),t===a&&i===l)return r=f.Entity.get(n).getData().url,e.refs.dante_menu_input.value=r})},t.prototype.render=function(){var e=this;return u["default"].createElement("div",{id:"dante-menu",ref:"dante_menu",className:"dante-menu "+this.displayActiveMenu()+" "+this.displayLinkMode(),style:this.getPosition()},u["default"].createElement("div",{className:"dante-menu-linkinput"},u["default"].createElement("input",{className:"dante-menu-input",ref:"dante_menu_input",placeholder:"Paste or type a link",onKeyPress:this.handleInputEnter,defaultValue:this.getDefaultValue()}),u["default"].createElement("div",{className:"dante-menu-button",onMouseDown:this._disableLinkMode})),u["default"].createElement("ul",{className:"dante-menu-buttons"},this.blockItems().map(function(t,o){return u["default"].createElement(y,{key:o,item:t,handleClick:e._clickBlockHandler,editorState:e.props.editorState,type:"block",currentStyle:e.props.editorState.getCurrentInlineStyle})}),u["default"].createElement(k,{editorState:this.props.editorState,enableLinkMode:this._enableLinkMode}),this.inlineItems().map(function(t,o){return u["default"].createElement(y,{key:o,item:t,type:"inline",editorState:e.props.editorState,handleClick:e._clickInlineHandler})})))},t}(u["default"].Component),y=function(e){function t(){(0,i["default"])(this,t);for(var o=arguments.length,n=Array(o),r=0;r<o;r++)n[r]=arguments[r];var a=(0,l["default"])(this,e.call.apply(e,[this].concat(n)));return a.handleClick=a.handleClick.bind(a),a.activeClass=a.activeClass.bind(a),a.isActive=a.isActive.bind(a),a.activeClassInline=a.activeClassInline.bind(a),a.activeClassBlock=a.activeClassBlock.bind(a),a.render=a.render.bind(a),a}return(0,d["default"])(t,e),t.prototype.handleClick=function(e){return this.props.handleClick(e,this.props.item.style)},t.prototype.activeClass=function(){return this.isActive()?"active":""},t.prototype.isActive=function(){return"block"===this.props.type?this.activeClassBlock():this.activeClassInline()},t.prototype.activeClassInline=function(){if(this.props.editorState)return this.props.editorState.getCurrentInlineStyle().has(this.props.item.style)},t.prototype.activeClassBlock=function(){if(this.props.editorState){var e=this.props.editorState.getSelection(),t=this.props.editorState.getCurrentContent().getBlockForKey(e.getStartKey()).getType();return this.props.item.style===t}},t.prototype.render=function(){return u["default"].createElement("li",{className:"dante-menu-button "+this.activeClass(),onMouseDown:this.handleClick},u["default"].createElement("i",{className:"dante-icon dante-icon-"+this.props.item.label,"data-action":"bold"}))},t}(u["default"].Component),k=function(e){function t(){(0,i["default"])(this,t);for(var o=arguments.length,n=Array(o),r=0;r<o;r++)n[r]=arguments[r];
var a=(0,l["default"])(this,e.call.apply(e,[this].concat(n)));return a.promptForLink=a.promptForLink.bind(a),a}return(0,d["default"])(t,e),t.prototype.promptForLink=function(e){var t=this.props.editorState.getSelection();if(!t.isCollapsed())return this.props.enableLinkMode(e)},t.prototype.render=function(){return u["default"].createElement("li",{className:"dante-menu-button",onMouseDown:this.promptForLink},u["default"].createElement("i",{className:"dante-icon icon-createlink","data-action":"createlink"},"link"))},t}(u["default"].Component);t["default"]=_,e.exports=t["default"]},236:function(e,t,o){"use strict";t.__esModule=!0;var n=o(9),r=function(e,t,o,r){return o.findEntityRanges(function(o){return function(o){var r,i,a;return r=o.getEntity(),a=null!==r&&n.Entity.get(r).getType()===e,a?(i={showPopLinkOver:t.showPopLinkOver,hidePopLinkOver:t.hidePopLinkOver},n.Entity.mergeData(r,i)):void 0,a}}(void 0),r)};t["default"]=r,e.exports=t["default"]},237:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=o(80),i=n(r),a=o(9),l=(o(53),function(){var e=arguments,t=e.length-1;return function(){for(var o=t,n=e[t].apply(this,arguments);o--;)n=e[o].call(this,n);return n}}),s=function(e){return{contentType:"image",imgSrc:e.getAttribute("src")}},d=function(e){if(null===e)return null;var t=document.createElement("blockquote");return t.innerText=(0,i["default"])(e),t},c=function(e,t){if(t instanceof HTMLElement){var o=u(e);return o.parentNode.insertBefore(t,o)}},u=function(e){for(;e.parentNode;)if("BODY"!==e.parentNode.tagName&&(e=e.parentNode),"BODY"===e.parentNode.tagName)return e},p=l(d,s),h=function(e){return c(e,p(e))},f=function(e,t){var o=(new DOMParser).parseFromString(e,"text/html");o.querySelectorAll("img").forEach(function(e){return h(e)});console.log(o.body.innerHTML);var n=(0,a.convertFromHTML)(o.body.innerHTML,a.getSafeBodyFromHTML,t);return n=n.map(function(e){var t=void 0;if(console.log("CHECK BLOCK",e.getType()),"blockquote"!==e.getType())return e;var o="";try{o=JSON.parse(e.getText())}catch(n){return e}return t=e.merge({type:"image",text:"",data:{url:o.imgSrc,forceUpload:!0}})}),o=null,a.ContentState.createFromBlockArray(n)};t["default"]=f,e.exports=t["default"]},238:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=o(80),i=n(r),a=o(15),l=n(a),s=o(61),d=n(s),c=o(53),u=n(c),p=function(){function e(t){(0,l["default"])(this,e),this.getLocks=t.getLocks,this.config=t.config,this.editorContent=t.editorContent,this.editorState=t.editorState}return e.prototype.handleStore=function(e){return this.store()},e.prototype.store=function(e){var t=this;if(this.config.data_storage.url&&!(this.getLocks()>0))return clearTimeout(this.timeout),this.timeout=setTimeout(function(){return t.checkforStore(e)},this.config.data_storage.interval)},e.prototype.getTextFromEditor=function(e){return e.blocks.map(function(e){return e.text}).join("\n")},e.prototype.getUrl=function(){var e=this.config.data_storage.url;return"function"==typeof e?e():e},e.prototype.getMethod=function(){var e=this.config.data_storage.method;return"function"==typeof e?e():e},e.prototype.checkforStore=function(e){var t=this,o=!u["default"].is(u["default"].fromJS(this.editorContent),u["default"].fromJS(e));if(o)return this.config.xhr.before_handler&&this.config.xhr.before_handler(),(0,d["default"])({method:this.getMethod(),url:this.getUrl(),data:{editor_content:(0,i["default"])(e),text_content:this.getTextFromEditor(e)}}).then(function(e){if(t.config.data_storage.success_handler&&t.config.data_storage.success_handler(e),t.config.xhr.success_handler)return t.config.xhr.success_handler(e)})["catch"](function(e){if(t.config.xhr.failure_handler)return t.config.xhr.failure_handler(e)})},e}();t["default"]=p,e.exports=t["default"]},350:function(e,t){},351:function(e,t){},371:function(e,t,o){e.exports=o.p+"fonts/dante.svg"},372:function(e,t,o){e.exports=o.p+"fonts/dante.ttf"},373:function(e,t,o){e.exports=o.p+"fonts/dante.woff"},374:function(e,t,o){e.exports=o.p+"fonts/fontello.svg"},375:function(e,t,o){e.exports=o.p+"fonts/fontello.ttf"},376:function(e,t,o){e.exports=o.p+"fonts/fontello.woff"}})});
//# sourceMappingURL=Dante2.min.js.map