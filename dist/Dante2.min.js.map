{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///Dante2.min.js","webpack:///./src/index.js","webpack:///external {\"root\":\"React\",\"commonjs2\":\"react\",\"commonjs\":\"react\",\"amd\":\"react\"}","webpack:///external {\"root\":\"ReactDOM\",\"commonjs2\":\"react-dom\",\"commonjs\":\"react-dom\",\"amd\":\"react-dom\"}","webpack:///./src/model/index.js","webpack:///./src/utils/selection.js","webpack:///./src/components/decorators/link.js","webpack:///./src/utils/find_entities.js","webpack:///./src/components/dante.js?178c","webpack:///./src/components/dante_editor.js?cf48","webpack:///./src/components/blocks/embed.js","webpack:///./src/components/blocks/image.js","webpack:///./src/components/blocks/placeholder.js","webpack:///./src/components/blocks/video.js","webpack:///./src/components/debug.js","webpack:///./src/components/popovers/addButton.js","webpack:///./src/components/popovers/image.js","webpack:///./src/components/popovers/link.js","webpack:///./src/components/popovers/toolTip.js","webpack:///./src/utils/html2content.js","webpack:///./src/utils/save_content.js"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_5__","__WEBPACK_EXTERNAL_MODULE_9__","webpackJsonpDante2","0","__webpack_require__","_interopRequireDefault","obj","__esModule","default","_dante","_dante2","_dante_editor","_dante_editor2","Dante","DanteEditor","5","9","24","addNewBlockAt","updateTextOfBlock","updateDataOfBlock","resetBlockWithType","addNewBlock","getCurrentBlock","getNode","getDefaultBlockData","undefined","_immutable","_draftJs","blockType","initialData","arguments","length","window","t","getSelection","document","selection","createRange","text","editorState","selectionState","contentState","getCurrentContent","block","getBlockForKey","getStartKey","newType","isCollapsed","key","blockMap","getBlockMap","currentBlock","getLength","getType","newBlock","merge","type","data","newContentState","set","selectionAfter","EditorState","push","get","newText","console","log","getText","substr","anchorOffset","focusOffset","newData","getKey","pivotBlockKey","newBlockType","content","blocksBefore","toSeq","takeUntil","v","blocksAfter","skipUntil","rest","newBlockKey","genKey","ContentBlock","characterList","getCharacterList","slice","depth","Map","newBlockMap","concat","toOrderedMap","newContent","selectionBefore","anchorKey","focusKey","isBackward","62","getSelectionRect","selected","_rect","getRangeAt","getBoundingClientRect","rect","top","getClientRects","anchorNode","isEmptyline","getSelectedBlockNode","rangeCount","node","startContainer","getAttribute","parentNode","137","_classCallCheck2","_classCallCheck3","_possibleConstructorReturn2","_possibleConstructorReturn3","_inherits2","_inherits3","_react","_react2","Link","_React$Component","props","_this","call","_validateLink","bind","_checkProtocol","_showPopLinkOver","_hidePopLinkOver","isHover","prototype","pattern","RegExp","test","str","alert","e","showPopLinkOver","refs","link","hidePopLinkOver","render","Entity","entityKey","getData","createElement","ref","href","url","className","onMouseOver","onMouseOut","children","Component","138","findEntities","entityType","instance","contentBlock","callback","findEntityRanges","character","opts","res","getEntity","mergeData","229","global","230","231","_reactDom","_axios","_axios2","_index","EmbedBlock","updateData","dataForUpdate","componentDidMount","state","embed_data","defaultData","error","existing_data","toJS","_props","_props$blockProps","blockProps","getEditorState","setEditorState","_this2","endpoint","provisory_text","method","then","result","setState","response","error_message","classForImage","images","picture","target","style","backgroundImage","title","description","provider_url","232","_assign","_assign2","ImageBlock","blockPropsSrc","defaultUrl","defaultAspectRatio","replaceImg","startLoader","stopLoader","handleUpload","aspectRatio","updateDataSelection","handleGrafFigureSelectImg","getUploadUrl","uploadFile","uploadCompleted","updateProgressBar","placeHolderEnabled","placeholderText","handleFocus","config","file","loading","loading_progress","enabled","caption","defaultPlaceholder","direction","width","height","aspect_ratio","src","URL","createObjectURL","image_caption_placeholder","ratio","getAspectRatio","w","h","maxWidth","maxHeight","fill_ratio","forceUpload","img","Image","image_tag","self","includes","onload","addLock","newselection","forceSelection","preventDefault","coords","getBase64Image","canvas","ctx","getContext","drawImage","dataURL","toDataURL","formatData","formData","FormData","formName","upload_formName","append","upload_url","getUploadHeaders","upload_headers","_this3","handleUp","headers","onUploadProgress","removeLock","upload_callback","upload_error_callback","json_response","n","json","complete","lengthComputable","loaded","total","_this4","setTimeout","suppressContentEditableWarning","onClick","paddingBottom","Loader","toggle","progress","onMouseDown","EditorBlock","editable","_React$Component2","apply","Math","round","233","PlaceholderBlock","placeholderFromProps","defaultText","classForDefault","placeholder","234","VideoBlock","thumbnail_url","tabIndex","dangerouslySetInnerHTML","__html","html","235","_stringify","_stringify2","Debug","handleToggleReadOnly","handleTestEmitAndDecode","handleTestEmitTEXT","testEmitAndDecode","testEmitTEXT","logState","toggleDisplay","open","output","display","editor","toggleEditable","raw_as_json","emitSerializedOutput","decodeEditorContent","getTextFromEditor","raw","d","locks","read_only","236","_reactDom2","_selection","DanteInlineTooltip","show","hide","_toggleScaled","scale","collapse","componentWillReceiveProps","clickOnFileUpload","handlePlaceholder","insertImage","handleFileInput","widgets","clickHandler","relocate","position","left","scaled","b","setPosition","ev","newProps","activeClass","isActive","scaledClass","scaledWidth","fileInput","click","input","widget_options","insert_block","options","onChange","fileList","files","request_block","find","o","icon","insertion","getItems","filter","displayOnInlineTooltip","isDescendant","parent","child","nativeSelection","selectionBoundary","findDOMNode","scrollY","scrollX","data-action","map","item","i","InlineTooltipItem","multiple","_len","args","Array","_key","237","DanteImagePopover","handleClick","buttons","parentBoundary","el","image_popover","padd","offsetWidth","getStyle","setDirection","DanteImagePopoverItem","238","DanteAnchorPopover","dante_popover","visibility","handleOnMouseOver","handleOnMouseOut","239","DanteTooltip","_clickInlineHandler","_clickBlockHandler","displayLinkMode","displayActiveMenu","_enableLinkMode","_disableLinkMode","handleInputEnter","confirmLink","inlineItems","blockItems","getDefaultValue","getVisibleSelectionRect","link_mode","RichUtils","toggleInlineStyle","configTooltip","selectionElements","indexOf","dante_menu","toggleBlockType","hideMenu","which","urlValue","currentTarget","value","create","toggleLink","getPosition","pos","block_types","dante_menu_input","selectedEntity","start","end","selStart","getAnchorOffset","selEnd","getFocusOffset","getIsBackward","_this5","id","onKeyPress","defaultValue","DanteTooltipItem","currentStyle","getCurrentInlineStyle","DanteTooltipLink","enableLinkMode","_this6","activeClassInline","activeClassBlock","has","label","_React$Component3","_len2","_key2","_this7","promptForLink","240","compose","getBlockSpecForElement","imgElement","contentType","imgSrc","wrapBlockSpec","blockSpec","tempEl","innerText","replaceElement","oldEl","newEl","HTMLElement","upEl","getUpEl","insertBefore","tagName","elementToBlockSpecElement","imgReplacer","customHTML2Content","HTML","blockRn","tempDoc","DOMParser","parseFromString","querySelectorAll","forEach","body","innerHTML","contentBlocks","convertFromHTML","getSafeBodyFromHTML","JSON","parse","ContentState","createFromBlockArray","241","_immutable2","SaveBehavior","getLocks","editorContent","handleStore","store","data_storage","clearTimeout","timeout","checkforStore","interval","blocks","join","getUrl","getMethod","isChanged","is","fromJS","xhr","before_handler","editor_content","text_content","success_handler","failure_handler"],"mappings":"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","file":"Dante2.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"), require(\"react-dom\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\", \"react-dom\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Dante2\"] = factory(require(\"react\"), require(\"react-dom\"));\n\telse\n\t\troot[\"Dante2\"] = factory(root[\"React\"], root[\"ReactDOM\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_5__, __WEBPACK_EXTERNAL_MODULE_9__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"), require(\"react-dom\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\", \"react-dom\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Dante2\"] = factory(require(\"react\"), require(\"react-dom\"));\n\telse\n\t\troot[\"Dante2\"] = factory(root[\"React\"], root[\"ReactDOM\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_5__, __WEBPACK_EXTERNAL_MODULE_9__) {\nreturn webpackJsonpDante2([1],{\n\n/***/ 0:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _dante = __webpack_require__(229);\n\t\n\tvar _dante2 = _interopRequireDefault(_dante);\n\t\n\tvar _dante_editor = __webpack_require__(230);\n\t\n\tvar _dante_editor2 = _interopRequireDefault(_dante_editor);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tmodule.exports = {\n\t  Dante: _dante2['default'],\n\t  DanteEditor: _dante_editor2['default']\n\t};\n\n/***/ },\n\n/***/ 5:\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n/***/ },\n\n/***/ 9:\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_9__;\n\n/***/ },\n\n/***/ 24:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\texports.addNewBlockAt = exports.updateTextOfBlock = exports.updateDataOfBlock = exports.resetBlockWithType = exports.addNewBlock = exports.getCurrentBlock = exports.getNode = exports.getDefaultBlockData = undefined;\n\t\n\tvar _immutable = __webpack_require__(46);\n\t\n\tvar _draftJs = __webpack_require__(10);\n\t\n\t/*\n\tUsed from [react-rte](https://github.com/brijeshb42/medium-draft)\n\tby [brijeshb42](https://github.com/brijeshb42/medium-draft)\n\t*/\n\t\n\t/*\n\tReturns default block-level metadata for various block type. Empty object otherwise.\n\t*/\n\tvar getDefaultBlockData = exports.getDefaultBlockData = function getDefaultBlockData(blockType) {\n\t  var initialData = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\t\n\t  switch (blockType) {\n\t    //case Block.TODO: return { checked: false };\n\t    default:\n\t      return initialData;\n\t  }\n\t};\n\t\n\tvar getNode = exports.getNode = function getNode() {\n\t  var root = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : window;\n\t\n\t  var t = null;\n\t  if (root.getSelection) {\n\t    t = root.getSelection();\n\t  } else if (root.document.getSelection) {\n\t    t = root.document.getSelection();\n\t  } else if (root.document.selection) {\n\t    t = root.document.selection.createRange().text;\n\t  }\n\t  return t;\n\t};\n\t\n\t/*\n\tGet currentBlock in the editorState.\n\t*/\n\tvar getCurrentBlock = exports.getCurrentBlock = function getCurrentBlock(editorState) {\n\t  var selectionState = editorState.getSelection();\n\t  var contentState = editorState.getCurrentContent();\n\t  var block = contentState.getBlockForKey(selectionState.getStartKey());\n\t  return block;\n\t};\n\t\n\t/*\n\tAdds a new block (currently replaces an empty block) at the current cursor position\n\tof the given `newType`.\n\t*/\n\tvar addNewBlock = exports.addNewBlock = function addNewBlock(editorState) {\n\t  var newType = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"unstyled\";\n\t  var initialData = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\t\n\t  var selectionState = editorState.getSelection();\n\t  if (!selectionState.isCollapsed()) {\n\t    return editorState;\n\t  }\n\t  var contentState = editorState.getCurrentContent();\n\t  var key = selectionState.getStartKey();\n\t  var blockMap = contentState.getBlockMap();\n\t  var currentBlock = getCurrentBlock(editorState);\n\t  if (!currentBlock) {\n\t    return editorState;\n\t  }\n\t  if (currentBlock.getLength() === 0) {\n\t    if (currentBlock.getType() === newType) {\n\t      return editorState;\n\t    }\n\t    var newBlock = currentBlock.merge({\n\t      type: newType,\n\t      data: getDefaultBlockData(newType, initialData)\n\t    });\n\t    var newContentState = contentState.merge({\n\t      blockMap: blockMap.set(key, newBlock),\n\t      selectionAfter: selectionState\n\t    });\n\t    return _draftJs.EditorState.push(editorState, newContentState, 'change-block-type');\n\t  }\n\t  return editorState;\n\t};\n\t\n\t/*\n\tChanges the block type of the current block.\n\t*/\n\tvar resetBlockWithType = exports.resetBlockWithType = function resetBlockWithType(editorState) {\n\t  var newType = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"unstyled\";\n\t  var data = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\t\n\t  var contentState = editorState.getCurrentContent();\n\t  var selectionState = editorState.getSelection();\n\t  var key = selectionState.getStartKey();\n\t  var blockMap = contentState.getBlockMap();\n\t  var block = blockMap.get(key);\n\t\n\t  var newText = '';\n\t  console.log(\"DATA FOR PLACEHOLDER!\", data);\n\t  var text = block.getText();\n\t  if (block.getLength() >= 2) {\n\t    newText = text.substr(1);\n\t  }\n\t\n\t  /*if(data.text){\n\t    newText = data.text\n\t  }*/\n\t\n\t  //let newText = data.text\n\t\n\t  var newBlock = block.merge({\n\t    text: newText,\n\t    type: newType,\n\t    data: getDefaultBlockData(newType, data)\n\t  });\n\t  var newContentState = contentState.merge({\n\t    blockMap: blockMap.set(key, newBlock),\n\t    selectionAfter: selectionState.merge({\n\t      anchorOffset: 0,\n\t      focusOffset: 0\n\t    })\n\t  });\n\t  return _draftJs.EditorState.push(editorState, newContentState, 'change-block-type');\n\t};\n\t\n\t/*\n\tUpdate block-level metadata of the given `block` to the `newData`/\n\t*/\n\tvar updateDataOfBlock = exports.updateDataOfBlock = function updateDataOfBlock(editorState, block, newData) {\n\t  var contentState = editorState.getCurrentContent();\n\t  var newBlock = block.merge({\n\t    data: newData\n\t  });\n\t  var newContentState = contentState.merge({\n\t    blockMap: contentState.getBlockMap().set(block.getKey(), newBlock)\n\t  });\n\t  return _draftJs.EditorState.push(editorState, newContentState, 'change-block-type');\n\t  // return editorState;\n\t};\n\t\n\tvar updateTextOfBlock = exports.updateTextOfBlock = function updateTextOfBlock(editorState, block, text) {\n\t  var contentState = editorState.getCurrentContent();\n\t  var newBlock = block.merge({\n\t    text: text\n\t  });\n\t  var newContentState = contentState.merge({\n\t    blockMap: contentState.getBlockMap().set(block.getKey(), newBlock)\n\t  });\n\t\n\t  return _draftJs.EditorState.push(editorState, newContentState, 'change-block-type');\n\t  // return editorState;\n\t};\n\t\n\t// const BEFORE = -1;\n\t// const AFTER = 1;\n\t\n\t/*\n\tUsed from [react-rte](https://github.com/sstur/react-rte/blob/master/src/lib/insertBlockAfter.js)\n\tby [sstur](https://github.com/sstur)\n\t*/\n\tvar addNewBlockAt = exports.addNewBlockAt = function addNewBlockAt(editorState, pivotBlockKey) {\n\t  var newBlockType = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"unstyled\";\n\t  var initialData = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\t\n\t  var content = editorState.getCurrentContent();\n\t  var blockMap = content.getBlockMap();\n\t  var block = blockMap.get(pivotBlockKey);\n\t  var blocksBefore = blockMap.toSeq().takeUntil(function (v) {\n\t    return v === block;\n\t  });\n\t  var blocksAfter = blockMap.toSeq().skipUntil(function (v) {\n\t    return v === block;\n\t  }).rest();\n\t  var newBlockKey = (0, _draftJs.genKey)();\n\t\n\t  var newBlock = new _draftJs.ContentBlock({\n\t    key: newBlockKey,\n\t    type: newBlockType,\n\t    text: '',\n\t    characterList: block.getCharacterList().slice(0, 0),\n\t    depth: 0,\n\t    data: (0, _immutable.Map)(getDefaultBlockData(newBlockType, initialData))\n\t  });\n\t\n\t  var newBlockMap = blocksBefore.concat([[pivotBlockKey, block], [newBlockKey, newBlock]], blocksAfter).toOrderedMap();\n\t\n\t  var selection = editorState.getSelection();\n\t\n\t  var newContent = content.merge({\n\t    blockMap: newBlockMap,\n\t    selectionBefore: selection,\n\t    selectionAfter: selection.merge({\n\t      anchorKey: newBlockKey,\n\t      anchorOffset: 0,\n\t      focusKey: newBlockKey,\n\t      focusOffset: 0,\n\t      isBackward: false\n\t    })\n\t  });\n\t  return _draftJs.EditorState.push(editorState, newContent, 'split-block');\n\t};\n\n/***/ },\n\n/***/ 62:\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\t/*\n\tReturns the `boundingClientRect` of the passed selection.\n\t*/\n\tvar getSelectionRect = exports.getSelectionRect = function getSelectionRect(selected) {\n\t  var _rect = selected.getRangeAt(0).getBoundingClientRect();\n\t  // selected.getRangeAt(0).getBoundingClientRect()\n\t  var rect = _rect && _rect.top ? _rect : selected.getRangeAt(0).getClientRects()[0];\n\t  if (!rect) {\n\t    if (selected.anchorNode && selected.anchorNode.getBoundingClientRect) {\n\t      rect = selected.anchorNode.getBoundingClientRect();\n\t      rect.isEmptyline = true;\n\t    } else {\n\t      return null;\n\t    }\n\t  }\n\t  return rect;\n\t};\n\t\n\t/*\n\tReturns the native selection node.\n\t*/\n\tvar getSelection = exports.getSelection = function getSelection(root) {\n\t  var t = null;\n\t  if (root.getSelection) {\n\t    t = root.getSelection();\n\t  } else if (root.document.getSelection) {\n\t    t = root.document.getSelection();\n\t  } else if (root.document.selection) {\n\t    t = root.document.selection.createRange().text;\n\t  }\n\t  return t;\n\t};\n\t\n\t/*\n\tRecursively finds the DOM Element of the block where the cursor is currently present.\n\tIf not found, returns null.\n\t*/\n\tvar getSelectedBlockNode = exports.getSelectedBlockNode = function getSelectedBlockNode(root) {\n\t  var selection = root.getSelection();\n\t  if (selection.rangeCount === 0) {\n\t    return null;\n\t  }\n\t  var node = selection.getRangeAt(0).startContainer;\n\t  // console.log(node);\n\t  do {\n\t    if (node.getAttribute && node.getAttribute('data-block') === 'true') {\n\t      return node;\n\t    }\n\t    node = node.parentNode;\n\t    // console.log(node);\n\t  } while (node !== null);\n\t  return null;\n\t};\n\n/***/ },\n\n/***/ 137:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\t\n\tvar _classCallCheck2 = __webpack_require__(14);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tvar _possibleConstructorReturn2 = __webpack_require__(18);\n\t\n\tvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\t\n\tvar _inherits2 = __webpack_require__(17);\n\t\n\tvar _inherits3 = _interopRequireDefault(_inherits2);\n\t\n\tvar _react = __webpack_require__(5);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _draftJs = __webpack_require__(10);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar Link = function (_React$Component) {\n\t  (0, _inherits3['default'])(Link, _React$Component);\n\t\n\t  function Link(props) {\n\t    (0, _classCallCheck3['default'])(this, Link);\n\t\n\t    var _this = (0, _possibleConstructorReturn3['default'])(this, _React$Component.call(this, props));\n\t\n\t    _this._validateLink = _this._validateLink.bind(_this);\n\t    _this._checkProtocol = _this._checkProtocol.bind(_this);\n\t    _this._showPopLinkOver = _this._showPopLinkOver.bind(_this);\n\t    _this._hidePopLinkOver = _this._hidePopLinkOver.bind(_this);\n\t    _this.isHover = false;\n\t    return _this;\n\t  }\n\t\n\t  Link.prototype._validateLink = function _validateLink() {\n\t    var pattern = new RegExp('^(https?:\\/\\/)?' + // protocol\n\t    '((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|' + // domain name\n\t    '((\\d{1,3}\\.){3}\\d{1,3}))' + // OR ip (v4) address\n\t    '(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*' + // port and path\n\t    '(\\?[&a-z\\d%_.~+=-]*)?' + // query string\n\t    '(\\#[-a-z\\d_]*)?$', 'i'); // fragment locater\n\t    if (!pattern.test(str)) {\n\t      alert(\"Please enter a valid URL.\");\n\t      return false;\n\t    } else {\n\t      return true;\n\t    }\n\t  };\n\t\n\t  Link.prototype._checkProtocol = function _checkProtocol() {\n\t    return console.log(\"xcvd\");\n\t  };\n\t\n\t  Link.prototype._showPopLinkOver = function _showPopLinkOver(e) {\n\t    if (!this.data.showPopLinkOver) {\n\t      return;\n\t    }\n\t    return this.data.showPopLinkOver(this.refs.link);\n\t  };\n\t\n\t  Link.prototype._hidePopLinkOver = function _hidePopLinkOver(e) {\n\t    if (!this.data.hidePopLinkOver) {\n\t      return;\n\t    }\n\t    return this.data.hidePopLinkOver();\n\t  };\n\t\n\t  Link.prototype.render = function render() {\n\t    this.data = _draftJs.Entity.get(this.props.entityKey).getData();\n\t\n\t    return _react2['default'].createElement(\n\t      'a',\n\t      {\n\t        ref: 'link',\n\t        href: this.data.url,\n\t        className: 'markup--anchor',\n\t        onMouseOver: this._showPopLinkOver,\n\t        onMouseOut: this._hidePopLinkOver\n\t      },\n\t      this.props.children\n\t    );\n\t  };\n\t\n\t  return Link;\n\t}(_react2['default'].Component);\n\t\n\texports['default'] = Link;\n\tmodule.exports = exports['default'];\n\n/***/ },\n\n/***/ 138:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\t\n\tvar _draftJs = __webpack_require__(10);\n\t\n\t//TODO: what the f*ck is happening here? ;-;\n\tvar findEntities = function findEntities(entityType, instance, contentBlock, callback) {\n\t  return contentBlock.findEntityRanges(function (_this) {\n\t    return function (character) {\n\t      var entityKey, opts, res;\n\t      entityKey = character.getEntity();\n\t      return res = entityKey !== null && _draftJs.Entity.get(entityKey).getType() === entityType, res ? (opts = {\n\t        showPopLinkOver: instance.showPopLinkOver,\n\t        hidePopLinkOver: instance.hidePopLinkOver\n\t      }, _draftJs.Entity.mergeData(entityKey, opts)) : void 0, res;\n\t    };\n\t  }(undefined), callback);\n\t};\n\t\n\texports['default'] = findEntities;\n\tmodule.exports = exports['default'];\n\n/***/ },\n\n/***/ 229:\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(global) {\"use strict\";\n\t\n\tmodule.exports = global[\"Dante\"] = __webpack_require__(242);\n\t/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }())))\n\n/***/ },\n\n/***/ 230:\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(global) {\"use strict\";\n\t\n\tmodule.exports = global[\"DanteEditor\"] = __webpack_require__(243);\n\t/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }())))\n\n/***/ },\n\n/***/ 231:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\t\n\tvar _classCallCheck2 = __webpack_require__(14);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tvar _possibleConstructorReturn2 = __webpack_require__(18);\n\t\n\tvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\t\n\tvar _inherits2 = __webpack_require__(17);\n\t\n\tvar _inherits3 = _interopRequireDefault(_inherits2);\n\t\n\tvar _react = __webpack_require__(5);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _reactDom = __webpack_require__(9);\n\t\n\tvar _reactDom2 = _interopRequireDefault(_reactDom);\n\t\n\tvar _draftJs = __webpack_require__(10);\n\t\n\tvar _axios = __webpack_require__(61);\n\t\n\tvar _axios2 = _interopRequireDefault(_axios);\n\t\n\tvar _index = __webpack_require__(24);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar EmbedBlock = function (_React$Component) {\n\t  (0, _inherits3['default'])(EmbedBlock, _React$Component);\n\t\n\t  function EmbedBlock(props) {\n\t    (0, _classCallCheck3['default'])(this, EmbedBlock);\n\t\n\t    //api_key = \"86c28a410a104c8bb58848733c82f840\"\n\t\n\t    var _this = (0, _possibleConstructorReturn3['default'])(this, _React$Component.call(this, props));\n\t\n\t    _this.updateData = _this.updateData.bind(_this);\n\t    _this.dataForUpdate = _this.dataForUpdate.bind(_this);\n\t    _this.componentDidMount = _this.componentDidMount.bind(_this);\n\t    _this.state = {\n\t      embed_data: _this.defaultData(),\n\t      error: \"\"\n\t    };\n\t    return _this;\n\t  }\n\t\n\t  EmbedBlock.prototype.defaultData = function defaultData() {\n\t    var existing_data = this.props.block.getData().toJS();\n\t    return existing_data.embed_data || {};\n\t  };\n\t\n\t  // will update block state\n\t\n\t\n\t  EmbedBlock.prototype.updateData = function updateData() {\n\t    var _props = this.props,\n\t        block = _props.block,\n\t        blockProps = _props.blockProps;\n\t    var _props$blockProps = this.props.blockProps,\n\t        getEditorState = _props$blockProps.getEditorState,\n\t        setEditorState = _props$blockProps.setEditorState;\n\t\n\t    var data = block.getData();\n\t    var newData = data.merge(this.state);\n\t    return setEditorState((0, _index.updateDataOfBlock)(getEditorState(), block, newData));\n\t  };\n\t\n\t  EmbedBlock.prototype.dataForUpdate = function dataForUpdate() {\n\t\n\t    return this.props.blockProps.data.toJS();\n\t  };\n\t\n\t  EmbedBlock.prototype.componentDidMount = function componentDidMount() {\n\t    var _this2 = this;\n\t\n\t    if (!this.props.blockProps.data) {\n\t      return;\n\t    }\n\t\n\t    // ensure data isnt already loaded\n\t    // unless @dataForUpdate().endpoint or @dataForUpdate().provisory_text\n\t\n\t    if (!this.dataForUpdate().endpoint && !this.dataForUpdate().provisory_text) {\n\t      //debugger\n\t      return;\n\t    }\n\t\n\t    return (0, _axios2['default'])({\n\t      method: 'get',\n\t      url: '' + this.dataForUpdate().endpoint + this.dataForUpdate().provisory_text + '&scheme=https'\n\t    }).then(function (result) {\n\t\n\t      return _this2.setState({ embed_data: result.data } //JSON.parse(data.responseText)\n\t      , _this2.updateData);\n\t    })['catch'](function (error) {\n\t\n\t      _this2.setState({\n\t        error: error.response.data.error_message });\n\t      return console.log(\"TODO: error\");\n\t    });\n\t  };\n\t\n\t  EmbedBlock.prototype.classForImage = function classForImage() {\n\t    if (this.state.embed_data.images) {\n\t      return \"\";\n\t    } else {\n\t      return \"mixtapeImage--empty u-ignoreBlock\";\n\t    }\n\t  };\n\t  //if @state.embed_data.thumbnail_url then \"\" else \"mixtapeImage--empty u-ignoreBlock\"\n\t\n\t  EmbedBlock.prototype.picture = function picture() {\n\t    if (this.state.embed_data.images && this.state.embed_data.images.length > 0) {\n\t      return this.state.embed_data.images[0].url;\n\t    } else {\n\t      return \"\";\n\t    }\n\t  };\n\t\n\t  EmbedBlock.prototype.render = function render() {\n\t    //block = @.props\n\t    //foo = @.props.blockProps\n\t    //data = Entity.get(block.block.getEntityAt(0)).getData()\n\t    console.log(\"ERROR\", this.state.error);\n\t    return _react2['default'].createElement(\n\t      'span',\n\t      null,\n\t      this.picture() ? _react2['default'].createElement('a', {\n\t        target: '_blank',\n\t        className: 'js-mixtapeImage mixtapeImage ' + this.classForImage(),\n\t        href: this.state.embed_data.url,\n\t        style: { backgroundImage: 'url(\\'' + this.picture() + '\\')' }\n\t      }) : undefined,\n\t      this.state.error ? _react2['default'].createElement(\n\t        'h2',\n\t        null,\n\t        this.state.error\n\t      ) : undefined,\n\t      _react2['default'].createElement(\n\t        'a',\n\t        {\n\t          className: 'markup--anchor markup--mixtapeEmbed-anchor',\n\t          target: '_blank',\n\t          href: this.state.embed_data.url\n\t        },\n\t        _react2['default'].createElement(\n\t          'strong',\n\t          { className: 'markup--strong markup--mixtapeEmbed-strong' },\n\t          this.state.embed_data.title\n\t        ),\n\t        _react2['default'].createElement(\n\t          'em',\n\t          { className: 'markup--em markup--mixtapeEmbed-em' },\n\t          this.state.embed_data.description\n\t        )\n\t      ),\n\t      this.state.embed_data.provider_url\n\t    );\n\t  };\n\t\n\t  return EmbedBlock;\n\t}(_react2['default'].Component);\n\t\n\texports['default'] = EmbedBlock;\n\tmodule.exports = exports['default'];\n\n/***/ },\n\n/***/ 232:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\t\n\tvar _assign = __webpack_require__(81);\n\t\n\tvar _assign2 = _interopRequireDefault(_assign);\n\t\n\tvar _classCallCheck2 = __webpack_require__(14);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tvar _possibleConstructorReturn2 = __webpack_require__(18);\n\t\n\tvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\t\n\tvar _inherits2 = __webpack_require__(17);\n\t\n\tvar _inherits3 = _interopRequireDefault(_inherits2);\n\t\n\tvar _react = __webpack_require__(5);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _reactDom = __webpack_require__(9);\n\t\n\tvar _reactDom2 = _interopRequireDefault(_reactDom);\n\t\n\tvar _draftJs = __webpack_require__(10);\n\t\n\tvar _axios = __webpack_require__(61);\n\t\n\tvar _axios2 = _interopRequireDefault(_axios);\n\t\n\tvar _index = __webpack_require__(24);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar ImageBlock = function (_React$Component) {\n\t  (0, _inherits3['default'])(ImageBlock, _React$Component);\n\t\n\t  function ImageBlock(props) {\n\t    (0, _classCallCheck3['default'])(this, ImageBlock);\n\t\n\t    var _this = (0, _possibleConstructorReturn3['default'])(this, _React$Component.call(this, props));\n\t\n\t    _this.blockPropsSrc = _this.blockPropsSrc.bind(_this);\n\t    _this.defaultUrl = _this.defaultUrl.bind(_this);\n\t    _this.defaultAspectRatio = _this.defaultAspectRatio.bind(_this);\n\t    _this.updateData = _this.updateData.bind(_this);\n\t    _this.replaceImg = _this.replaceImg.bind(_this);\n\t    _this.startLoader = _this.startLoader.bind(_this);\n\t    _this.stopLoader = _this.stopLoader.bind(_this);\n\t    _this.handleUpload = _this.handleUpload.bind(_this);\n\t    _this.aspectRatio = _this.aspectRatio.bind(_this);\n\t    _this.updateDataSelection = _this.updateDataSelection.bind(_this);\n\t    _this.handleGrafFigureSelectImg = _this.handleGrafFigureSelectImg.bind(_this);\n\t    _this.getUploadUrl = _this.getUploadUrl.bind(_this);\n\t    _this.uploadFile = _this.uploadFile.bind(_this);\n\t    _this.uploadCompleted = _this.uploadCompleted.bind(_this);\n\t    _this.updateProgressBar = _this.updateProgressBar.bind(_this);\n\t    _this.placeHolderEnabled = _this.placeHolderEnabled.bind(_this);\n\t    _this.placeholderText = _this.placeholderText.bind(_this);\n\t    _this.handleFocus = _this.handleFocus.bind(_this);\n\t    _this.render = _this.render.bind(_this);\n\t    var existing_data = _this.props.block.getData().toJS();\n\t\n\t    _this.config = _this.props.blockProps.config;\n\t    _this.file = _this.props.blockProps.data.get('file');\n\t    _this.state = {\n\t      loading: false,\n\t      selected: false,\n\t      loading_progress: 0,\n\t      enabled: false,\n\t      caption: _this.defaultPlaceholder(),\n\t      direction: existing_data.direction || \"center\",\n\t      width: 0,\n\t      height: 0,\n\t      file: null,\n\t      url: _this.blockPropsSrc() || _this.defaultUrl(existing_data),\n\t      aspect_ratio: _this.defaultAspectRatio(existing_data)\n\t    };\n\t    return _this;\n\t  }\n\t\n\t  ImageBlock.prototype.blockPropsSrc = function blockPropsSrc() {\n\t    // console.log @.props.blockProps.data.src\n\t    return this.props.blockProps.data.src;\n\t  };\n\t  /*\n\t  debugger\n\t  block = @.props\n\t  entity = block.block.getEntityAt(0)\n\t  if entity\n\t    data = Entity.get(entity).getData().src\n\t  else\n\t    null\n\t  */\n\t\n\t  ImageBlock.prototype.defaultUrl = function defaultUrl(data) {\n\t    if (data.url) {\n\t      return data.url;\n\t    }\n\t\n\t    if (data.url) {\n\t      if (data.file) {\n\t        return URL.createObjectURL(data.file);\n\t      } else {\n\t        return data.url;\n\t      }\n\t    } else {\n\t      return this.props.blockProps.data.src;\n\t    }\n\t  };\n\t\n\t  ImageBlock.prototype.defaultPlaceholder = function defaultPlaceholder() {\n\t    return this.props.blockProps.config.image_caption_placeholder;\n\t  };\n\t\n\t  ImageBlock.prototype.defaultAspectRatio = function defaultAspectRatio(data) {\n\t    if (data.aspect_ratio) {\n\t      return {\n\t        width: data.aspect_ratio['width'],\n\t        height: data.aspect_ratio['height'],\n\t        ratio: data.aspect_ratio['ratio']\n\t      };\n\t    } else {\n\t      return {\n\t        width: 0,\n\t        height: 0,\n\t        ratio: 100\n\t      };\n\t    }\n\t  };\n\t\n\t  ImageBlock.prototype.getAspectRatio = function getAspectRatio(w, h) {\n\t    var maxWidth = 1000;\n\t    var maxHeight = 1000;\n\t    var ratio = 0;\n\t    var width = w; // Current image width\n\t    var height = h; // Current image height\n\t\n\t    // Check if the current width is larger than the max\n\t    if (width > maxWidth) {\n\t      ratio = maxWidth / width; // get ratio for scaling image\n\t      height = height * ratio; // Reset height to match scaled image\n\t      width = width * ratio; // Reset width to match scaled image\n\t\n\t      // Check if current height is larger than max\n\t    } else if (height > maxHeight) {\n\t      ratio = maxHeight / height; // get ratio for scaling image\n\t      width = width * ratio; // Reset width to match scaled image\n\t      height = height * ratio; // Reset height to match scaled image\n\t    }\n\t\n\t    var fill_ratio = height / width * 100;\n\t    var result = { width: width, height: height, ratio: fill_ratio };\n\t    // console.log result\n\t    return result;\n\t  };\n\t\n\t  // will update block state\n\t\n\t\n\t  ImageBlock.prototype.updateData = function updateData() {\n\t    var blockProps = this.props.blockProps;\n\t    var block = this.props.block;\n\t    var getEditorState = this.props.blockProps.getEditorState;\n\t    var setEditorState = this.props.blockProps.setEditorState;\n\t\n\t    var data = block.getData();\n\t    var newData = data.merge(this.state).merge({ forceUpload: false });\n\t    return setEditorState((0, _index.updateDataOfBlock)(getEditorState(), block, newData));\n\t  };\n\t\n\t  ImageBlock.prototype.replaceImg = function replaceImg() {\n\t    var _this2 = this;\n\t\n\t    this.img = new Image();\n\t    this.img.src = this.refs.image_tag.src;\n\t    this.setState({\n\t      url: this.img.src });\n\t    var self = this;\n\t    // exit only when not blob and not forceUload\n\t    if (!this.img.src.includes(\"blob:\") && !this.props.block.data.get(\"forceUpload\")) {\n\t      return;\n\t    }\n\t    return this.img.onload = function () {\n\t      _this2.setState({\n\t        width: _this2.img.width,\n\t        height: _this2.img.height,\n\t        aspect_ratio: self.getAspectRatio(_this2.img.width, _this2.img.height)\n\t      });\n\t\n\t      return _this2.handleUpload();\n\t    };\n\t  };\n\t\n\t  ImageBlock.prototype.startLoader = function startLoader() {\n\t    return this.setState({\n\t      loading: true });\n\t  };\n\t\n\t  ImageBlock.prototype.stopLoader = function stopLoader() {\n\t    return this.setState({\n\t      loading: false });\n\t  };\n\t\n\t  ImageBlock.prototype.handleUpload = function handleUpload() {\n\t    this.startLoader();\n\t    this.props.blockProps.addLock();\n\t    this.updateData();\n\t    return this.uploadFile();\n\t  };\n\t\n\t  ImageBlock.prototype.componentDidMount = function componentDidMount() {\n\t    return this.replaceImg();\n\t  };\n\t\n\t  ImageBlock.prototype.aspectRatio = function aspectRatio() {\n\t    return {\n\t      maxWidth: '' + this.state.aspect_ratio.width,\n\t      maxHeight: '' + this.state.aspect_ratio.height,\n\t      ratio: '' + this.state.aspect_ratio.height\n\t    };\n\t  };\n\t\n\t  ImageBlock.prototype.updateDataSelection = function updateDataSelection() {\n\t    var _props$blockProps = this.props.blockProps,\n\t        getEditorState = _props$blockProps.getEditorState,\n\t        setEditorState = _props$blockProps.setEditorState;\n\t\n\t    var newselection = getEditorState().getSelection().merge({\n\t      anchorKey: this.props.block.getKey(),\n\t      focusKey: this.props.block.getKey()\n\t    });\n\t\n\t    return setEditorState(_draftJs.EditorState.forceSelection(getEditorState(), newselection));\n\t  };\n\t\n\t  ImageBlock.prototype.handleGrafFigureSelectImg = function handleGrafFigureSelectImg(e) {\n\t    e.preventDefault();\n\t    return this.setState({ selected: true }, this.updateDataSelection);\n\t  };\n\t\n\t  //main_editor.onChange(main_editor.state.editorState)\n\t\n\t  ImageBlock.prototype.coords = function coords() {\n\t    return {\n\t      maxWidth: this.state.aspect_ratio.width + 'px',\n\t      maxHeight: this.state.aspect_ratio.height + 'px'\n\t    };\n\t  };\n\t\n\t  ImageBlock.prototype.getBase64Image = function getBase64Image(img) {\n\t    var canvas = document.createElement(\"canvas\");\n\t    canvas.width = img.width;\n\t    canvas.height = img.height;\n\t    var ctx = canvas.getContext(\"2d\");\n\t    ctx.drawImage(img, 0, 0);\n\t    var dataURL = canvas.toDataURL(\"image/png\");\n\t\n\t    return dataURL;\n\t  };\n\t\n\t  ImageBlock.prototype.formatData = function formatData() {\n\t    var formData = new FormData();\n\t    if (this.file) {\n\t      var formName = this.config.upload_formName || 'file';\n\t\n\t      formData.append(formName, this.file);\n\t      return formData;\n\t    } else {\n\t      formData.append('url', this.props.blockProps.data.get(\"url\"));\n\t      return formData;\n\t    }\n\t  };\n\t\n\t  ImageBlock.prototype.getUploadUrl = function getUploadUrl() {\n\t    var url = this.config.upload_url;\n\t    if (typeof url === \"function\") {\n\t      return url();\n\t    } else {\n\t      return url;\n\t    }\n\t  };\n\t\n\t  ImageBlock.prototype.getUploadHeaders = function getUploadHeaders() {\n\t    return this.config.upload_headers || {};\n\t  };\n\t\n\t  ImageBlock.prototype.uploadFile = function uploadFile() {\n\t    var _this3 = this;\n\t\n\t    var handleUp = void 0;\n\t    (0, _axios2['default'])({\n\t      method: 'post',\n\t      url: this.getUploadUrl(),\n\t      headers: this.getUploadHeaders(),\n\t      data: this.formatData(),\n\t      onUploadProgress: function onUploadProgress(e) {\n\t        return _this3.updateProgressBar(e);\n\t      }\n\t    }).then(function (result) {\n\t      _this3.uploadCompleted(result.data);\n\t      _this3.props.blockProps.removeLock();\n\t      _this3.stopLoader();\n\t      _this3.file = null;\n\t\n\t      if (_this3.config.upload_callback) {\n\t        return _this3.config.upload_callback(result, _this3);\n\t      }\n\t    })['catch'](function (error) {\n\t      _this3.props.blockProps.removeLock();\n\t      _this3.stopLoader();\n\t\n\t      console.log('ERROR: got error uploading file ' + error);\n\t      if (_this3.config.upload_error_callback) {\n\t        return _this3.config.upload_error_callback(error, _this3);\n\t      }\n\t    });\n\t\n\t    return handleUp = function handleUp(json_response) {\n\t      return _this3.uploadCompleted(json_response, n);\n\t    };\n\t  };\n\t\n\t  ImageBlock.prototype.uploadCompleted = function uploadCompleted(json) {\n\t    return this.setState({ url: json.url }, this.updateData);\n\t  };\n\t\n\t  ImageBlock.prototype.updateProgressBar = function updateProgressBar(e) {\n\t    var complete = this.state.loading_progress;\n\t    if (e.lengthComputable) {\n\t      complete = e.loaded / e.total * 100;\n\t      complete = complete != null ? complete : { complete: 0 };\n\t      this.setState({\n\t        loading_progress: complete });\n\t      return console.log('complete: ' + complete);\n\t    }\n\t  };\n\t\n\t  ImageBlock.prototype.placeHolderEnabled = function placeHolderEnabled() {\n\t    return this.state.enabled || this.props.block.getText();\n\t  };\n\t\n\t  ImageBlock.prototype.placeholderText = function placeholderText() {\n\t    if (this.placeHolderEnabled()) {\n\t      return \"\";\n\t    }\n\t    return \"Write caption for image (optional)\";\n\t  };\n\t\n\t  ImageBlock.prototype.handleFocus = function handleFocus(e) {\n\t    var _this4 = this;\n\t\n\t    // console.log \"focus on placeholder\"\n\t    return setTimeout(function () {\n\t      return _this4.setState({\n\t        enabled: true });\n\t    }, 0);\n\t  };\n\t\n\t  ImageBlock.prototype.render = function render() {\n\t\n\t    return _react2['default'].createElement(\n\t      'div',\n\t      { ref: 'image_tag2', suppressContentEditableWarning: true },\n\t      _react2['default'].createElement(\n\t        'div',\n\t        { className: 'aspectRatioPlaceholder is-locked',\n\t          style: this.coords(),\n\t          onClick: this.handleGrafFigureSelectImg },\n\t        _react2['default'].createElement('div', { style: { paddingBottom: this.state.aspect_ratio.ratio + '%' },\n\t          className: 'aspect-ratio-fill' }),\n\t        _react2['default'].createElement('img', { src: this.state.url,\n\t          ref: 'image_tag',\n\t          height: this.state.aspect_ratio.height,\n\t          width: this.state.aspect_ratio.width,\n\t          className: 'graf-image' }),\n\t        _react2['default'].createElement(Loader, { toggle: this.state.loading,\n\t          progress: this.state.loading_progress })\n\t      ),\n\t      _react2['default'].createElement(\n\t        'figcaption',\n\t        { className: 'imageCaption', onMouseDown: this.handleFocus },\n\t        !this.state.enabled ? _react2['default'].createElement(\n\t          'span',\n\t          { className: 'danteDefaultPlaceholder' },\n\t          this.placeholderText()\n\t        ) : undefined,\n\t        _react2['default'].createElement(_draftJs.EditorBlock, (0, _assign2['default'])({}, this.props, {\n\t          \"editable\": true, \"className\": \"imageCaption\" }))\n\t      )\n\t    );\n\t  };\n\t\n\t  return ImageBlock;\n\t}(_react2['default'].Component);\n\t\n\texports['default'] = ImageBlock;\n\t\n\tvar Loader = function (_React$Component2) {\n\t  (0, _inherits3['default'])(Loader, _React$Component2);\n\t\n\t  function Loader() {\n\t    (0, _classCallCheck3['default'])(this, Loader);\n\t    return (0, _possibleConstructorReturn3['default'])(this, _React$Component2.apply(this, arguments));\n\t  }\n\t\n\t  Loader.prototype.render = function render() {\n\t    return _react2['default'].createElement(\n\t      'div',\n\t      null,\n\t      this.props.toggle ? _react2['default'].createElement(\n\t        'div',\n\t        { className: 'image-upoader-loader' },\n\t        _react2['default'].createElement(\n\t          'p',\n\t          null,\n\t          this.props.progress === 100 ? \"processing image...\" : _react2['default'].createElement(\n\t            'span',\n\t            null,\n\t            _react2['default'].createElement(\n\t              'span',\n\t              null,\n\t              'loading'\n\t            ),\n\t            ' ',\n\t            Math.round(this.props.progress)\n\t          )\n\t        )\n\t      ) : undefined\n\t    );\n\t  };\n\t\n\t  return Loader;\n\t}(_react2['default'].Component);\n\t\n\tmodule.exports = exports['default'];\n\n/***/ },\n\n/***/ 233:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\t\n\tvar _assign = __webpack_require__(81);\n\t\n\tvar _assign2 = _interopRequireDefault(_assign);\n\t\n\tvar _classCallCheck2 = __webpack_require__(14);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tvar _possibleConstructorReturn2 = __webpack_require__(18);\n\t\n\tvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\t\n\tvar _inherits2 = __webpack_require__(17);\n\t\n\tvar _inherits3 = _interopRequireDefault(_inherits2);\n\t\n\tvar _react = __webpack_require__(5);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _reactDom = __webpack_require__(9);\n\t\n\tvar _reactDom2 = _interopRequireDefault(_reactDom);\n\t\n\tvar _draftJs = __webpack_require__(10);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar PlaceholderBlock = function (_React$Component) {\n\t  (0, _inherits3['default'])(PlaceholderBlock, _React$Component);\n\t\n\t  function PlaceholderBlock(props) {\n\t    (0, _classCallCheck3['default'])(this, PlaceholderBlock);\n\t\n\t    var _this = (0, _possibleConstructorReturn3['default'])(this, _React$Component.call(this, props));\n\t\n\t    _this.placeholderText = _this.placeholderText.bind(_this);\n\t    _this.placeholderFromProps = _this.placeholderFromProps.bind(_this);\n\t    _this.defaultText = _this.defaultText.bind(_this);\n\t    _this.handleFocus = _this.handleFocus.bind(_this);\n\t    _this.classForDefault = _this.classForDefault.bind(_this);\n\t    _this.state = {\n\t      enabled: false,\n\t      data: _this.props.blockProps.data.toJS()\n\t    };\n\t    return _this;\n\t  }\n\t\n\t  PlaceholderBlock.prototype.placeholderText = function placeholderText() {\n\t    if (this.state.enabled) {\n\t      return \"\";\n\t    }\n\t    return this.props.blockProps.data.toJS().placeholder || this.placeholderFromProps() || this.defaultText();\n\t  };\n\t  //if @.props.blockProps.data then @.props.blockProps.data.placeholder else @defaultText()\n\t\n\t\n\t  PlaceholderBlock.prototype.placeholderFromProps = function placeholderFromProps() {\n\t    return this.props.block.toJS().placeholder;\n\t  };\n\t\n\t  PlaceholderBlock.prototype.defaultText = function defaultText() {\n\t    return \"write something \";\n\t  };\n\t\n\t  PlaceholderBlock.prototype.componentDidMount = function componentDidMount() {};\n\t\n\t  PlaceholderBlock.prototype.handleFocus = function handleFocus(e) {\n\t    var _this2 = this;\n\t\n\t    // console.log \"focus on placeholder\"\n\t    return setTimeout(function () {\n\t      return _this2.setState({\n\t        enabled: true });\n\t    }, 0);\n\t  };\n\t\n\t  PlaceholderBlock.prototype.classForDefault = function classForDefault() {\n\t    if (!this.state.enabled) {\n\t      return \"defaultValue defaultValue--root\";\n\t    } else {\n\t      return \"\";\n\t    }\n\t  };\n\t\n\t  PlaceholderBlock.prototype.render = function render() {\n\t    return _react2['default'].createElement(\n\t      'span',\n\t      { className: this.classForDefault(), onMouseDown: this.handleFocus },\n\t      this.placeholderText(),\n\t      _react2['default'].createElement(_draftJs.EditorBlock, (0, _assign2['default'])({}, this.props, {\n\t        \"className\": \"imageCaption\",\n\t        \"placeholder\": \"escrive alalal\"\n\t      }))\n\t    );\n\t  };\n\t\n\t  return PlaceholderBlock;\n\t}(_react2['default'].Component);\n\t\n\texports['default'] = PlaceholderBlock;\n\tmodule.exports = exports['default'];\n\n/***/ },\n\n/***/ 234:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\t\n\tvar _assign = __webpack_require__(81);\n\t\n\tvar _assign2 = _interopRequireDefault(_assign);\n\t\n\tvar _classCallCheck2 = __webpack_require__(14);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tvar _possibleConstructorReturn2 = __webpack_require__(18);\n\t\n\tvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\t\n\tvar _inherits2 = __webpack_require__(17);\n\t\n\tvar _inherits3 = _interopRequireDefault(_inherits2);\n\t\n\tvar _react = __webpack_require__(5);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _reactDom = __webpack_require__(9);\n\t\n\tvar _reactDom2 = _interopRequireDefault(_reactDom);\n\t\n\tvar _draftJs = __webpack_require__(10);\n\t\n\tvar _index = __webpack_require__(24);\n\t\n\tvar _axios = __webpack_require__(61);\n\t\n\tvar _axios2 = _interopRequireDefault(_axios);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar VideoBlock = function (_React$Component) {\n\t  (0, _inherits3['default'])(VideoBlock, _React$Component);\n\t\n\t  function VideoBlock(props) {\n\t    (0, _classCallCheck3['default'])(this, VideoBlock);\n\t\n\t    //api_key = \"86c28a410a104c8bb58848733c82f840\"\n\t\n\t    var _this = (0, _possibleConstructorReturn3['default'])(this, _React$Component.call(this, props));\n\t\n\t    _this.updateData = _this.updateData.bind(_this);\n\t    _this.dataForUpdate = _this.dataForUpdate.bind(_this);\n\t    _this.state = { embed_data: _this.defaultData() };\n\t    return _this;\n\t  }\n\t\n\t  VideoBlock.prototype.defaultData = function defaultData() {\n\t    var existing_data = this.props.block.getData().toJS();\n\t    return existing_data.embed_data || {};\n\t  };\n\t\n\t  // will update block state\n\t\n\t\n\t  VideoBlock.prototype.updateData = function updateData() {\n\t    var _props = this.props,\n\t        block = _props.block,\n\t        blockProps = _props.blockProps;\n\t    var _props$blockProps = this.props.blockProps,\n\t        getEditorState = _props$blockProps.getEditorState,\n\t        setEditorState = _props$blockProps.setEditorState;\n\t\n\t    var data = block.getData();\n\t    var newData = data.merge(this.state);\n\t    return setEditorState((0, _index.updateDataOfBlock)(getEditorState(), block, newData));\n\t  };\n\t\n\t  VideoBlock.prototype.dataForUpdate = function dataForUpdate() {\n\t    return this.props.blockProps.data.toJS();\n\t  };\n\t\n\t  VideoBlock.prototype.componentDidMount = function componentDidMount() {\n\t    var _this2 = this;\n\t\n\t    if (!this.props.blockProps.data) {\n\t      return;\n\t    }\n\t    // ensure data isnt already loaded\n\t    if (!this.dataForUpdate().endpoint && !this.dataForUpdate().provisory_text) {\n\t      return;\n\t    }\n\t\n\t    return (0, _axios2['default'])({\n\t      method: 'get',\n\t      url: '' + this.dataForUpdate().endpoint + this.dataForUpdate().provisory_text + '&scheme=https'\n\t    }).then(function (result) {\n\t      return _this2.setState({ embed_data: result.data } //JSON.parse(data.responseText)\n\t      , _this2.updateData);\n\t    })['catch'](function (error) {\n\t      return console.log(\"TODO: error\");\n\t    });\n\t  };\n\t\n\t  VideoBlock.prototype.classForImage = function classForImage() {\n\t    if (this.state.embed_data.thumbnail_url) {\n\t      return \"\";\n\t    } else {\n\t      return \"mixtapeImage--empty u-ignoreBlock\";\n\t    }\n\t  };\n\t\n\t  VideoBlock.prototype.render = function render() {\n\t    return _react2['default'].createElement(\n\t      'figure',\n\t      { className: 'graf--figure graf--iframe graf--first', tabIndex: '0' },\n\t      _react2['default'].createElement('div', { className: 'iframeContainer',\n\t        dangerouslySetInnerHTML: { __html: this.state.embed_data.html } }),\n\t      _react2['default'].createElement(\n\t        'figcaption',\n\t        { className: 'imageCaption' },\n\t        _react2['default'].createElement(_draftJs.EditorBlock, (0, _assign2['default'])({}, this.props, { \"className\": \"imageCaption\" }))\n\t      )\n\t    );\n\t  };\n\t\n\t  return VideoBlock;\n\t}(_react2['default'].Component);\n\t\n\texports['default'] = VideoBlock;\n\tmodule.exports = exports['default'];\n\n/***/ },\n\n/***/ 235:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\texports.__esModule = true;\n\t\n\tvar _stringify = __webpack_require__(80);\n\t\n\tvar _stringify2 = _interopRequireDefault(_stringify);\n\t\n\tvar _classCallCheck2 = __webpack_require__(14);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tvar _possibleConstructorReturn2 = __webpack_require__(18);\n\t\n\tvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\t\n\tvar _inherits2 = __webpack_require__(17);\n\t\n\tvar _inherits3 = _interopRequireDefault(_inherits2);\n\t\n\tvar _react = __webpack_require__(5);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\t\n\tvar Debug = function (_React$Component) {\n\t  (0, _inherits3[\"default\"])(Debug, _React$Component);\n\t\n\t  function Debug() {\n\t    (0, _classCallCheck3[\"default\"])(this, Debug);\n\t\n\t    var _this = (0, _possibleConstructorReturn3[\"default\"])(this, _React$Component.call(this));\n\t\n\t    _this.handleToggleReadOnly = _this.handleToggleReadOnly.bind(_this);\n\t    _this.handleTestEmitAndDecode = _this.handleTestEmitAndDecode.bind(_this);\n\t    _this.handleTestEmitTEXT = _this.handleTestEmitTEXT.bind(_this);\n\t    _this.testEmitAndDecode = _this.testEmitAndDecode.bind(_this);\n\t    _this.testEmitTEXT = _this.testEmitTEXT.bind(_this);\n\t    _this.logState = _this.logState.bind(_this);\n\t    _this.toggleDisplay = _this.toggleDisplay.bind(_this);\n\t    _this.open = _this.open.bind(_this);\n\t    _this.render = _this.render.bind(_this);\n\t    _this.state = {\n\t      output: \"\",\n\t      display: \"none\"\n\t    };\n\t    return _this;\n\t  }\n\t\n\t  Debug.prototype.handleToggleReadOnly = function handleToggleReadOnly(e) {\n\t    e.preventDefault();\n\t    this.props.editor.toggleEditable();\n\t    return false;\n\t  };\n\t\n\t  Debug.prototype.handleTestEmitAndDecode = function handleTestEmitAndDecode(e) {\n\t    e.preventDefault();\n\t    return this.testEmitAndDecode();\n\t  };\n\t\n\t  Debug.prototype.handleTestEmitTEXT = function handleTestEmitTEXT(e) {\n\t    e.preventDefault();\n\t    return this.testEmitTEXT();\n\t  };\n\t\n\t  Debug.prototype.testEmitAndDecode = function testEmitAndDecode(e) {\n\t    var raw_as_json = this.props.editor.emitSerializedOutput();\n\t    this.props.editor.setState({\n\t      editorState: this.props.editor.decodeEditorContent(raw_as_json) }, this.logState((0, _stringify2[\"default\"])(raw_as_json)));\n\t    return false;\n\t  };\n\t\n\t  Debug.prototype.testEmitTEXT = function testEmitTEXT() {\n\t    var text = this.props.editor.getTextFromEditor();\n\t    return this.logState(text);\n\t  };\n\t\n\t  Debug.prototype.logState = function logState(raw) {\n\t    return this.setState({ output: raw }, this.open);\n\t  };\n\t\n\t  Debug.prototype.toggleDisplay = function toggleDisplay(e) {\n\t    e.preventDefault();\n\t    var d = this.state.display === \"block\" ? \"none\" : this.state.display;\n\t    return this.setState({\n\t      display: d });\n\t  };\n\t\n\t  Debug.prototype.open = function open() {\n\t    return this.setState({\n\t      display: \"block\" });\n\t  };\n\t\n\t  Debug.prototype.render = function render() {\n\t    return _react2[\"default\"].createElement(\n\t      \"div\",\n\t      null,\n\t      _react2[\"default\"].createElement(\n\t        \"div\",\n\t        { className: \"debugControls\" },\n\t        _react2[\"default\"].createElement(\n\t          \"ul\",\n\t          null,\n\t          _react2[\"default\"].createElement(\n\t            \"li\",\n\t            null,\n\t            \" LOCKS: \",\n\t            this.props.editor.state.locks,\n\t            \" \"\n\t          ),\n\t          _react2[\"default\"].createElement(\n\t            \"li\",\n\t            null,\n\t            _react2[\"default\"].createElement(\n\t              \"a\",\n\t              { href: \"#\", onClick: this.handleToggleReadOnly },\n\t              \"EDITABLE: \",\n\t              this.props.editor.state.read_only ? 'NO' : 'YES'\n\t            )\n\t          ),\n\t          _react2[\"default\"].createElement(\n\t            \"li\",\n\t            null,\n\t            _react2[\"default\"].createElement(\n\t              \"a\",\n\t              { href: \"#\", onClick: this.handleTestEmitTEXT },\n\t              \"EDITOR TEXT\"\n\t            )\n\t          ),\n\t          _react2[\"default\"].createElement(\n\t            \"li\",\n\t            null,\n\t            _react2[\"default\"].createElement(\n\t              \"a\",\n\t              { href: \"#\", onClick: this.handleTestEmitAndDecode },\n\t              \"EDITOR STATE\"\n\t            )\n\t          )\n\t        )\n\t      ),\n\t      _react2[\"default\"].createElement(\n\t        \"div\",\n\t        { className: \"debugZone\", style: { display: this.state.display } },\n\t        _react2[\"default\"].createElement(\"a\", { href: \"#\", className: \"dante-debug-close close\", onClick: this.toggleDisplay }),\n\t        _react2[\"default\"].createElement(\n\t          \"div\",\n\t          { className: \"debugOutput\" },\n\t          _react2[\"default\"].createElement(\n\t            \"h2\",\n\t            null,\n\t            \"EDITOR OUTPUT\"\n\t          ),\n\t          this.state.output.length > 0 ? _react2[\"default\"].createElement(\n\t            \"pre\",\n\t            null,\n\t            this.state.output\n\t          ) : undefined\n\t        )\n\t      )\n\t    );\n\t  };\n\t\n\t  return Debug;\n\t}(_react2[\"default\"].Component);\n\t\n\texports[\"default\"] = Debug;\n\tmodule.exports = exports[\"default\"];\n\n/***/ },\n\n/***/ 236:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\t\n\tvar _classCallCheck2 = __webpack_require__(14);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tvar _possibleConstructorReturn2 = __webpack_require__(18);\n\t\n\tvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\t\n\tvar _inherits2 = __webpack_require__(17);\n\t\n\tvar _inherits3 = _interopRequireDefault(_inherits2);\n\t\n\tvar _react = __webpack_require__(5);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _reactDom = __webpack_require__(9);\n\t\n\tvar _reactDom2 = _interopRequireDefault(_reactDom);\n\t\n\tvar _draftJs = __webpack_require__(10);\n\t\n\tvar _index = __webpack_require__(24);\n\t\n\tvar _selection = __webpack_require__(62);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar DanteInlineTooltip = function (_React$Component) {\n\t  (0, _inherits3['default'])(DanteInlineTooltip, _React$Component);\n\t\n\t  function DanteInlineTooltip(props) {\n\t    (0, _classCallCheck3['default'])(this, DanteInlineTooltip);\n\t\n\t    var _this = (0, _possibleConstructorReturn3['default'])(this, _React$Component.call(this, props));\n\t\n\t    _this.display = _this.display.bind(_this);\n\t    _this.show = _this.show.bind(_this);\n\t    _this.hide = _this.hide.bind(_this);\n\t    _this._toggleScaled = _this._toggleScaled.bind(_this);\n\t    _this.scale = _this.scale.bind(_this);\n\t    _this.collapse = _this.collapse.bind(_this);\n\t    _this.componentWillReceiveProps = _this.componentWillReceiveProps.bind(_this);\n\t    _this.clickOnFileUpload = _this.clickOnFileUpload.bind(_this);\n\t    _this.handlePlaceholder = _this.handlePlaceholder.bind(_this);\n\t    _this.insertImage = _this.insertImage.bind(_this);\n\t    _this.handleFileInput = _this.handleFileInput.bind(_this);\n\t    _this.widgets = _this.widgets.bind(_this);\n\t    _this.clickHandler = _this.clickHandler.bind(_this);\n\t    _this.relocate = _this.relocate.bind(_this);\n\t    _this.state = {\n\t      position: { top: 0, left: 0 },\n\t      show: false,\n\t      scaled: false\n\t    };\n\t    return _this;\n\t  }\n\t\n\t  DanteInlineTooltip.prototype.display = function display(b) {\n\t    if (b) {\n\t      return this.show();\n\t    } else {\n\t      return this.hide();\n\t    }\n\t  };\n\t\n\t  DanteInlineTooltip.prototype.show = function show() {\n\t    return this.setState({\n\t      show: true });\n\t  };\n\t\n\t  DanteInlineTooltip.prototype.hide = function hide() {\n\t    return this.setState({\n\t      show: false });\n\t  };\n\t\n\t  DanteInlineTooltip.prototype.setPosition = function setPosition(coords) {\n\t    return this.setState({\n\t      position: coords });\n\t  };\n\t\n\t  DanteInlineTooltip.prototype._toggleScaled = function _toggleScaled(ev) {\n\t    if (this.state.scaled) {\n\t      return this.collapse();\n\t    } else {\n\t      return this.scale();\n\t    }\n\t  };\n\t\n\t  DanteInlineTooltip.prototype.scale = function scale() {\n\t    return this.setState({\n\t      scaled: true });\n\t  };\n\t\n\t  DanteInlineTooltip.prototype.collapse = function collapse() {\n\t    return this.setState({\n\t      scaled: false });\n\t  };\n\t\n\t  DanteInlineTooltip.prototype.componentWillReceiveProps = function componentWillReceiveProps(newProps) {\n\t    return this.collapse();\n\t  };\n\t\n\t  DanteInlineTooltip.prototype.activeClass = function activeClass() {\n\t    //if @props.show then \"is-active\" else \"\"\n\t    if (this.isActive()) {\n\t      return \"is-active\";\n\t    } else {\n\t      return \"\";\n\t    }\n\t  };\n\t\n\t  DanteInlineTooltip.prototype.isActive = function isActive() {\n\t    return this.state.show;\n\t  };\n\t\n\t  DanteInlineTooltip.prototype.scaledClass = function scaledClass() {\n\t    if (this.state.scaled) {\n\t      return \"is-scaled\";\n\t    } else {\n\t      return \"\";\n\t    }\n\t  };\n\t\n\t  DanteInlineTooltip.prototype.scaledWidth = function scaledWidth() {\n\t    if (this.state.scaled) {\n\t      return \"124\";\n\t    } else {\n\t      return \"0\";\n\t    }\n\t  };\n\t\n\t  DanteInlineTooltip.prototype.clickOnFileUpload = function clickOnFileUpload() {\n\t    this.refs.fileInput.click();\n\t    this.collapse();\n\t    return this.hide();\n\t  };\n\t\n\t  DanteInlineTooltip.prototype.handlePlaceholder = function handlePlaceholder(input) {\n\t    var opts = {\n\t      type: input.widget_options.insert_block,\n\t      placeholder: input.options.placeholder,\n\t      endpoint: input.options.endpoint\n\t    };\n\t\n\t    return this.props.onChange((0, _index.resetBlockWithType)(this.props.editorState, 'placeholder', opts));\n\t  };\n\t\n\t  DanteInlineTooltip.prototype.insertImage = function insertImage(file) {\n\t    var opts = {\n\t      url: URL.createObjectURL(file),\n\t      file: file\n\t    };\n\t\n\t    return this.props.onChange((0, _index.addNewBlock)(this.props.editorState, 'image', opts));\n\t  };\n\t\n\t  DanteInlineTooltip.prototype.handleFileInput = function handleFileInput(e) {\n\t    var fileList = e.target.files;\n\t    // TODO: support multiple file uploads\n\t    /*\n\t    Object.keys(fileList).forEach (o)=>\n\t      @.insertImage(fileList[0])\n\t    */\n\t    return this.insertImage(fileList[0]);\n\t  };\n\t\n\t  DanteInlineTooltip.prototype.widgets = function widgets() {\n\t    return this.props.editor.widgets;\n\t  };\n\t\n\t  DanteInlineTooltip.prototype.clickHandler = function clickHandler(e, type) {\n\t    var request_block = this.widgets().find(function (o) {\n\t      return o.icon === type;\n\t    });\n\t\n\t    switch (request_block.widget_options.insertion) {\n\t      case \"upload\":\n\t        return this.clickOnFileUpload(e, request_block);\n\t      case \"placeholder\":\n\t        return this.handlePlaceholder(request_block);\n\t      default:\n\t        return console.log('WRONG TYPE FOR ' + request_block.widget_options.insertion);\n\t    }\n\t  };\n\t\n\t  DanteInlineTooltip.prototype.getItems = function getItems() {\n\t    return this.widgets().filter(function (o) {\n\t      return o.widget_options.displayOnInlineTooltip;\n\t    });\n\t  };\n\t\n\t  DanteInlineTooltip.prototype.isDescendant = function isDescendant(parent, child) {\n\t    var node = child.parentNode;\n\t    while (node !== null) {\n\t      if (node === parent) {\n\t        return true;\n\t      }\n\t      node = node.parentNode;\n\t    }\n\t    return false;\n\t  };\n\t\n\t  DanteInlineTooltip.prototype.relocate = function relocate() {\n\t    var editorState = this.props.editorState;\n\t\n\t\n\t    if (editorState.getSelection().isCollapsed()) {\n\t\n\t      var currentBlock = (0, _index.getCurrentBlock)(editorState);\n\t      var blockType = currentBlock.getType();\n\t\n\t      var contentState = editorState.getCurrentContent();\n\t      var selectionState = editorState.getSelection();\n\t\n\t      var block = contentState.getBlockForKey(selectionState.anchorKey);\n\t\n\t      var nativeSelection = (0, _selection.getSelection)(window);\n\t      if (!nativeSelection.rangeCount) {\n\t        return;\n\t      }\n\t\n\t      var node = (0, _index.getNode)();\n\t\n\t      var selectionBoundary = (0, _selection.getSelectionRect)(nativeSelection);\n\t      var coords = selectionBoundary; //utils.getSelectionDimensions(node)\n\t\n\t      var parent = _reactDom2['default'].findDOMNode(this.props.editor);\n\t      var parentBoundary = parent.getBoundingClientRect();\n\t\n\t      // hide if selected node is not in editor\n\t      // debugger\n\t      //console.log @isDescendant(parent, nativeSelection.anchorNode)\n\t\n\t      if (!this.isDescendant(parent, nativeSelection.anchorNode)) {\n\t        this.hide();\n\t        return;\n\t      }\n\t\n\t      // checkeamos si esta vacio\n\t      this.display(block.getText().length === 0 && blockType === \"unstyled\");\n\t      return this.setPosition({\n\t        top: coords.top + window.scrollY,\n\t        left: coords.left + window.scrollX - 60\n\t      });\n\t\n\t      /*\n\t      @refs.image_popover.display(blockType is \"image\")\n\t       if blockType is \"image\"\n\t        selectionBoundary = node.anchorNode.parentNode.parentNode.parentNode.getBoundingClientRect()\n\t        *el = document.querySelector(\"#dante_image_popover\")\n\t        el = @refs.image_popover.refs.image_popover\n\t        padd   = el.offsetWidth / 2\n\t        @refs.image_popover.setPosition\n\t          top: selectionBoundary.top - parentBoundary.top + 60\n\t          left: selectionBoundary.left + (selectionBoundary.width / 2) - padd\n\t         *@setState\n\t        *  image_popover_position:\n\t        *    top: selectionBoundary.top - parentBoundary.top + 60\n\t        *    left: selectionBoundary.left + (selectionBoundary.width / 2) - padd\n\t        *\n\t      */\n\t    } else {\n\t      return this.hide();\n\t    }\n\t  };\n\t\n\t  DanteInlineTooltip.prototype.render = function render() {\n\t    var _this2 = this;\n\t\n\t    return _react2['default'].createElement(\n\t      'div',\n\t      {\n\t        className: 'inlineTooltip ' + this.activeClass() + ' ' + this.scaledClass(),\n\t        style: this.state.position\n\t      },\n\t      _react2['default'].createElement(\n\t        'button',\n\t        {\n\t          className: 'inlineTooltip-button control',\n\t          title: 'Close Menu',\n\t          'data-action': 'inline-menu',\n\t          onClick: this._toggleScaled\n\t        },\n\t        _react2['default'].createElement('span', { className: 'tooltip-icon dante-icon-plus' })\n\t      ),\n\t      _react2['default'].createElement(\n\t        'div',\n\t        {\n\t          className: 'inlineTooltip-menu',\n\t          style: { width: this.scaledWidth() + 'px' }\n\t        },\n\t        this.getItems().map(function (item, i) {\n\t          return _react2['default'].createElement(InlineTooltipItem, {\n\t            item: item,\n\t            key: i,\n\t            clickHandler: _this2.clickHandler\n\t          });\n\t        }),\n\t        _react2['default'].createElement('input', {\n\t          type: 'file',\n\t          style: { display: 'none' },\n\t          ref: 'fileInput',\n\t          multiple: 'multiple',\n\t          onChange: this.handleFileInput\n\t        })\n\t      )\n\t    );\n\t  };\n\t\n\t  return DanteInlineTooltip;\n\t}(_react2['default'].Component);\n\t\n\tvar InlineTooltipItem = function (_React$Component2) {\n\t  (0, _inherits3['default'])(InlineTooltipItem, _React$Component2);\n\t\n\t  function InlineTooltipItem() {\n\t    (0, _classCallCheck3['default'])(this, InlineTooltipItem);\n\t\n\t    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t      args[_key] = arguments[_key];\n\t    }\n\t\n\t    var _this3 = (0, _possibleConstructorReturn3['default'])(this, _React$Component2.call.apply(_React$Component2, [this].concat(args)));\n\t\n\t    _this3.clickHandler = _this3.clickHandler.bind(_this3);\n\t    return _this3;\n\t  }\n\t\n\t  InlineTooltipItem.prototype.clickHandler = function clickHandler(e) {\n\t    e.preventDefault();\n\t    return this.props.clickHandler(e, this.props.item.icon);\n\t  };\n\t\n\t  InlineTooltipItem.prototype.render = function render() {\n\t    return _react2['default'].createElement(\n\t      'button',\n\t      {\n\t        className: 'inlineTooltip-button scale',\n\t        title: this.props.title,\n\t        onMouseDown: this.clickHandler\n\t      },\n\t      _react2['default'].createElement('span', { className: 'tooltip-icon dante-icon-' + this.props.item.icon })\n\t    );\n\t  };\n\t\n\t  return InlineTooltipItem;\n\t}(_react2['default'].Component);\n\t\n\texports['default'] = DanteInlineTooltip;\n\tmodule.exports = exports['default'];\n\n/***/ },\n\n/***/ 237:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\t\n\tvar _classCallCheck2 = __webpack_require__(14);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tvar _possibleConstructorReturn2 = __webpack_require__(18);\n\t\n\tvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\t\n\tvar _inherits2 = __webpack_require__(17);\n\t\n\tvar _inherits3 = _interopRequireDefault(_inherits2);\n\t\n\tvar _react = __webpack_require__(5);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _reactDom = __webpack_require__(9);\n\t\n\tvar _reactDom2 = _interopRequireDefault(_reactDom);\n\t\n\tvar _draftJs = __webpack_require__(10);\n\t\n\tvar _selection = __webpack_require__(62);\n\t\n\tvar _index = __webpack_require__(24);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar DanteImagePopover = function (_React$Component) {\n\t  (0, _inherits3['default'])(DanteImagePopover, _React$Component);\n\t\n\t  function DanteImagePopover(props) {\n\t    (0, _classCallCheck3['default'])(this, DanteImagePopover);\n\t\n\t    var _this = (0, _possibleConstructorReturn3['default'])(this, _React$Component.call(this, props));\n\t\n\t    _this.display = _this.display.bind(_this);\n\t    _this.show = _this.show.bind(_this);\n\t    _this.hide = _this.hide.bind(_this);\n\t    _this._toggleScaled = _this._toggleScaled.bind(_this);\n\t    _this.scale = _this.scale.bind(_this);\n\t    _this.collapse = _this.collapse.bind(_this);\n\t    _this.relocate = _this.relocate.bind(_this);\n\t    _this.componentWillReceiveProps = _this.componentWillReceiveProps.bind(_this);\n\t    _this.handleClick = _this.handleClick.bind(_this);\n\t    _this.state = {\n\t      position: {\n\t        top: 0,\n\t        left: 0\n\t      },\n\t      show: false,\n\t      scaled: false,\n\t      buttons: [{ type: \"left\" }, { type: \"center\" }, { type: \"fill\" }, { type: \"wide\" }]\n\t    };\n\t    return _this;\n\t  }\n\t\n\t  DanteImagePopover.prototype.display = function display(b) {\n\t    if (b) {\n\t      return this.show();\n\t    } else {\n\t      return this.hide();\n\t    }\n\t  };\n\t\n\t  DanteImagePopover.prototype.show = function show() {\n\t    return this.setState({\n\t      show: true });\n\t  };\n\t\n\t  DanteImagePopover.prototype.hide = function hide() {\n\t    return this.setState({\n\t      show: false });\n\t  };\n\t\n\t  DanteImagePopover.prototype.setPosition = function setPosition(coords) {\n\t    return this.setState({\n\t      position: coords });\n\t  };\n\t\n\t  DanteImagePopover.prototype._toggleScaled = function _toggleScaled(ev) {\n\t    if (this.state.scaled) {\n\t      return this.collapse();\n\t    } else {\n\t      return this.scale();\n\t    }\n\t  };\n\t\n\t  DanteImagePopover.prototype.scale = function scale() {\n\t    return this.setState({\n\t      scaled: true });\n\t  };\n\t\n\t  DanteImagePopover.prototype.collapse = function collapse() {\n\t    return this.setState({\n\t      scaled: false });\n\t  };\n\t\n\t  DanteImagePopover.prototype.relocate = function relocate() {\n\t    var editorState = this.props.editorState;\n\t\n\t\n\t    if (editorState.getSelection().isCollapsed()) {\n\t\n\t      var currentBlock = (0, _index.getCurrentBlock)(editorState);\n\t      var blockType = currentBlock.getType();\n\t\n\t      var contentState = editorState.getCurrentContent();\n\t      var selectionState = editorState.getSelection();\n\t\n\t      var block = contentState.getBlockForKey(selectionState.anchorKey);\n\t\n\t      var nativeSelection = (0, _selection.getSelection)(window);\n\t      if (!nativeSelection.rangeCount) {\n\t        return;\n\t      }\n\t\n\t      var node = (0, _index.getNode)();\n\t\n\t      var selectionBoundary = (0, _selection.getSelectionRect)(nativeSelection);\n\t      var coords = selectionBoundary;\n\t\n\t      var parent = _reactDom2['default'].findDOMNode(this.props.editor);\n\t      var parentBoundary = parent.getBoundingClientRect();\n\t\n\t      this.display(blockType === \"image\");\n\t\n\t      if (blockType === \"image\") {\n\t        selectionBoundary = node.anchorNode.parentNode.parentNode.parentNode.getBoundingClientRect();\n\t        var el = this.refs.image_popover;\n\t        var padd = el.offsetWidth / 2;\n\t        return this.setPosition({\n\t          top: selectionBoundary.top - parentBoundary.top + 60,\n\t          left: selectionBoundary.left + selectionBoundary.width / 2 - padd\n\t        });\n\t      }\n\t    } else {\n\t      return this.hide();\n\t    }\n\t  };\n\t\n\t  DanteImagePopover.prototype.componentWillReceiveProps = function componentWillReceiveProps(newProps) {\n\t    return this.collapse();\n\t  };\n\t\n\t  DanteImagePopover.prototype.getStyle = function getStyle() {\n\t    if (!this.state.position) {\n\t      return {};\n\t    }\n\t  };\n\t\n\t  DanteImagePopover.prototype.handleClick = function handleClick(item) {\n\t    return this.props.editor.setDirection(item.type);\n\t  };\n\t\n\t  DanteImagePopover.prototype.render = function render() {\n\t    var _this2 = this;\n\t\n\t    return _react2['default'].createElement(\n\t      'div',\n\t      {\n\t        ref: 'image_popover',\n\t        className: 'dante-popover popover--Aligntooltip popover--top popover--animated ' + (this.state.show ? 'is-active' : undefined),\n\t        style: { top: this.state.position.top,\n\t          left: this.state.position.left }\n\t      },\n\t      _react2['default'].createElement(\n\t        'div',\n\t        { className: 'popover-inner' },\n\t        _react2['default'].createElement(\n\t          'ul',\n\t          { className: 'dante-menu-buttons' },\n\t          this.state.buttons.map(function (item, i) {\n\t            return _react2['default'].createElement(DanteImagePopoverItem, {\n\t              item: item,\n\t              handleClick: _this2.handleClick,\n\t              key: i\n\t            });\n\t          })\n\t        )\n\t      ),\n\t      _react2['default'].createElement('div', { className: 'popover-arrow' })\n\t    );\n\t  };\n\t\n\t  return DanteImagePopover;\n\t}(_react2['default'].Component);\n\t\n\tvar DanteImagePopoverItem = function (_React$Component2) {\n\t  (0, _inherits3['default'])(DanteImagePopoverItem, _React$Component2);\n\t\n\t  function DanteImagePopoverItem() {\n\t    (0, _classCallCheck3['default'])(this, DanteImagePopoverItem);\n\t\n\t    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t      args[_key] = arguments[_key];\n\t    }\n\t\n\t    var _this3 = (0, _possibleConstructorReturn3['default'])(this, _React$Component2.call.apply(_React$Component2, [this].concat(args)));\n\t\n\t    _this3.handleClick = _this3.handleClick.bind(_this3);\n\t    _this3.render = _this3.render.bind(_this3);\n\t    return _this3;\n\t  }\n\t\n\t  DanteImagePopoverItem.prototype.handleClick = function handleClick(e) {\n\t    e.preventDefault();\n\t    return this.props.handleClick(this.props.item);\n\t  };\n\t\n\t  DanteImagePopoverItem.prototype.render = function render() {\n\t    return _react2['default'].createElement(\n\t      'li',\n\t      {\n\t        className: 'dante-menu-button align-' + this.props.item.type,\n\t        onMouseDown: this.handleClick },\n\t      _react2['default'].createElement('span', { className: 'tooltip-icon dante-icon-image-' + this.props.item.type })\n\t    );\n\t  };\n\t\n\t  return DanteImagePopoverItem;\n\t}(_react2['default'].Component);\n\t\n\texports['default'] = DanteImagePopover;\n\tmodule.exports = exports['default'];\n\n/***/ },\n\n/***/ 238:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\t\n\tvar _classCallCheck2 = __webpack_require__(14);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tvar _possibleConstructorReturn2 = __webpack_require__(18);\n\t\n\tvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\t\n\tvar _inherits2 = __webpack_require__(17);\n\t\n\tvar _inherits3 = _interopRequireDefault(_inherits2);\n\t\n\tvar _react = __webpack_require__(5);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _reactDom = __webpack_require__(9);\n\t\n\tvar _reactDom2 = _interopRequireDefault(_reactDom);\n\t\n\tvar _index = __webpack_require__(24);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar DanteAnchorPopover = function (_React$Component) {\n\t  (0, _inherits3['default'])(DanteAnchorPopover, _React$Component);\n\t\n\t  function DanteAnchorPopover(props) {\n\t    (0, _classCallCheck3['default'])(this, DanteAnchorPopover);\n\t\n\t    var _this = (0, _possibleConstructorReturn3['default'])(this, _React$Component.call(this, props));\n\t\n\t    _this.display = _this.display.bind(_this);\n\t    _this.show = _this.show.bind(_this);\n\t    _this.hide = _this.hide.bind(_this);\n\t    _this.relocate = _this.relocate.bind(_this);\n\t    _this.render = _this.render.bind(_this);\n\t    _this.state = {\n\t      position: {\n\t        top: 0,\n\t        left: 0\n\t      },\n\t      show: false,\n\t      url: \"\"\n\t    };\n\t    return _this;\n\t  }\n\t\n\t  DanteAnchorPopover.prototype.display = function display(b) {\n\t    if (b) {\n\t      return this.show();\n\t    } else {\n\t      return this.hide();\n\t    }\n\t  };\n\t\n\t  DanteAnchorPopover.prototype.show = function show() {\n\t    return this.setState({\n\t      show: true });\n\t  };\n\t\n\t  DanteAnchorPopover.prototype.hide = function hide() {\n\t    return this.setState({\n\t      show: false });\n\t  };\n\t\n\t  DanteAnchorPopover.prototype.setPosition = function setPosition(coords) {\n\t    return this.setState({\n\t      position: coords });\n\t  };\n\t\n\t  DanteAnchorPopover.prototype.relocate = function relocate(node) {\n\t    if (node == null) {\n\t      node = null;\n\t    }\n\t    if (!node) {\n\t      return;\n\t    }\n\t\n\t    var editorState = this.props.editorState;\n\t\n\t    var currentBlock = (0, _index.getCurrentBlock)(editorState);\n\t    var blockType = currentBlock.getType();\n\t\n\t    var contentState = editorState.getCurrentContent();\n\t    var selectionState = editorState.getSelection();\n\t\n\t    var selectionBoundary = node.getBoundingClientRect();\n\t    var coords = selectionBoundary;\n\t\n\t    var el = this.refs.dante_popover;\n\t    var padd = el.offsetWidth / 2;\n\t\n\t    var parent = _reactDom2['default'].findDOMNode(this.props.editor);\n\t    var parentBoundary = parent.getBoundingClientRect();\n\t\n\t    return {\n\t      top: selectionBoundary.top - parentBoundary.top + 160,\n\t      left: selectionBoundary.left + selectionBoundary.width / 2 - padd\n\t    };\n\t  };\n\t\n\t  DanteAnchorPopover.prototype.render = function render() {\n\t    var position = this.state.position;\n\t\n\t    var style = {\n\t      left: position.left,\n\t      top: position.top,\n\t      visibility: '' + (this.state.show ? 'visible' : 'hidden')\n\t    };\n\t    return _react2['default'].createElement(\n\t      'div',\n\t      {\n\t        ref: 'dante_popover',\n\t        className: 'dante-popover popover--tooltip popover--Linktooltip popover--bottom is-active',\n\t        style: style,\n\t        onMouseOver: this.props.handleOnMouseOver,\n\t        onMouseOut: this.props.handleOnMouseOut\n\t      },\n\t      _react2['default'].createElement(\n\t        'div',\n\t        { className: 'popover-inner' },\n\t        _react2['default'].createElement(\n\t          'a',\n\t          { href: this.props.url, target: '_blank' },\n\t          this.state.url\n\t        )\n\t      ),\n\t      _react2['default'].createElement('div', { className: 'popover-arrow' })\n\t    );\n\t  };\n\t\n\t  return DanteAnchorPopover;\n\t}(_react2['default'].Component);\n\t\n\texports['default'] = DanteAnchorPopover;\n\tmodule.exports = exports['default'];\n\n/***/ },\n\n/***/ 239:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\t\n\tvar _classCallCheck2 = __webpack_require__(14);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tvar _possibleConstructorReturn2 = __webpack_require__(18);\n\t\n\tvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\t\n\tvar _inherits2 = __webpack_require__(17);\n\t\n\tvar _inherits3 = _interopRequireDefault(_inherits2);\n\t\n\tvar _react = __webpack_require__(5);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _reactDom = __webpack_require__(9);\n\t\n\tvar _reactDom2 = _interopRequireDefault(_reactDom);\n\t\n\tvar _draftJs = __webpack_require__(10);\n\t\n\tvar _selection = __webpack_require__(62);\n\t\n\tvar _index = __webpack_require__(24);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar DanteTooltip = function (_React$Component) {\n\t  (0, _inherits3['default'])(DanteTooltip, _React$Component);\n\t\n\t  function DanteTooltip(props) {\n\t    (0, _classCallCheck3['default'])(this, DanteTooltip);\n\t\n\t    var _this = (0, _possibleConstructorReturn3['default'])(this, _React$Component.call(this, props));\n\t\n\t    _this._clickInlineHandler = _this._clickInlineHandler.bind(_this);\n\t    _this.display = _this.display.bind(_this);\n\t    _this.show = _this.show.bind(_this);\n\t    _this.hide = _this.hide.bind(_this);\n\t    _this.relocate = _this.relocate.bind(_this);\n\t    _this._clickBlockHandler = _this._clickBlockHandler.bind(_this);\n\t    _this.displayLinkMode = _this.displayLinkMode.bind(_this);\n\t    _this.displayActiveMenu = _this.displayActiveMenu.bind(_this);\n\t    _this._enableLinkMode = _this._enableLinkMode.bind(_this);\n\t    _this._disableLinkMode = _this._disableLinkMode.bind(_this);\n\t    _this.handleInputEnter = _this.handleInputEnter.bind(_this);\n\t    _this.confirmLink = _this.confirmLink.bind(_this);\n\t    _this.inlineItems = _this.inlineItems.bind(_this);\n\t    _this.blockItems = _this.blockItems.bind(_this);\n\t    _this.getDefaultValue = _this.getDefaultValue.bind(_this);\n\t    _this.getVisibleSelectionRect = _draftJs.getVisibleSelectionRect;\n\t    _this.state = {\n\t      link_mode: false,\n\t      show: false,\n\t      position: {}\n\t    };\n\t    return _this;\n\t  }\n\t\n\t  DanteTooltip.prototype._clickInlineHandler = function _clickInlineHandler(ev, style) {\n\t    var _this2 = this;\n\t\n\t    ev.preventDefault();\n\t\n\t    this.props.onChange(_draftJs.RichUtils.toggleInlineStyle(this.props.editorState, style));\n\t\n\t    return setTimeout(function () {\n\t      return _this2.relocate();\n\t    }, 0);\n\t  };\n\t\n\t  DanteTooltip.prototype.display = function display(b) {\n\t    if (b) {\n\t      return this.show();\n\t    } else {\n\t      return this.hide();\n\t    }\n\t  };\n\t\n\t  DanteTooltip.prototype.show = function show() {\n\t    return this.setState({\n\t      show: true });\n\t  };\n\t\n\t  DanteTooltip.prototype.hide = function hide() {\n\t    return this.setState({\n\t      link_mode: false,\n\t      show: false\n\t    });\n\t  };\n\t\n\t  DanteTooltip.prototype.setPosition = function setPosition(coords) {\n\t    return this.setState({\n\t      position: coords });\n\t  };\n\t\n\t  DanteTooltip.prototype.isDescendant = function isDescendant(parent, child) {\n\t    var node = child.parentNode;\n\t    while (node !== null) {\n\t      if (node === parent) {\n\t        return true;\n\t      }\n\t      node = node.parentNode;\n\t    }\n\t    return false;\n\t  };\n\t\n\t  DanteTooltip.prototype.relocate = function relocate() {\n\t\n\t    var currentBlock = (0, _index.getCurrentBlock)(this.props.editorState);\n\t    var blockType = currentBlock.getType();\n\t    // display tooltip only for unstyled\n\t\n\t    if (this.props.configTooltip.selectionElements.indexOf(blockType) < 0) {\n\t      this.hide();\n\t      return;\n\t    }\n\t\n\t    if (this.state.link_mode) {\n\t      return;\n\t    }\n\t    if (!this.state.show) {\n\t      return;\n\t    }\n\t\n\t    var el = this.refs.dante_menu;\n\t    var padd = el.offsetWidth / 2;\n\t\n\t    var nativeSelection = (0, _selection.getSelection)(window);\n\t    if (!nativeSelection.rangeCount) {\n\t      return;\n\t    }\n\t\n\t    var selectionBoundary = (0, _selection.getSelectionRect)(nativeSelection);\n\t\n\t    var parent = _reactDom2['default'].findDOMNode(this.props.editor);\n\t    var parentBoundary = parent.getBoundingClientRect();\n\t\n\t    // hide if selected node is not in editor\n\t    if (!this.isDescendant(parent, nativeSelection.anchorNode)) {\n\t      this.hide();\n\t      return;\n\t    }\n\t\n\t    var top = selectionBoundary.top - parentBoundary.top - -90 - 5;\n\t    var left = selectionBoundary.left + selectionBoundary.width / 2 - padd;\n\t\n\t    if (!top || !left) {\n\t      return;\n\t    }\n\t\n\t    // console.log \"SET SHOW FOR TOOLTIP INSERT MENU\"\n\t    return this.setState({\n\t      show: true,\n\t      position: {\n\t        left: left,\n\t        top: top\n\t      }\n\t    });\n\t  };\n\t\n\t  DanteTooltip.prototype._clickBlockHandler = function _clickBlockHandler(ev, style) {\n\t    var _this3 = this;\n\t\n\t    ev.preventDefault();\n\t\n\t    this.props.onChange(_draftJs.RichUtils.toggleBlockType(this.props.editorState, style));\n\t\n\t    return setTimeout(function () {\n\t      return _this3.relocate();\n\t    }, 0);\n\t  };\n\t\n\t  DanteTooltip.prototype.displayLinkMode = function displayLinkMode() {\n\t    if (this.state.link_mode) {\n\t      return \"dante-menu--linkmode\";\n\t    } else {\n\t      return \"\";\n\t    }\n\t  };\n\t\n\t  DanteTooltip.prototype.displayActiveMenu = function displayActiveMenu() {\n\t    if (this.state.show) {\n\t      return \"dante-menu--active\";\n\t    } else {\n\t      return \"\";\n\t    }\n\t  };\n\t\n\t  DanteTooltip.prototype._enableLinkMode = function _enableLinkMode(ev) {\n\t    ev.preventDefault();\n\t    return this.setState({\n\t      link_mode: true });\n\t  };\n\t\n\t  DanteTooltip.prototype._disableLinkMode = function _disableLinkMode(ev) {\n\t    ev.preventDefault();\n\t    return this.setState({\n\t      link_mode: false,\n\t      url: \"\"\n\t    });\n\t  };\n\t\n\t  DanteTooltip.prototype.hideMenu = function hideMenu() {\n\t    return this.hide();\n\t  };\n\t\n\t  DanteTooltip.prototype.handleInputEnter = function handleInputEnter(e) {\n\t    if (e.which === 13) {\n\t      return this.confirmLink(e);\n\t    }\n\t  };\n\t\n\t  DanteTooltip.prototype.confirmLink = function confirmLink(e) {\n\t    e.preventDefault();\n\t    var editorState = this.props.editorState;\n\t\n\t    var urlValue = e.currentTarget.value;\n\t    var contentState = editorState.getCurrentContent();\n\t    var selection = editorState.getSelection();\n\t\n\t    var opts = {\n\t      url: urlValue,\n\t      showPopLinkOver: this.props.showPopLinkOver,\n\t      hidePopLinkOver: this.props.hidePopLinkOver\n\t    };\n\t\n\t    var entityKey = _draftJs.Entity.create('LINK', 'MUTABLE', opts);\n\t\n\t    if (selection.isCollapsed()) {\n\t      console.log(\"COLLAPSED SKIPPING LINK\");\n\t      return;\n\t    }\n\t\n\t    this.props.onChange(_draftJs.RichUtils.toggleLink(editorState, selection, entityKey));\n\t\n\t    return this._disableLinkMode(e);\n\t  };\n\t\n\t  DanteTooltip.prototype.getPosition = function getPosition() {\n\t    var pos = this.state.position;\n\t    return pos;\n\t  };\n\t\n\t  DanteTooltip.prototype.inlineItems = function inlineItems() {\n\t    return this.props.widget_options.block_types.filter(function (o) {\n\t      return o.type === \"inline\";\n\t    });\n\t  };\n\t\n\t  DanteTooltip.prototype.blockItems = function blockItems() {\n\t    return this.props.widget_options.block_types.filter(function (o) {\n\t      return o.type === \"block\";\n\t    });\n\t  };\n\t\n\t  DanteTooltip.prototype.getDefaultValue = function getDefaultValue() {\n\t    var _this4 = this;\n\t\n\t    if (this.refs.dante_menu_input) {\n\t      this.refs.dante_menu_input.value = \"\";\n\t    }\n\t\n\t    var currentBlock = (0, _index.getCurrentBlock)(this.props.editorState);\n\t    var blockType = currentBlock.getType();\n\t    var selection = this.props.editor.state.editorState.getSelection();\n\t    var selectedEntity = null;\n\t    var defaultUrl = null;\n\t    return currentBlock.findEntityRanges(function (character) {\n\t      var entityKey = character.getEntity();\n\t      selectedEntity = entityKey;\n\t      return entityKey !== null && _draftJs.Entity.get(entityKey).getType() === 'LINK';\n\t    }, function (start, end) {\n\t      var selStart = selection.getAnchorOffset();\n\t      var selEnd = selection.getFocusOffset();\n\t      if (selection.getIsBackward()) {\n\t        selStart = selection.getFocusOffset();\n\t        selEnd = selection.getAnchorOffset();\n\t      }\n\t\n\t      if (start === selStart && end === selEnd) {\n\t        defaultUrl = _draftJs.Entity.get(selectedEntity).getData().url;\n\t        return _this4.refs.dante_menu_input.value = defaultUrl;\n\t      }\n\t    });\n\t  };\n\t\n\t  DanteTooltip.prototype.render = function render() {\n\t    var _this5 = this;\n\t\n\t    return _react2['default'].createElement(\n\t      'div',\n\t      {\n\t        id: 'dante-menu',\n\t        ref: 'dante_menu',\n\t        className: 'dante-menu ' + this.displayActiveMenu() + ' ' + this.displayLinkMode(),\n\t        style: this.getPosition()\n\t      },\n\t      _react2['default'].createElement(\n\t        'div',\n\t        { className: 'dante-menu-linkinput' },\n\t        _react2['default'].createElement('input', {\n\t          className: 'dante-menu-input',\n\t          ref: 'dante_menu_input',\n\t          placeholder: 'Paste or type a link',\n\t          onKeyPress: this.handleInputEnter,\n\t          defaultValue: this.getDefaultValue()\n\t        }),\n\t        _react2['default'].createElement('div', { className: 'dante-menu-button', onMouseDown: this._disableLinkMode })\n\t      ),\n\t      _react2['default'].createElement(\n\t        'ul',\n\t        { className: 'dante-menu-buttons' },\n\t        this.blockItems().map(function (item, i) {\n\t          return _react2['default'].createElement(DanteTooltipItem, {\n\t            key: i,\n\t            item: item,\n\t            handleClick: _this5._clickBlockHandler,\n\t            editorState: _this5.props.editorState,\n\t            type: 'block',\n\t            currentStyle: _this5.props.editorState.getCurrentInlineStyle\n\t          });\n\t        }),\n\t        _react2['default'].createElement(DanteTooltipLink, {\n\t          editorState: this.props.editorState,\n\t          enableLinkMode: this._enableLinkMode\n\t        }),\n\t        this.inlineItems().map(function (item, i) {\n\t          return _react2['default'].createElement(DanteTooltipItem, {\n\t            key: i,\n\t            item: item,\n\t            type: 'inline',\n\t            editorState: _this5.props.editorState,\n\t            handleClick: _this5._clickInlineHandler\n\t          });\n\t        })\n\t      )\n\t    );\n\t  };\n\t\n\t  return DanteTooltip;\n\t}(_react2['default'].Component);\n\t\n\tvar DanteTooltipItem = function (_React$Component2) {\n\t  (0, _inherits3['default'])(DanteTooltipItem, _React$Component2);\n\t\n\t  function DanteTooltipItem() {\n\t    (0, _classCallCheck3['default'])(this, DanteTooltipItem);\n\t\n\t    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t      args[_key] = arguments[_key];\n\t    }\n\t\n\t    var _this6 = (0, _possibleConstructorReturn3['default'])(this, _React$Component2.call.apply(_React$Component2, [this].concat(args)));\n\t\n\t    _this6.handleClick = _this6.handleClick.bind(_this6);\n\t    _this6.activeClass = _this6.activeClass.bind(_this6);\n\t    _this6.isActive = _this6.isActive.bind(_this6);\n\t    _this6.activeClassInline = _this6.activeClassInline.bind(_this6);\n\t    _this6.activeClassBlock = _this6.activeClassBlock.bind(_this6);\n\t    _this6.render = _this6.render.bind(_this6);\n\t    return _this6;\n\t  }\n\t\n\t  DanteTooltipItem.prototype.handleClick = function handleClick(ev) {\n\t    return this.props.handleClick(ev, this.props.item.style);\n\t  };\n\t\n\t  DanteTooltipItem.prototype.activeClass = function activeClass() {\n\t    if (this.isActive()) {\n\t      return \"active\";\n\t    } else {\n\t      return \"\";\n\t    }\n\t  };\n\t\n\t  DanteTooltipItem.prototype.isActive = function isActive() {\n\t    if (this.props.type === \"block\") {\n\t      return this.activeClassBlock();\n\t    } else {\n\t      return this.activeClassInline();\n\t    }\n\t  };\n\t\n\t  DanteTooltipItem.prototype.activeClassInline = function activeClassInline() {\n\t    if (!this.props.editorState) {\n\t      return;\n\t    }\n\t    //console.log @props.item\n\t    return this.props.editorState.getCurrentInlineStyle().has(this.props.item.style);\n\t  };\n\t\n\t  DanteTooltipItem.prototype.activeClassBlock = function activeClassBlock() {\n\t    //console.log \"EDITOR STATE\", @props.editorState\n\t    if (!this.props.editorState) {\n\t      return;\n\t    }\n\t    var selection = this.props.editorState.getSelection();\n\t    var blockType = this.props.editorState.getCurrentContent().getBlockForKey(selection.getStartKey()).getType();\n\t    return this.props.item.style === blockType;\n\t  };\n\t\n\t  DanteTooltipItem.prototype.render = function render() {\n\t    return _react2['default'].createElement(\n\t      'li',\n\t      { className: 'dante-menu-button ' + this.activeClass(), onMouseDown: this.handleClick },\n\t      _react2['default'].createElement('i', { className: 'dante-icon dante-icon-' + this.props.item.label, 'data-action': 'bold' })\n\t    );\n\t  };\n\t\n\t  return DanteTooltipItem;\n\t}(_react2['default'].Component);\n\t\n\tvar DanteTooltipLink = function (_React$Component3) {\n\t  (0, _inherits3['default'])(DanteTooltipLink, _React$Component3);\n\t\n\t  function DanteTooltipLink() {\n\t    (0, _classCallCheck3['default'])(this, DanteTooltipLink);\n\t\n\t    for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n\t      args[_key2] = arguments[_key2];\n\t    }\n\t\n\t    var _this7 = (0, _possibleConstructorReturn3['default'])(this, _React$Component3.call.apply(_React$Component3, [this].concat(args)));\n\t\n\t    _this7.promptForLink = _this7.promptForLink.bind(_this7);\n\t    return _this7;\n\t  }\n\t\n\t  DanteTooltipLink.prototype.promptForLink = function promptForLink(ev) {\n\t    var selection = this.props.editorState.getSelection();\n\t    if (!selection.isCollapsed()) {\n\t      return this.props.enableLinkMode(ev);\n\t    }\n\t  };\n\t\n\t  DanteTooltipLink.prototype.render = function render() {\n\t    return _react2['default'].createElement(\n\t      'li',\n\t      { className: 'dante-menu-button', onMouseDown: this.promptForLink },\n\t      _react2['default'].createElement(\n\t        'i',\n\t        { className: 'dante-icon icon-createlink', 'data-action': 'createlink' },\n\t        'link'\n\t      )\n\t    );\n\t  };\n\t\n\t  return DanteTooltipLink;\n\t}(_react2['default'].Component);\n\t\n\texports['default'] = DanteTooltip;\n\tmodule.exports = exports['default'];\n\n/***/ },\n\n/***/ 240:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\t\n\tvar _stringify = __webpack_require__(80);\n\t\n\tvar _stringify2 = _interopRequireDefault(_stringify);\n\t\n\tvar _draftJs = __webpack_require__(10);\n\t\n\tvar _immutable = __webpack_require__(46);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\t// { compose\n\t// }  = require('underscore')\n\t\n\t// underscore compose function\n\tvar compose = function compose() {\n\t  var args = arguments;\n\t  var start = args.length - 1;\n\t  return function () {\n\t    var i = start;\n\t    var result = args[start].apply(this, arguments);\n\t    while (i--) {\n\t      result = args[i].call(this, result);\n\t    }\n\t    return result;\n\t  };\n\t};\n\t\n\t// from https://gist.github.com/N1kto/6702e1c2d89a33a15a032c234fc4c34e\n\t\n\t/*\n\t * Helpers\n\t */\n\t\n\t// Prepares img meta data object based on img attributes\n\tvar getBlockSpecForElement = function getBlockSpecForElement(imgElement) {\n\t  return {\n\t    contentType: 'image',\n\t    imgSrc: imgElement.getAttribute('src')\n\t  };\n\t};\n\t\n\t// Wraps meta data in HTML element which is 'understandable' by Draft, I used <blockquote />.\n\tvar wrapBlockSpec = function wrapBlockSpec(blockSpec) {\n\t  if (blockSpec === null) {\n\t    return null;\n\t  }\n\t\n\t  var tempEl = document.createElement('blockquote');\n\t  // stringify meta data and insert it as text content of temp HTML element. We will later extract\n\t  // and parse it.\n\t  tempEl.innerText = (0, _stringify2['default'])(blockSpec);\n\t  return tempEl;\n\t};\n\t\n\t// Replaces <img> element with our temp element\n\tvar replaceElement = function replaceElement(oldEl, newEl) {\n\t  if (!(newEl instanceof HTMLElement)) {\n\t    return;\n\t  }\n\t\n\t  var upEl = getUpEl(oldEl);\n\t  //parentNode = oldEl.parentNode\n\t  //return parentNode.replaceChild(newEl, oldEl)\n\t  return upEl.parentNode.insertBefore(newEl, upEl);\n\t};\n\t\n\tvar getUpEl = function getUpEl(el) {\n\t  var original_el = el;\n\t  while (el.parentNode) {\n\t    if (el.parentNode.tagName !== 'BODY') {\n\t      el = el.parentNode;\n\t    }\n\t    if (el.parentNode.tagName === 'BODY') {\n\t      return el;\n\t    }\n\t  }\n\t};\n\t\n\tvar elementToBlockSpecElement = compose(wrapBlockSpec, getBlockSpecForElement);\n\t\n\tvar imgReplacer = function imgReplacer(imgElement) {\n\t  return replaceElement(imgElement, elementToBlockSpecElement(imgElement));\n\t};\n\t\n\t/*\n\t * Main function\n\t */\n\t\n\t// takes HTML string and returns DraftJS ContentState\n\tvar customHTML2Content = function customHTML2Content(HTML, blockRn) {\n\t  var tempDoc = new DOMParser().parseFromString(HTML, 'text/html');\n\t  // replace all <img /> with <blockquote /> elements\n\t\n\t  var a = tempDoc.querySelectorAll('img').forEach(function (item) {\n\t    return imgReplacer(item);\n\t  });\n\t\n\t  // use DraftJS converter to do initial conversion. I don't provide DOMBuilder and\n\t  // blockRenderMap arguments here since it should fall back to its default ones, which are fine\n\t  console.log(tempDoc.body.innerHTML);\n\t  var contentBlocks = (0, _draftJs.convertFromHTML)(tempDoc.body.innerHTML, _draftJs.getSafeBodyFromHTML, blockRn);\n\t\n\t  // now replace <blockquote /> ContentBlocks with 'atomic' ones\n\t  contentBlocks = contentBlocks.map(function (block) {\n\t    var newBlock = void 0;\n\t    console.log(\"CHECK BLOCK\", block.getType());\n\t    if (block.getType() !== 'blockquote') {\n\t      return block;\n\t    }\n\t\n\t    var json = \"\";\n\t    try {\n\t      json = JSON.parse(block.getText());\n\t    } catch (error) {\n\t      return block;\n\t    }\n\t\n\t    return newBlock = block.merge({\n\t      type: \"image\",\n\t      text: \"\",\n\t      data: {\n\t        url: json.imgSrc,\n\t        forceUpload: true\n\t      }\n\t    });\n\t  });\n\t\n\t  tempDoc = null;\n\t  return _draftJs.ContentState.createFromBlockArray(contentBlocks);\n\t};\n\t\n\texports['default'] = customHTML2Content;\n\tmodule.exports = exports['default'];\n\n/***/ },\n\n/***/ 241:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\texports.__esModule = true;\n\t\n\tvar _stringify = __webpack_require__(80);\n\t\n\tvar _stringify2 = _interopRequireDefault(_stringify);\n\t\n\tvar _classCallCheck2 = __webpack_require__(14);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tvar _axios = __webpack_require__(61);\n\t\n\tvar _axios2 = _interopRequireDefault(_axios);\n\t\n\tvar _immutable = __webpack_require__(46);\n\t\n\tvar _immutable2 = _interopRequireDefault(_immutable);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\t\n\tvar SaveBehavior = function () {\n\t  function SaveBehavior(options) {\n\t    (0, _classCallCheck3[\"default\"])(this, SaveBehavior);\n\t\n\t    this.getLocks = options.getLocks;\n\t    this.config = options.config;\n\t    this.editorContent = options.editorContent;\n\t    this.editorState = options.editorState;\n\t  }\n\t\n\t  SaveBehavior.prototype.handleStore = function handleStore(ev) {\n\t    return this.store();\n\t  };\n\t\n\t  SaveBehavior.prototype.store = function store(content) {\n\t    var _this = this;\n\t\n\t    if (!this.config.data_storage.url) {\n\t      return;\n\t    }\n\t    if (this.getLocks() > 0) {\n\t      return;\n\t    }\n\t\n\t    clearTimeout(this.timeout);\n\t\n\t    return this.timeout = setTimeout(function () {\n\t      return _this.checkforStore(content);\n\t    }, this.config.data_storage.interval);\n\t  };\n\t\n\t  SaveBehavior.prototype.getTextFromEditor = function getTextFromEditor(content) {\n\t    return content.blocks.map(function (o) {\n\t      return o.text;\n\t    }).join(\"\\n\");\n\t  };\n\t\n\t  SaveBehavior.prototype.getUrl = function getUrl() {\n\t    var url = this.config.data_storage.url;\n\t\n\t    if (typeof url === \"function\") {\n\t      return url();\n\t    } else {\n\t      return url;\n\t    }\n\t  };\n\t\n\t  SaveBehavior.prototype.getMethod = function getMethod() {\n\t    var method = this.config.data_storage.method;\n\t\n\t    if (typeof method === \"function\") {\n\t      return method();\n\t    } else {\n\t      return method;\n\t    }\n\t  };\n\t\n\t  SaveBehavior.prototype.checkforStore = function checkforStore(content) {\n\t    var _this2 = this;\n\t\n\t    // ENTER DATA STORE\n\t    var isChanged = !_immutable2[\"default\"].is(_immutable2[\"default\"].fromJS(this.editorContent), _immutable2[\"default\"].fromJS(content));\n\t    // console.log(\"CONTENT CHANGED:\", isChanged)\n\t\n\t    if (!isChanged) {\n\t      return;\n\t    }\n\t\n\t    if (this.config.xhr.before_handler) {\n\t      this.config.xhr.before_handler();\n\t    }\n\t    // console.log \"SAVING TO: #{@getMethod()} #{@getUrl()}\"\n\t\n\t    return (0, _axios2[\"default\"])({\n\t      method: this.getMethod(),\n\t      url: this.getUrl(),\n\t      data: {\n\t        editor_content: (0, _stringify2[\"default\"])(content),\n\t        text_content: this.getTextFromEditor(content)\n\t      }\n\t    }).then(function (result) {\n\t      // console.log \"STORING CONTENT\", result\n\t      if (_this2.config.data_storage.success_handler) {\n\t        _this2.config.data_storage.success_handler(result);\n\t      }\n\t      if (_this2.config.xhr.success_handler) {\n\t        return _this2.config.xhr.success_handler(result);\n\t      }\n\t    })[\"catch\"](function (error) {\n\t      // console.log(\"ERROR: got error saving content at #{@config.data_storage.url} - #{error}\")\n\t      if (_this2.config.xhr.failure_handler) {\n\t        return _this2.config.xhr.failure_handler(error);\n\t      }\n\t    });\n\t  };\n\t\n\t  return SaveBehavior;\n\t}();\n\t\n\texports[\"default\"] = SaveBehavior;\n\tmodule.exports = exports[\"default\"];\n\n/***/ }\n\n})\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** Dante2.min.js\n **/","\nimport Dante from './components/dante'\nimport DanteEditor from './components/dante_editor'\n\n\nmodule.exports = {\n  Dante, \n  DanteEditor\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"root\":\"React\",\"commonjs2\":\"react\",\"commonjs\":\"react\",\"amd\":\"react\"}\n ** module id = 5\n ** module chunks = 1\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_9__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"root\":\"ReactDOM\",\"commonjs2\":\"react-dom\",\"commonjs\":\"react-dom\",\"amd\":\"react-dom\"}\n ** module id = 9\n ** module chunks = 1\n **/","import { Map } from 'immutable';\n\n\n\nimport { EditorState, ContentBlock, genKey } from 'draft-js';\n\n\n/*\nUsed from [react-rte](https://github.com/brijeshb42/medium-draft)\nby [brijeshb42](https://github.com/brijeshb42/medium-draft)\n*/\n\n/*\nReturns default block-level metadata for various block type. Empty object otherwise.\n*/\nexport const getDefaultBlockData = (blockType, initialData = {}) => {\n  switch (blockType) {\n    //case Block.TODO: return { checked: false };\n    default: return initialData;\n  }\n};\n\nexport const getNode = (root=window) => {\n  let t = null\n  if (root.getSelection){\n    t = root.getSelection()\n  } else if (root.document.getSelection){\n    t = root.document.getSelection()\n  } else if (root.document.selection){\n    t = root.document.selection.createRange().text\n  }\n  return t\n}\n\n/*\nGet currentBlock in the editorState.\n*/\nexport const getCurrentBlock = (editorState) => {\n  const selectionState = editorState.getSelection();\n  const contentState = editorState.getCurrentContent();\n  const block = contentState.getBlockForKey(selectionState.getStartKey());\n  return block;\n};\n\n/*\nAdds a new block (currently replaces an empty block) at the current cursor position\nof the given `newType`.\n*/\nexport const addNewBlock = (editorState, newType = \"unstyled\", initialData = {}) => {\n  const selectionState = editorState.getSelection();\n  if (!selectionState.isCollapsed()) {\n    return editorState;\n  }\n  const contentState = editorState.getCurrentContent();\n  const key = selectionState.getStartKey();\n  const blockMap = contentState.getBlockMap();\n  const currentBlock = getCurrentBlock(editorState);\n  if (!currentBlock) {\n    return editorState;\n  }\n  if (currentBlock.getLength() === 0) {\n    if (currentBlock.getType() === newType) {\n      return editorState;\n    }\n    const newBlock = currentBlock.merge({\n      type: newType,\n      data: getDefaultBlockData(newType, initialData),\n    });\n    const newContentState = contentState.merge({\n      blockMap: blockMap.set(key, newBlock),\n      selectionAfter: selectionState,\n    });\n    return EditorState.push(editorState, newContentState, 'change-block-type');\n  }\n  return editorState;\n};\n\n\n/*\nChanges the block type of the current block.\n*/\nexport const resetBlockWithType = (editorState, newType = \"unstyled\", data={}) => {\n  const contentState = editorState.getCurrentContent();\n  const selectionState = editorState.getSelection();\n  const key = selectionState.getStartKey();\n  const blockMap = contentState.getBlockMap();\n  const block = blockMap.get(key);\n\n  let newText = '';\n  console.log( \"DATA FOR PLACEHOLDER!\", data)\n  const text = block.getText();\n  if (block.getLength() >= 2) {\n    newText = text.substr(1);\n  }\n\n  /*if(data.text){\n    newText = data.text\n  }*/\n\n  //let newText = data.text\n\n  const newBlock = block.merge({\n    text: newText,\n    type: newType,\n    data: getDefaultBlockData(newType, data),\n  });\n  const newContentState = contentState.merge({\n    blockMap: blockMap.set(key, newBlock),\n    selectionAfter: selectionState.merge({\n      anchorOffset: 0,\n      focusOffset: 0,\n    }),\n  });\n  return EditorState.push(editorState, newContentState, 'change-block-type');\n};\n\n\n/*\nUpdate block-level metadata of the given `block` to the `newData`/\n*/\nexport const updateDataOfBlock = (editorState, block, newData) => {\n  const contentState = editorState.getCurrentContent();\n  const newBlock = block.merge({\n    data: newData,\n  });\n  const newContentState = contentState.merge({\n    blockMap: contentState.getBlockMap().set(block.getKey(), newBlock),\n  });\n  return EditorState.push(editorState, newContentState, 'change-block-type');\n  // return editorState;\n};\n\nexport const updateTextOfBlock = (editorState, block, text) => {\n  const contentState = editorState.getCurrentContent();\n  const newBlock = block.merge({\n    text: text,\n  });\n  const newContentState = contentState.merge({\n    blockMap: contentState.getBlockMap().set(block.getKey(), newBlock),\n  });\n\n  return EditorState.push(editorState, newContentState, 'change-block-type');\n  // return editorState;\n};\n\n// const BEFORE = -1;\n// const AFTER = 1;\n\n/*\nUsed from [react-rte](https://github.com/sstur/react-rte/blob/master/src/lib/insertBlockAfter.js)\nby [sstur](https://github.com/sstur)\n*/\nexport const addNewBlockAt = (\n    editorState,\n    pivotBlockKey,\n    newBlockType = \"unstyled\",\n    initialData = {}\n  ) => {\n  const content = editorState.getCurrentContent();\n  const blockMap = content.getBlockMap();\n  const block = blockMap.get(pivotBlockKey);\n  const blocksBefore = blockMap.toSeq().takeUntil((v) => (v === block));\n  const blocksAfter = blockMap.toSeq().skipUntil((v) => (v === block)).rest();\n  const newBlockKey = genKey();\n\n  const newBlock = new ContentBlock({\n    key: newBlockKey,\n    type: newBlockType,\n    text: '',\n    characterList: block.getCharacterList().slice(0, 0),\n    depth: 0,\n    data: Map(getDefaultBlockData(newBlockType, initialData)),\n  });\n\n  const newBlockMap = blocksBefore.concat(\n    [[pivotBlockKey, block], [newBlockKey, newBlock]],\n    blocksAfter\n  ).toOrderedMap();\n\n  const selection = editorState.getSelection();\n\n  const newContent = content.merge({\n    blockMap: newBlockMap,\n    selectionBefore: selection,\n    selectionAfter: selection.merge({\n      anchorKey: newBlockKey,\n      anchorOffset: 0,\n      focusKey: newBlockKey,\n      focusOffset: 0,\n      isBackward: false,\n    }),\n  });\n  return EditorState.push(editorState, newContent, 'split-block');\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/model/index.js\n **/","/*\nReturns the `boundingClientRect` of the passed selection.\n*/\nexport const getSelectionRect = (selected) => {\n  const _rect = selected.getRangeAt(0).getBoundingClientRect();\n  // selected.getRangeAt(0).getBoundingClientRect()\n  let rect = _rect && _rect.top ? _rect : selected.getRangeAt(0).getClientRects()[0];\n  if (!rect) {\n    if (selected.anchorNode && selected.anchorNode.getBoundingClientRect) {\n      rect = selected.anchorNode.getBoundingClientRect();\n      rect.isEmptyline = true;\n    } else {\n      return null;\n    }\n  }\n  return rect;\n};\n\n/*\nReturns the native selection node.\n*/\nexport const getSelection = (root) => {\n  let t = null;\n  if (root.getSelection) {\n    t = root.getSelection();\n  } else if (root.document.getSelection) {\n    t = root.document.getSelection();\n  } else if (root.document.selection) {\n    t = root.document.selection.createRange().text;\n  }\n  return t;\n};\n\n/*\nRecursively finds the DOM Element of the block where the cursor is currently present.\nIf not found, returns null.\n*/\nexport const getSelectedBlockNode = (root) => {\n  const selection = root.getSelection();\n  if (selection.rangeCount === 0) {\n    return null;\n  }\n  let node = selection.getRangeAt(0).startContainer;\n  // console.log(node);\n  do {\n    if (node.getAttribute && node.getAttribute('data-block') === 'true') {\n      return node;\n    }\n    node = node.parentNode;\n    // console.log(node);\n  } while (node !== null);\n  return null;\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/selection.js\n **/","import React from 'react'\nimport { Entity } from 'draft-js'\n\nexport default class Link extends React.Component {\n\n  constructor(props) {\n    super(props)\n    this._validateLink = this._validateLink.bind(this)\n    this._checkProtocol = this._checkProtocol.bind(this)\n    this._showPopLinkOver = this._showPopLinkOver.bind(this)\n    this._hidePopLinkOver = this._hidePopLinkOver.bind(this)\n    this.isHover = false\n  }\n\n  _validateLink() {\n    const pattern = new RegExp('^(https?:\\/\\/)?' + // protocol\n    '((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|' + // domain name\n    '((\\d{1,3}\\.){3}\\d{1,3}))' + // OR ip (v4) address\n    '(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*' + // port and path\n    '(\\?[&a-z\\d%_.~+=-]*)?' + // query string\n    '(\\#[-a-z\\d_]*)?$', 'i') // fragment locater\n    if (!pattern.test(str)) {\n      alert(\"Please enter a valid URL.\")\n      return false\n    } else {\n      return true\n    }\n  }\n\n  _checkProtocol() {\n    return console.log(\"xcvd\")\n  }\n\n  _showPopLinkOver(e) {\n    if (!this.data.showPopLinkOver) {\n      return\n    }\n    return this.data.showPopLinkOver(this.refs.link)\n  }\n\n  _hidePopLinkOver(e) {\n    if (!this.data.hidePopLinkOver) {\n      return\n    }\n    return this.data.hidePopLinkOver()\n  }\n\n  render() {\n    this.data = Entity.get(this.props.entityKey).getData()\n\n    return (\n      <a\n        ref=\"link\"\n        href={ this.data.url }\n        className=\"markup--anchor\"\n        onMouseOver={ this._showPopLinkOver }\n        onMouseOut={ this._hidePopLinkOver }\n      >\n        { this.props.children }\n      </a>\n    )\n  }\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/decorators/link.js\n **/","import { Entity } from 'draft-js'\n\n//TODO: what the f*ck is happening here? ;-;\nconst findEntities = (entityType, instance, contentBlock, callback) => {\n  return contentBlock.findEntityRanges((function(_this) {\n    return function(character) {\n      var entityKey, opts, res\n      entityKey = character.getEntity()\n      return (res = entityKey !== null && Entity.get(entityKey).getType() === entityType, res ? (opts = {\n        showPopLinkOver: instance.showPopLinkOver,\n        hidePopLinkOver: instance.hidePopLinkOver\n      }, Entity.mergeData(entityKey, opts)) : void 0, res)\n    }\n  })(this), callback)\n}\n\nexport default findEntities\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/find_entities.js\n **/","module.exports = global[\"Dante\"] = require(\"-!/Users/michelson/Documents/brunch-apps/dante2/node_modules/babel-loader/lib/index.js?presets[]=es2015!/Users/michelson/Documents/brunch-apps/dante2/src/components/dante.js\");\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/dante.js\n **/","module.exports = global[\"DanteEditor\"] = require(\"-!/Users/michelson/Documents/brunch-apps/dante2/node_modules/babel-loader/lib/index.js?presets[]=es2015!/Users/michelson/Documents/brunch-apps/dante2/src/components/dante_editor.js\");\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/dante_editor.js\n **/","\nimport React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport { Entity, RichUtils, AtomicBlockUtils, EditorBlock } from 'draft-js'\n\nimport axios from \"axios\"\n\nimport { updateDataOfBlock } from '../../model/index.js'\n\nexport default class EmbedBlock extends React.Component {\n  constructor(props) {\n    super(props)\n    //api_key = \"86c28a410a104c8bb58848733c82f840\"\n\n    this.updateData = this.updateData.bind(this)\n    this.dataForUpdate = this.dataForUpdate.bind(this)\n    this.componentDidMount = this.componentDidMount.bind(this)\n    this.state = {\n      embed_data: this.defaultData(),\n      error: \"\"\n    }\n  }\n\n  defaultData() {\n    const existing_data = this.props.block.getData().toJS()\n    return existing_data.embed_data || {}\n  }\n\n  // will update block state\n  updateData() {\n    const { block, blockProps } = this.props\n    const { getEditorState, setEditorState } = this.props.blockProps\n    const data = block.getData()\n    const newData = data.merge(this.state)\n    return setEditorState(updateDataOfBlock(getEditorState(), block, newData))\n  }\n\n  dataForUpdate() {\n\n    return this.props.blockProps.data.toJS()\n  }\n\n  componentDidMount() {\n\n    if (!this.props.blockProps.data) {\n      return\n    }\n\n    // ensure data isnt already loaded\n    // unless @dataForUpdate().endpoint or @dataForUpdate().provisory_text\n\n    if (!this.dataForUpdate().endpoint && !this.dataForUpdate().provisory_text) {\n      //debugger\n      return\n    }\n\n    return axios({\n      method: 'get',\n      url: `${ this.dataForUpdate().endpoint }${ this.dataForUpdate().provisory_text }&scheme=https`\n    }).then(result => {\n\n      return this.setState({ embed_data: result.data } //JSON.parse(data.responseText)\n      , this.updateData)\n    }).catch(error => {\n\n      this.setState({\n        error: error.response.data.error_message })\n      return console.log(\"TODO: error\")\n    })\n  }\n\n  classForImage() {\n    if (this.state.embed_data.images) {\n      return \"\"\n    } else {\n      return \"mixtapeImage--empty u-ignoreBlock\"\n    }\n  }\n  //if @state.embed_data.thumbnail_url then \"\" else \"mixtapeImage--empty u-ignoreBlock\"\n\n  picture() {\n    if (this.state.embed_data.images && this.state.embed_data.images.length > 0) {\n      return this.state.embed_data.images[0].url\n    } else {\n      return \"\"\n    }\n  }\n\n  render() {\n    //block = @.props\n    //foo = @.props.blockProps\n    //data = Entity.get(block.block.getEntityAt(0)).getData()\n    console.log(\"ERROR\", this.state.error)\n    return (\n      <span>\n        { this.picture()\n          ? <a\n              target='_blank'\n              className={ `js-mixtapeImage mixtapeImage ${ this.classForImage() }` }\n              href={ this.state.embed_data.url }\n              style={ { backgroundImage: `url('${ this.picture() }')` } }\n            />\n          : undefined\n        }\n        { this.state.error ? \n          <h2>{ this.state.error }</h2>\n          : undefined\n        }\n        <a\n          className='markup--anchor markup--mixtapeEmbed-anchor'\n          target='_blank'\n          href={ this.state.embed_data.url }\n        >\n          <strong className='markup--strong markup--mixtapeEmbed-strong'>\n            { this.state.embed_data.title }\n          </strong>\n          <em className='markup--em markup--mixtapeEmbed-em'>\n            { this.state.embed_data.description }\n          </em>\n        </a>{ this.state.embed_data.provider_url }\n      </span>\n    )\n  }\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/blocks/embed.js\n **/","import React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport {\n  Entity, \n  RichUtils, \n  AtomicBlockUtils, \n  EditorBlock, \n  EditorState } from 'draft-js'\n\nimport axios from \"axios\"\n\nimport { updateDataOfBlock } from '../../model/index.js'\n\nexport default class ImageBlock extends React.Component {\n\n  constructor(props) {\n    super(props)\n\n    this.blockPropsSrc = this.blockPropsSrc.bind(this)\n    this.defaultUrl = this.defaultUrl.bind(this)\n    this.defaultAspectRatio = this.defaultAspectRatio.bind(this)\n    this.updateData = this.updateData.bind(this)\n    this.replaceImg = this.replaceImg.bind(this)\n    this.startLoader = this.startLoader.bind(this)\n    this.stopLoader = this.stopLoader.bind(this)\n    this.handleUpload = this.handleUpload.bind(this)\n    this.aspectRatio = this.aspectRatio.bind(this)\n    this.updateDataSelection = this.updateDataSelection.bind(this)\n    this.handleGrafFigureSelectImg = this.handleGrafFigureSelectImg.bind(this)\n    this.getUploadUrl = this.getUploadUrl.bind(this)\n    this.uploadFile = this.uploadFile.bind(this)\n    this.uploadCompleted = this.uploadCompleted.bind(this)\n    this.updateProgressBar = this.updateProgressBar.bind(this)\n    this.placeHolderEnabled = this.placeHolderEnabled.bind(this)\n    this.placeholderText = this.placeholderText.bind(this)\n    this.handleFocus = this.handleFocus.bind(this)\n    this.render = this.render.bind(this)\n    let existing_data = this.props.block.getData().toJS()\n\n    this.config = this.props.blockProps.config\n    this.file = this.props.blockProps.data.get('file')\n    this.state = {\n      loading: false,\n      selected: false,\n      loading_progress: 0,\n      enabled: false,\n      caption: this.defaultPlaceholder(),\n      direction: existing_data.direction || \"center\",\n      width: 0,\n      height: 0,\n      file: null,\n      url: this.blockPropsSrc() || this.defaultUrl(existing_data),\n      aspect_ratio: this.defaultAspectRatio(existing_data)\n    }\n  }\n\n  blockPropsSrc() {\n    // console.log @.props.blockProps.data.src\n    return this.props.blockProps.data.src\n  }\n  /*\n  debugger\n  block = @.props\n  entity = block.block.getEntityAt(0)\n  if entity\n    data = Entity.get(entity).getData().src\n  else\n    null\n  */\n\n  defaultUrl(data) {\n    if (data.url) {\n      return data.url\n    }\n\n    if (data.url) {\n      if (data.file) {\n        return URL.createObjectURL(data.file)\n      } else {\n        return data.url\n      }\n    } else {\n      return this.props.blockProps.data.src\n    }\n  }\n\n  defaultPlaceholder() {\n    return this.props.blockProps.config.image_caption_placeholder\n  }\n\n  defaultAspectRatio(data) {\n    if (data.aspect_ratio) {\n      return {\n        width: data.aspect_ratio['width'],\n        height: data.aspect_ratio['height'],\n        ratio: data.aspect_ratio['ratio']\n      }\n    } else {\n      return {\n        width: 0,\n        height: 0,\n        ratio: 100\n      }\n    }\n  }\n\n  getAspectRatio(w, h) {\n    let maxWidth = 1000\n    let maxHeight = 1000\n    let ratio = 0\n    let width = w // Current image width\n    let height = h // Current image height\n\n    // Check if the current width is larger than the max\n    if (width > maxWidth) {\n      ratio = maxWidth / width // get ratio for scaling image\n      height = height * ratio // Reset height to match scaled image\n      width = width * ratio // Reset width to match scaled image\n\n      // Check if current height is larger than max\n    } else if (height > maxHeight) {\n      ratio = maxHeight / height // get ratio for scaling image\n      width = width * ratio // Reset width to match scaled image\n      height = height * ratio // Reset height to match scaled image\n    }\n\n    let fill_ratio = height / width * 100\n    let result = { width, height, ratio: fill_ratio }\n    // console.log result\n    return result\n  }\n\n  // will update block state\n  updateData() {\n    let { blockProps } = this.props\n    let { block } = this.props\n    let { getEditorState } = this.props.blockProps\n    let { setEditorState } = this.props.blockProps\n    let data = block.getData()\n    let newData = data.merge(this.state).merge({ forceUpload: false })\n    return setEditorState(updateDataOfBlock(getEditorState(), block, newData))\n  }\n\n  replaceImg() {\n    this.img = new Image()\n    this.img.src = this.refs.image_tag.src\n    this.setState({\n      url: this.img.src })\n    let self = this\n    // exit only when not blob and not forceUload\n    if (!this.img.src.includes(\"blob:\") && !this.props.block.data.get(\"forceUpload\")) {\n      return\n    }\n    return this.img.onload = () => {\n      this.setState({\n        width: this.img.width,\n        height: this.img.height,\n        aspect_ratio: self.getAspectRatio(this.img.width, this.img.height)\n      })\n\n      return this.handleUpload()\n    }\n  }\n\n  startLoader() {\n    return this.setState({\n      loading: true })\n  }\n\n  stopLoader() {\n    return this.setState({\n      loading: false })\n  }\n\n  handleUpload() {\n    this.startLoader()\n    this.props.blockProps.addLock()\n    this.updateData()\n    return this.uploadFile()\n  }\n\n  componentDidMount() {\n    return this.replaceImg()\n  }\n\n  aspectRatio() {\n    return {\n      maxWidth: `${ this.state.aspect_ratio.width }`,\n      maxHeight: `${ this.state.aspect_ratio.height }`,\n      ratio: `${ this.state.aspect_ratio.height }`\n    }\n  }\n\n  updateDataSelection() {\n    const { getEditorState, setEditorState } = this.props.blockProps\n    const newselection = getEditorState().getSelection().merge({\n      anchorKey: this.props.block.getKey(),\n      focusKey: this.props.block.getKey()\n    })\n\n    return setEditorState(EditorState.forceSelection(getEditorState(), newselection))\n  }\n\n  handleGrafFigureSelectImg(e) {\n    e.preventDefault()\n    return this.setState({ selected: true }, this.updateDataSelection)\n  }\n\n  //main_editor.onChange(main_editor.state.editorState)\n\n  coords() {\n    return {\n      maxWidth: `${ this.state.aspect_ratio.width }px`,\n      maxHeight: `${ this.state.aspect_ratio.height }px`\n    }\n  }\n\n  getBase64Image(img) {\n    let canvas = document.createElement(\"canvas\")\n    canvas.width = img.width\n    canvas.height = img.height\n    let ctx = canvas.getContext(\"2d\")\n    ctx.drawImage(img, 0, 0)\n    let dataURL = canvas.toDataURL(\"image/png\")\n\n    return dataURL\n  }\n\n  formatData() {\n    let formData = new FormData()\n    if (this.file) {\n      let formName = this.config.upload_formName || 'file'\n\n      formData.append(formName, this.file)\n      return formData\n    } else {\n      formData.append('url', this.props.blockProps.data.get(\"url\"))\n      return formData\n    }\n  }\n\n  getUploadUrl() {\n    let url = this.config.upload_url\n    if (typeof url === \"function\") {\n      return url()\n    } else {\n      return url\n    }\n  }\n\n  getUploadHeaders()  {\n   return this.config.upload_headers || {}\n  }\n\n  uploadFile() {\n    let handleUp\n    axios({\n      method: 'post',\n      url: this.getUploadUrl(),\n      headers: this.getUploadHeaders(),\n      data: this.formatData(),\n      onUploadProgress: e => {\n        return this.updateProgressBar(e)\n      }\n    }).then(result => {\n      this.uploadCompleted(result.data)\n      this.props.blockProps.removeLock()\n      this.stopLoader()\n      this.file = null\n\n      if (this.config.upload_callback) {\n        return this.config.upload_callback(result, this)\n      }\n    }).catch(error => {\n      this.props.blockProps.removeLock()\n      this.stopLoader()\n\n      console.log(`ERROR: got error uploading file ${ error }`)\n      if (this.config.upload_error_callback) {\n        return this.config.upload_error_callback(error, this)\n      }\n    })\n\n    return handleUp = json_response => {\n      return this.uploadCompleted(json_response, n)\n    }\n  }\n\n  uploadCompleted(json) {\n    return this.setState({ url: json.url }, this.updateData)\n  }\n\n  updateProgressBar(e) {\n    let complete = this.state.loading_progress\n    if (e.lengthComputable) {\n      complete = e.loaded / e.total * 100\n      complete = complete != null ? complete : { complete: 0 }\n      this.setState({\n        loading_progress: complete })\n      return console.log(`complete: ${ complete }`)\n    }\n  }\n\n  placeHolderEnabled() {\n    return this.state.enabled || this.props.block.getText()\n  }\n\n  placeholderText() {\n    if (this.placeHolderEnabled()) {\n      return \"\"\n    }\n    return \"Write caption for image (optional)\"\n  }\n\n  handleFocus(e) {\n    // console.log \"focus on placeholder\"\n    return setTimeout(() => {\n      return this.setState({\n        enabled: true })\n    }, 0)\n  }\n\n  render() {\n\n    return (\n      <div ref=\"image_tag2\" suppressContentEditableWarning={true}>\n        <div className=\"aspectRatioPlaceholder is-locked\" \n          style={this.coords()} \n          onClick={this.handleGrafFigureSelectImg}>\n          <div style={{ paddingBottom: `${ this.state.aspect_ratio.ratio }%` }} \n            className='aspect-ratio-fill' />\n          <img src={this.state.url} \n            ref=\"image_tag\" \n            height={this.state.aspect_ratio.height} \n            width={this.state.aspect_ratio.width} \n            className='graf-image' />\n          <Loader toggle={this.state.loading} \n            progress={this.state.loading_progress} />\n        </div>\n        <figcaption className='imageCaption' onMouseDown={this.handleFocus}>\n          { !this.state.enabled ? \n            <span className=\"danteDefaultPlaceholder\">\n              {this.placeholderText()}\n            </span> : undefined}\n          <EditorBlock {...Object.assign({}, this.props, { \n            \"editable\": true, \"className\": \"imageCaption\" })\n            } />\n        </figcaption>\n      </div>\n    )\n  }\n}\n\nclass Loader extends React.Component {\n\n  render() {\n    return (\n      <div>\n        { this.props.toggle\n          ? <div className=\"image-upoader-loader\">\n              <p>\n                { this.props.progress === 100\n                  ? \"processing image...\"\n                  : <span>\n                      <span>loading</span> { Math.round( this.props.progress ) }\n                    </span>\n                }\n              </p>\n            </div>\n          : undefined\n        }\n      </div>\n    )\n  }\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/blocks/image.js\n **/","\nimport React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport { Entity, RichUtils, AtomicBlockUtils, EditorBlock } from 'draft-js'\n\nexport default class PlaceholderBlock extends React.Component {\n  constructor(props) {\n    super(props)\n    this.placeholderText = this.placeholderText.bind(this)\n    this.placeholderFromProps = this.placeholderFromProps.bind(this)\n    this.defaultText = this.defaultText.bind(this)\n    this.handleFocus = this.handleFocus.bind(this)\n    this.classForDefault = this.classForDefault.bind(this)\n    this.state = {\n      enabled: false,\n      data: this.props.blockProps.data.toJS()\n    }\n  }\n\n  placeholderText() {\n    if (this.state.enabled) {\n      return \"\"\n    }\n    return this.props.blockProps.data.toJS().placeholder || this.placeholderFromProps() || this.defaultText()\n  }\n  //if @.props.blockProps.data then @.props.blockProps.data.placeholder else @defaultText()\n\n\n  placeholderFromProps() {\n    return this.props.block.toJS().placeholder\n  }\n\n  defaultText() {\n    return \"write something \"\n  }\n\n  componentDidMount() {}\n\n  handleFocus(e) {\n    // console.log \"focus on placeholder\"\n    return setTimeout(() => {\n      return this.setState({\n        enabled: true })\n    }, 0)\n  }\n\n  classForDefault() {\n    if (!this.state.enabled) {\n      return \"defaultValue defaultValue--root\"\n    } else {\n      return \"\"\n    }\n  }\n\n  render() {\n    return (\n      <span className={this.classForDefault()} onMouseDown={this.handleFocus}>\n        {this.placeholderText()}\n        <EditorBlock {...Object.assign({}, this.props, {\n          \"className\": \"imageCaption\",\n          \"placeholder\": \"escrive alalal\"\n        })} />\n      </span>\n    )\n  }\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/blocks/placeholder.js\n **/","\nimport React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport { Entity, RichUtils, AtomicBlockUtils, EditorBlock } from 'draft-js'\n\nimport { updateDataOfBlock } from '../../model/index.js'\n\nimport axios from \"axios\"\n\nexport default class VideoBlock extends React.Component {\n  constructor(props) {\n    super(props)\n    //api_key = \"86c28a410a104c8bb58848733c82f840\"\n\n    this.updateData = this.updateData.bind(this)\n    this.dataForUpdate = this.dataForUpdate.bind(this)\n    this.state = { embed_data: this.defaultData() }\n  }\n\n  defaultData() {\n    let existing_data = this.props.block.getData().toJS()\n    return existing_data.embed_data || {}\n  }\n\n  // will update block state\n  updateData() {\n    const { block, blockProps } = this.props\n    const { getEditorState, setEditorState } = this.props.blockProps\n    const data = block.getData()\n    const newData = data.merge(this.state)\n    return setEditorState(updateDataOfBlock(getEditorState(), block, newData))\n  }\n\n  dataForUpdate() {\n    return this.props.blockProps.data.toJS()\n  }\n\n  componentDidMount() {\n\n    if (!this.props.blockProps.data) {\n      return\n    }\n    // ensure data isnt already loaded\n    if (!this.dataForUpdate().endpoint && !this.dataForUpdate().provisory_text) {\n      return\n    }\n\n    return axios({\n      method: 'get',\n      url: `${ this.dataForUpdate().endpoint }${ this.dataForUpdate().provisory_text }&scheme=https`\n    }).then(result => {\n      return this.setState({ embed_data: result.data } //JSON.parse(data.responseText)\n      , this.updateData)\n    }).catch(error => {\n      return console.log(\"TODO: error\")\n    })\n  }\n\n  classForImage() {\n    if (this.state.embed_data.thumbnail_url) {\n      return \"\"\n    } else {\n      return \"mixtapeImage--empty u-ignoreBlock\"\n    }\n  }\n\n  render() {\n    return (\n      <figure className='graf--figure graf--iframe graf--first' tabIndex='0'>\n        <div className='iframeContainer' \n          dangerouslySetInnerHTML={ { __html: this.state.embed_data.html } } />\n        <figcaption className='imageCaption'>\n          <EditorBlock {...Object.assign({}, this.props, { \"className\": \"imageCaption\" })} />\n        </figcaption>\n      </figure>\n    )\n  }\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/blocks/video.js\n **/","import React from 'react'\n\nclass Debug extends React.Component {\n\n  constructor() {\n    super()\n\n    this.handleToggleReadOnly = this.handleToggleReadOnly.bind(this)\n    this.handleTestEmitAndDecode = this.handleTestEmitAndDecode.bind(this)\n    this.handleTestEmitTEXT = this.handleTestEmitTEXT.bind(this)\n    this.testEmitAndDecode = this.testEmitAndDecode.bind(this)\n    this.testEmitTEXT = this.testEmitTEXT.bind(this)\n    this.logState = this.logState.bind(this)\n    this.toggleDisplay = this.toggleDisplay.bind(this)\n    this.open = this.open.bind(this)\n    this.render = this.render.bind(this)\n    this.state = {\n      output: \"\",\n      display: \"none\"\n    }\n  }\n\n  handleToggleReadOnly(e) {\n    e.preventDefault()\n    this.props.editor.toggleEditable()\n    return false\n  }\n\n  handleTestEmitAndDecode(e) {\n    e.preventDefault()\n    return this.testEmitAndDecode()\n  }\n\n  handleTestEmitTEXT(e) {\n    e.preventDefault()\n    return this.testEmitTEXT()\n  }\n\n  testEmitAndDecode(e) {\n    const raw_as_json = this.props.editor.emitSerializedOutput()\n    this.props.editor.setState({ \n      editorState: this.props.editor.decodeEditorContent(raw_as_json) }, \n      this.logState(JSON.stringify(raw_as_json)))\n    return false\n  }\n\n  testEmitTEXT() {\n    const text = this.props.editor.getTextFromEditor()\n    return this.logState(text)\n  }\n\n  logState(raw) {\n    return this.setState({ output: raw }, this.open)\n  }\n\n  toggleDisplay(e) {\n    e.preventDefault()\n    const d = this.state.display === \"block\" ? \"none\" : this.state.display\n    return this.setState({\n      display: d })\n  }\n\n  open() {\n    return this.setState({\n      display: \"block\" })\n  }\n\n  render() {\n    return (\n      <div>\n        <div className=\"debugControls\">\n          <ul>\n            <li> LOCKS: { this.props.editor.state.locks } </li>\n            <li>\n              <a href=\"#\" onClick={ this.handleToggleReadOnly }>\n                EDITABLE: { this.props.editor.state.read_only ? 'NO' : 'YES' }\n              </a>\n            </li>\n            <li>\n              <a href=\"#\" onClick={ this.handleTestEmitTEXT }>EDITOR TEXT</a>\n            </li>\n            <li>\n              <a href=\"#\" onClick={ this.handleTestEmitAndDecode }>EDITOR STATE</a>\n            </li>\n          </ul>\n        </div>\n        <div className=\"debugZone\" style={ { display: this.state.display } }>\n          <a href=\"#\" className=\"dante-debug-close close\" onClick={ this.toggleDisplay } />\n          <div className=\"debugOutput\">\n            <h2>EDITOR OUTPUT</h2>\n            {\n              this.state.output.length > 0\n              ? <pre>{ this.state.output }</pre>\n              : undefined\n            }\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default Debug\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/debug.js\n **/","import React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport { \n  Entity, \n  RichUtils, \n  AtomicBlockUtils, \n  EditorState \n  } from 'draft-js'\n\nimport { \n  addNewBlock, \n  resetBlockWithType, \n  updateDataOfBlock, \n  getCurrentBlock, \n  getNode } from '../../model/index.js'\n\nimport { getSelectionRect, getSelection } from \"../../utils/selection.js\"\n\nclass DanteInlineTooltip extends React.Component {\n\n  constructor(props) {\n    super(props)\n\n    this.display = this.display.bind(this)\n    this.show = this.show.bind(this)\n    this.hide = this.hide.bind(this)\n    this._toggleScaled = this._toggleScaled.bind(this)\n    this.scale = this.scale.bind(this)\n    this.collapse = this.collapse.bind(this)\n    this.componentWillReceiveProps = this.componentWillReceiveProps.bind(this)\n    this.clickOnFileUpload = this.clickOnFileUpload.bind(this)\n    this.handlePlaceholder = this.handlePlaceholder.bind(this)\n    this.insertImage = this.insertImage.bind(this)\n    this.handleFileInput = this.handleFileInput.bind(this)\n    this.widgets = this.widgets.bind(this)\n    this.clickHandler = this.clickHandler.bind(this)\n    this.relocate = this.relocate.bind(this)\n    this.state = {\n      position: { top: 0, left: 0 },\n      show: false,\n      scaled: false\n    }\n  }\n\n  display(b) {\n    if (b) {\n      return this.show()\n    } else {\n      return this.hide()\n    }\n  }\n\n  show() {\n    return this.setState({\n      show: true })\n  }\n\n  hide() {\n    return this.setState({\n      show: false })\n  }\n\n  setPosition(coords) {\n    return this.setState({\n      position: coords })\n  }\n\n  _toggleScaled(ev) {\n    if (this.state.scaled) {\n      return this.collapse()\n    } else {\n      return this.scale()\n    }\n  }\n\n  scale() {\n    return this.setState({\n      scaled: true })\n  }\n\n  collapse() {\n    return this.setState({\n      scaled: false })\n  }\n\n  componentWillReceiveProps(newProps) {\n    return this.collapse()\n  }\n\n  activeClass() {\n    //if @props.show then \"is-active\" else \"\"\n    if (this.isActive()) {\n      return \"is-active\"\n    } else {\n      return \"\"\n    }\n  }\n\n  isActive() {\n    return this.state.show\n  }\n\n  scaledClass() {\n    if (this.state.scaled) {\n      return \"is-scaled\"\n    } else {\n      return \"\"\n    }\n  }\n\n  scaledWidth() {\n    if (this.state.scaled) {\n      return \"124\"\n    } else {\n      return \"0\"\n    }\n  }\n\n  clickOnFileUpload() {\n    this.refs.fileInput.click()\n    this.collapse()\n    return this.hide()\n  }\n\n  handlePlaceholder(input) {\n    let opts = {\n      type: input.widget_options.insert_block,\n      placeholder: input.options.placeholder,\n      endpoint: input.options.endpoint\n    }\n\n    return this.props.onChange(resetBlockWithType(this.props.editorState, 'placeholder', opts))\n  }\n\n  insertImage(file) {\n    let opts = {\n      url: URL.createObjectURL(file),\n      file\n    }\n\n    return this.props.onChange(addNewBlock(this.props.editorState, 'image', opts))\n  }\n\n  handleFileInput(e) {\n    let fileList = e.target.files\n    // TODO: support multiple file uploads\n    /*\n    Object.keys(fileList).forEach (o)=>\n      @.insertImage(fileList[0])\n    */\n    return this.insertImage(fileList[0])\n  }\n\n  widgets() {\n    return this.props.editor.widgets\n  }\n\n  clickHandler(e, type) {\n    let request_block = this.widgets().find(o => o.icon === type)\n\n    switch (request_block.widget_options.insertion) {\n      case \"upload\":\n        return this.clickOnFileUpload(e, request_block)\n      case \"placeholder\":\n        return this.handlePlaceholder(request_block)\n      default:\n        return console.log(`WRONG TYPE FOR ${ request_block.widget_options.insertion }`)\n    }\n  }\n\n  getItems() {\n    return this.widgets().filter(o => {\n      return o.widget_options.displayOnInlineTooltip\n    })\n  }\n\n  isDescendant(parent, child) {\n    let node = child.parentNode\n    while (node !== null) {\n      if (node === parent) {\n        return true\n      }\n      node = node.parentNode\n    }\n    return false\n  }\n\n  relocate() {\n    let { editorState } = this.props\n\n    if (editorState.getSelection().isCollapsed()) {\n\n      let currentBlock = getCurrentBlock(editorState)\n      let blockType = currentBlock.getType()\n\n      let contentState = editorState.getCurrentContent()\n      let selectionState = editorState.getSelection()\n\n      let block = contentState.getBlockForKey(selectionState.anchorKey)\n\n      let nativeSelection = getSelection(window)\n      if (!nativeSelection.rangeCount) {\n        return\n      }\n\n      let node = getNode()\n\n      let selectionBoundary = getSelectionRect(nativeSelection)\n      let coords = selectionBoundary //utils.getSelectionDimensions(node)\n\n      let parent = ReactDOM.findDOMNode(this.props.editor)\n      let parentBoundary = parent.getBoundingClientRect()\n\n      // hide if selected node is not in editor\n      // debugger\n      //console.log @isDescendant(parent, nativeSelection.anchorNode)\n\n      if (!this.isDescendant(parent, nativeSelection.anchorNode)) {\n        this.hide()\n        return\n      }\n\n      // checkeamos si esta vacio\n      this.display(block.getText().length === 0 && blockType === \"unstyled\")\n      return this.setPosition({\n        top: coords.top + window.scrollY,\n        left: coords.left + window.scrollX - 60\n      })\n\n      /*\n      @refs.image_popover.display(blockType is \"image\")\n       if blockType is \"image\"\n        selectionBoundary = node.anchorNode.parentNode.parentNode.parentNode.getBoundingClientRect()\n        *el = document.querySelector(\"#dante_image_popover\")\n        el = @refs.image_popover.refs.image_popover\n        padd   = el.offsetWidth / 2\n        @refs.image_popover.setPosition\n          top: selectionBoundary.top - parentBoundary.top + 60\n          left: selectionBoundary.left + (selectionBoundary.width / 2) - padd\n\n        *@setState\n        *  image_popover_position:\n        *    top: selectionBoundary.top - parentBoundary.top + 60\n        *    left: selectionBoundary.left + (selectionBoundary.width / 2) - padd\n        *\n      */\n    } else {\n      return this.hide()\n    }\n  }\n\n  render() {\n    return (\n      <div\n        className={ `inlineTooltip ${ this.activeClass() } ${ this.scaledClass() }` }\n        style={ this.state.position }\n      >\n        <button\n          className=\"inlineTooltip-button control\"\n          title=\"Close Menu\"\n          data-action=\"inline-menu\"\n          onClick={ this._toggleScaled }\n        >\n          <span className=\"tooltip-icon dante-icon-plus\" />\n        </button>\n        <div\n           className=\"inlineTooltip-menu\"\n           style={ { width: `${ this.scaledWidth() }px` } }\n         >\n          { this.getItems().map( (item, i) => {\n            return  <InlineTooltipItem\n                      item={ item }\n                      key={ i }\n                      clickHandler={ this.clickHandler }\n                    />\n            })\n          }\n          <input\n           type=\"file\"\n           style={ { display: 'none' } }\n           ref=\"fileInput\"\n           multiple=\"multiple\"\n           onChange={ this.handleFileInput }\n         />\n        </div>\n      </div>\n    )\n  }\n}\n\nclass InlineTooltipItem extends React.Component {\n\n  constructor(...args) {\n    super(...args)\n    this.clickHandler = this.clickHandler.bind(this)\n  }\n\n  clickHandler(e) {\n    e.preventDefault()\n    return this.props.clickHandler(e, this.props.item.icon)\n  }\n\n  render() {\n    return (\n      <button\n        className=\"inlineTooltip-button scale\"\n        title={ this.props.title }\n        onMouseDown={ this.clickHandler }\n      >\n        <span className={ `tooltip-icon dante-icon-${ this.props.item.icon }` } />\n      </button>\n    )\n  }\n}\n\nexport default DanteInlineTooltip\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/popovers/addButton.js\n **/","\nimport React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport { Entity, RichUtils, AtomicBlockUtils, EditorState } from 'draft-js'\n\nimport { getSelectionRect, getSelection } from \"../../utils/selection.js\"\n\nimport { getCurrentBlock, getNode } from '../../model/index.js'\n\nclass DanteImagePopover extends React.Component {\n\n  constructor(props) {\n    super(props)\n\n    this.display = this.display.bind(this)\n    this.show = this.show.bind(this)\n    this.hide = this.hide.bind(this)\n    this._toggleScaled = this._toggleScaled.bind(this)\n    this.scale = this.scale.bind(this)\n    this.collapse = this.collapse.bind(this)\n    this.relocate = this.relocate.bind(this)\n    this.componentWillReceiveProps = this.componentWillReceiveProps.bind(this)\n    this.handleClick = this.handleClick.bind(this)\n    this.state = {\n      position: {\n        top: 0,\n        left: 0\n      },\n      show: false,\n      scaled: false,\n      buttons: [{ type: \"left\" }, \n                { type: \"center\"}, \n                { type: \"fill\" }, \n                { type: \"wide\" }]\n    }\n  }\n\n  display(b) {\n    if (b) {\n      return this.show()\n    } else {\n      return this.hide()\n    }\n  }\n\n  show() {\n    return this.setState({\n      show: true })\n  }\n\n  hide() {\n    return this.setState({\n      show: false })\n  }\n\n  setPosition(coords) {\n    return this.setState({\n      position: coords })\n  }\n\n  _toggleScaled(ev) {\n    if (this.state.scaled) {\n      return this.collapse()\n    } else {\n      return this.scale()\n    }\n  }\n\n  scale() {\n    return this.setState({\n      scaled: true })\n  }\n\n  collapse() {\n    return this.setState({\n      scaled: false })\n  }\n\n  relocate() {\n    let { editorState } = this.props\n\n    if (editorState.getSelection().isCollapsed()) {\n\n      let currentBlock = getCurrentBlock(editorState)\n      let blockType = currentBlock.getType()\n\n      let contentState = editorState.getCurrentContent()\n      let selectionState = editorState.getSelection()\n\n      let block = contentState.getBlockForKey(selectionState.anchorKey)\n\n      let nativeSelection = getSelection(window)\n      if (!nativeSelection.rangeCount) {\n        return\n      }\n\n      let node = getNode()\n\n      let selectionBoundary = getSelectionRect(nativeSelection)\n      let coords = selectionBoundary\n\n      let parent = ReactDOM.findDOMNode(this.props.editor)\n      let parentBoundary = parent.getBoundingClientRect()\n\n      this.display(blockType === \"image\")\n\n      if (blockType === \"image\") {\n        selectionBoundary = node.anchorNode.parentNode.parentNode\n                                           .parentNode.getBoundingClientRect()\n        let el = this.refs.image_popover\n        let padd = el.offsetWidth / 2\n        return this.setPosition({\n          top: selectionBoundary.top - parentBoundary.top + 60,\n          left: selectionBoundary.left + selectionBoundary.width / 2 - padd\n        })\n      }\n    } else {\n      return this.hide()\n    }\n  }\n\n  componentWillReceiveProps(newProps) {\n    return this.collapse()\n  }\n\n  getStyle() {\n    if (!this.state.position) {\n      return {}\n    }\n  }\n\n  handleClick(item) {\n    return this.props.editor.setDirection(item.type)\n  }\n\n  render() {\n    return (\n      <div\n        ref=\"image_popover\"\n        className={ `dante-popover popover--Aligntooltip popover--top popover--animated ${ this.state.show ? 'is-active' : undefined }` }\n        style={ \n          { top: this.state.position.top,\n            left: this.state.position.left }\n          }\n      >\n        <div className='popover-inner'>\n          <ul className='dante-menu-buttons'>\n            { this.state.buttons.map( (item, i) => {\n                return  <DanteImagePopoverItem\n                          item={ item }\n                          handleClick={ this.handleClick }\n                          key={ i }\n                        />\n              })\n            }\n          </ul>\n        </div>\n        <div className='popover-arrow' />\n      </div>\n    )\n  }\n}\n\nclass DanteImagePopoverItem extends React.Component {\n\n  constructor(...args) {\n    super(...args)\n    this.handleClick = this.handleClick.bind(this)\n    this.render = this.render.bind(this)\n  }\n\n  handleClick(e) {\n    e.preventDefault()\n    return this.props.handleClick(this.props.item)\n  }\n\n  render() {\n    return <li \n      className={`dante-menu-button align-${ this.props.item.type }`} \n      onMouseDown={this.handleClick}>\n        <span className={`tooltip-icon dante-icon-image-${ this.props.item.type }`} />\n    </li>\n  }\n}\n\nexport default DanteImagePopover\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/popovers/image.js\n **/","\nimport React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport { getCurrentBlock } from '../../model/index.js'\n\nclass DanteAnchorPopover extends React.Component {\n\n  constructor(props) {\n\n    super(props)\n    this.display = this.display.bind(this)\n    this.show = this.show.bind(this)\n    this.hide = this.hide.bind(this)\n    this.relocate = this.relocate.bind(this)\n    this.render = this.render.bind(this)\n    this.state = {\n      position: {\n        top: 0,\n        left: 0\n      },\n      show: false,\n      url: \"\"\n    }\n  }\n\n  display(b) {\n    if (b) {\n      return this.show()\n    } else {\n      return this.hide()\n    }\n  }\n\n  show() {\n    return this.setState({\n      show: true })\n  }\n\n  hide() {\n    return this.setState({\n      show: false })\n  }\n\n  setPosition(coords) {\n    return this.setState({\n      position: coords })\n  }\n\n  relocate(node) {\n    if (node == null) {\n      node = null\n    }\n    if (!node) {\n      return\n    }\n\n    let { editorState } = this.props\n    let currentBlock = getCurrentBlock(editorState)\n    let blockType = currentBlock.getType()\n\n    let contentState = editorState.getCurrentContent()\n    let selectionState = editorState.getSelection()\n\n    let selectionBoundary = node.getBoundingClientRect()\n    let coords = selectionBoundary\n\n    let el = this.refs.dante_popover\n    let padd = el.offsetWidth / 2\n\n    let parent = ReactDOM.findDOMNode(this.props.editor)\n    let parentBoundary = parent.getBoundingClientRect()\n\n    return {\n      top: selectionBoundary.top - parentBoundary.top + 160,\n      left: selectionBoundary.left + selectionBoundary.width / 2 - padd\n    }\n  }\n\n  render() {\n    let { position } = this.state\n    let style = {\n      left: position.left,\n      top: position.top,\n      visibility: `${ this.state.show ? 'visible' : 'hidden' }`\n    }\n    return (\n      <div\n        ref=\"dante_popover\"\n        className='dante-popover popover--tooltip popover--Linktooltip popover--bottom is-active'\n        style={ style }\n        onMouseOver={ this.props.handleOnMouseOver }\n        onMouseOut={ this.props.handleOnMouseOut }\n      >\n        <div className='popover-inner'>\n          <a href={ this.props.url } target='_blank'>\n            { this.state.url }\n          </a>\n        </div>\n        <div className='popover-arrow' />\n      </div>\n    )\n  }\n}\n\nexport default DanteAnchorPopover\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/popovers/link.js\n **/","import React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport { \n  convertToRaw, \n  CompositeDecorator, \n  getVisibleSelectionRect, \n  getDefaultKeyBinding, \n  getSelectionOffsetKeyForNode, \n  KeyBindingUtil, \n  ContentState, \n  Editor, \n  EditorState, \n  Entity, \n  RichUtils } from 'draft-js'\n\nimport { getSelectionRect, getSelection } from \"../../utils/selection.js\"\n\nimport { getCurrentBlock } from '../../model/index.js'\n\nclass DanteTooltip extends React.Component {\n\n  constructor(props) {\n    super(props)\n    this._clickInlineHandler = this._clickInlineHandler.bind(this)\n    this.display = this.display.bind(this)\n    this.show = this.show.bind(this)\n    this.hide = this.hide.bind(this)\n    this.relocate = this.relocate.bind(this)\n    this._clickBlockHandler = this._clickBlockHandler.bind(this)\n    this.displayLinkMode = this.displayLinkMode.bind(this)\n    this.displayActiveMenu = this.displayActiveMenu.bind(this)\n    this._enableLinkMode = this._enableLinkMode.bind(this)\n    this._disableLinkMode = this._disableLinkMode.bind(this)\n    this.handleInputEnter = this.handleInputEnter.bind(this)\n    this.confirmLink = this.confirmLink.bind(this)\n    this.inlineItems = this.inlineItems.bind(this)\n    this.blockItems = this.blockItems.bind(this)\n    this.getDefaultValue = this.getDefaultValue.bind(this)\n    this.getVisibleSelectionRect = getVisibleSelectionRect\n    this.state = {\n      link_mode: false,\n      show: false,\n      position: {}\n    }\n  }\n\n  _clickInlineHandler(ev, style) {\n    ev.preventDefault()\n\n    this.props.onChange(RichUtils.toggleInlineStyle(this.props.editorState, style))\n\n    return setTimeout(() => {\n      return this.relocate()\n    }, 0)\n  }\n\n  display(b) {\n    if (b) {\n      return this.show()\n    } else {\n      return this.hide()\n    }\n  }\n\n  show() {\n    return this.setState({\n      show: true })\n  }\n\n  hide() {\n    return this.setState({\n      link_mode: false,\n      show: false\n    })\n  }\n\n  setPosition(coords) {\n    return this.setState({\n      position: coords })\n  }\n\n  isDescendant(parent, child) {\n    let node = child.parentNode\n    while (node !== null) {\n      if (node === parent) {\n        return true\n      }\n      node = node.parentNode\n    }\n    return false\n  }\n\n  relocate() {\n\n    let currentBlock = getCurrentBlock(this.props.editorState)\n    let blockType = currentBlock.getType()\n    // display tooltip only for unstyled\n\n    if (this.props.configTooltip.selectionElements.indexOf(blockType) < 0) {\n      this.hide()\n      return\n    }\n\n    if (this.state.link_mode) {\n      return\n    }\n    if (!this.state.show) {\n      return\n    }\n\n    let el = this.refs.dante_menu\n    let padd = el.offsetWidth / 2\n\n    let nativeSelection = getSelection(window)\n    if (!nativeSelection.rangeCount) {\n      return\n    }\n\n    let selectionBoundary = getSelectionRect(nativeSelection)\n\n    let parent = ReactDOM.findDOMNode(this.props.editor)\n    let parentBoundary = parent.getBoundingClientRect()\n\n    // hide if selected node is not in editor\n    if (!this.isDescendant(parent, nativeSelection.anchorNode)) {\n      this.hide()\n      return\n    }\n\n    let top = selectionBoundary.top - parentBoundary.top - -90 - 5\n    let left = selectionBoundary.left + selectionBoundary.width / 2 - padd\n\n    if (!top || !left) {\n      return\n    }\n\n    // console.log \"SET SHOW FOR TOOLTIP INSERT MENU\"\n    return this.setState({\n      show: true,\n      position: {\n        left,\n        top\n      }\n    })\n  }\n\n  _clickBlockHandler(ev, style) {\n    ev.preventDefault()\n\n    this.props.onChange(RichUtils.toggleBlockType(this.props.editorState, style))\n\n    return setTimeout(() => {\n      return this.relocate()\n    }, 0)\n  }\n\n  displayLinkMode() {\n    if (this.state.link_mode) {\n      return \"dante-menu--linkmode\"\n    } else {\n      return \"\"\n    }\n  }\n\n  displayActiveMenu() {\n    if (this.state.show) {\n      return \"dante-menu--active\"\n    } else {\n      return \"\"\n    }\n  }\n\n  _enableLinkMode(ev) {\n    ev.preventDefault()\n    return this.setState({\n      link_mode: true })\n  }\n\n  _disableLinkMode(ev) {\n    ev.preventDefault()\n    return this.setState({\n      link_mode: false,\n      url: \"\"\n    })\n  }\n\n  hideMenu() {\n    return this.hide()\n  }\n\n  handleInputEnter(e) {\n    if (e.which === 13) {\n      return this.confirmLink(e)\n    }\n  }\n\n  confirmLink(e) {\n    e.preventDefault()\n    let { editorState } = this.props\n    let urlValue = e.currentTarget.value\n    let contentState = editorState.getCurrentContent()\n    let selection = editorState.getSelection()\n\n    let opts = {\n      url: urlValue,\n      showPopLinkOver: this.props.showPopLinkOver,\n      hidePopLinkOver: this.props.hidePopLinkOver\n    }\n\n    let entityKey = Entity.create('LINK', 'MUTABLE', opts)\n\n    if (selection.isCollapsed()) {\n      console.log(\"COLLAPSED SKIPPING LINK\")\n      return\n    }\n\n    this.props.onChange(RichUtils.toggleLink(editorState, selection, entityKey))\n\n    return this._disableLinkMode(e)\n  }\n\n  getPosition() {\n    let pos = this.state.position\n    return pos\n  }\n\n  inlineItems() {\n    return this.props.widget_options.block_types.filter(o => {\n      return o.type === \"inline\"\n    })\n  }\n\n  blockItems() {\n    return this.props.widget_options.block_types.filter(o => {\n      return o.type === \"block\"\n    })\n  }\n\n  getDefaultValue() {\n    if (this.refs.dante_menu_input) {\n      this.refs.dante_menu_input.value = \"\"\n    }\n\n    let currentBlock = getCurrentBlock(this.props.editorState)\n    let blockType = currentBlock.getType()\n    let selection = this.props.editor.state.editorState.getSelection()\n    let selectedEntity = null\n    let defaultUrl = null\n    return currentBlock.findEntityRanges(character => {\n      let entityKey = character.getEntity()\n      selectedEntity = entityKey\n      return entityKey !== null && Entity.get(entityKey).getType() === 'LINK'\n    }, (start, end) => {\n      let selStart = selection.getAnchorOffset()\n      let selEnd = selection.getFocusOffset()\n      if (selection.getIsBackward()) {\n        selStart = selection.getFocusOffset()\n        selEnd = selection.getAnchorOffset()\n      }\n\n      if (start === selStart && end === selEnd) {\n        defaultUrl = Entity.get(selectedEntity).getData().url\n        return this.refs.dante_menu_input.value = defaultUrl\n      }\n    })\n  }\n\n  render() {\n    return (\n      <div\n        id=\"dante-menu\"\n        ref=\"dante_menu\"\n        className={ `dante-menu ${ this.displayActiveMenu() } ${ this.displayLinkMode() }` }\n        style={ this.getPosition() }\n      >\n        <div className=\"dante-menu-linkinput\">\n          <input\n            className=\"dante-menu-input\"\n            ref=\"dante_menu_input\"\n            placeholder=\"Paste or type a link\"\n            onKeyPress={ this.handleInputEnter }\n            defaultValue={ this.getDefaultValue() }\n          />\n          <div className=\"dante-menu-button\" onMouseDown={ this._disableLinkMode } />\n        </div>\n        <ul className=\"dante-menu-buttons\">\n          { this.blockItems().map( (item, i) => {\n              return  <DanteTooltipItem\n                        key={ i }\n                        item={ item }\n                        handleClick={ this._clickBlockHandler }\n                        editorState={ this.props.editorState }\n                        type=\"block\"\n                        currentStyle={ this.props.editorState.getCurrentInlineStyle }\n                      />\n            })\n          }\n          <DanteTooltipLink\n            editorState={ this.props.editorState }\n            enableLinkMode={ this._enableLinkMode }\n          />\n            { this.inlineItems().map( (item, i) => {\n              return  <DanteTooltipItem\n                        key={ i }\n                        item={ item }\n                        type=\"inline\"\n                        editorState={ this.props.editorState }\n                        handleClick={ this._clickInlineHandler }\n                      />\n            })\n          }\n        </ul>\n      </div>\n    )\n  }\n}\n\nclass DanteTooltipItem extends React.Component {\n\n  constructor(...args) {\n    super(...args)\n    this.handleClick = this.handleClick.bind(this)\n    this.activeClass = this.activeClass.bind(this)\n    this.isActive = this.isActive.bind(this)\n    this.activeClassInline = this.activeClassInline.bind(this)\n    this.activeClassBlock = this.activeClassBlock.bind(this)\n    this.render = this.render.bind(this)\n  }\n\n  handleClick(ev) {\n    return this.props.handleClick(ev, this.props.item.style)\n  }\n\n  activeClass() {\n    if (this.isActive()) {\n      return \"active\"\n    } else {\n      return \"\"\n    }\n  }\n\n  isActive() {\n    if (this.props.type === \"block\") {\n      return this.activeClassBlock()\n    } else {\n      return this.activeClassInline()\n    }\n  }\n\n  activeClassInline() {\n    if (!this.props.editorState) {\n      return\n    }\n    //console.log @props.item\n    return this.props.editorState.getCurrentInlineStyle().has(this.props.item.style)\n  }\n\n  activeClassBlock() {\n    //console.log \"EDITOR STATE\", @props.editorState\n    if (!this.props.editorState) {\n      return\n    }\n    let selection = this.props.editorState.getSelection()\n    let blockType = this.props.editorState.getCurrentContent().getBlockForKey(selection.getStartKey()).getType()\n    return this.props.item.style === blockType\n  }\n\n  render() {\n    return (\n      <li className={ `dante-menu-button ${ this.activeClass() }` } onMouseDown={ this.handleClick }>\n        <i className={ `dante-icon dante-icon-${ this.props.item.label }` } data-action=\"bold\" />\n      </li>\n    )\n  }\n}\n\nclass DanteTooltipLink extends React.Component {\n\n  constructor(...args) {\n    super(...args)\n    this.promptForLink = this.promptForLink.bind(this)\n  }\n\n  promptForLink(ev) {\n    let selection = this.props.editorState.getSelection()\n    if (!selection.isCollapsed()) {\n      return this.props.enableLinkMode(ev)\n    }\n  }\n\n  render() {\n    return (\n      <li className=\"dante-menu-button\" onMouseDown={ this.promptForLink }>\n        <i className=\"dante-icon icon-createlink\" data-action=\"createlink\">link</i>\n      </li>\n    )\n  }\n}\n\nexport default DanteTooltip\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/popovers/toolTip.js\n **/","import { ContentState, genKey, Entity, CharacterMetadata, ContentBlock, convertFromHTML, getSafeBodyFromHTML } from 'draft-js'\n\nimport { List, OrderedSet, Repeat, fromJS } from 'immutable'\n\n\n// { compose\n// }  = require('underscore')\n\n// underscore compose function\nlet compose = function() {\n  let args = arguments\n  let start = args.length - 1\n  return function() {\n    let i = start\n    let result = args[start].apply(this, arguments)\n    while (i--) {\n      result = args[i].call(this, result)\n    }\n    return result\n  }\n}\n\n// from https://gist.github.com/N1kto/6702e1c2d89a33a15a032c234fc4c34e\n\n/*\n * Helpers\n */\n\n// Prepares img meta data object based on img attributes\nlet getBlockSpecForElement = imgElement=> {\n  return {\n    contentType: 'image',\n    imgSrc: imgElement.getAttribute('src')\n  }\n}\n\n// Wraps meta data in HTML element which is 'understandable' by Draft, I used <blockquote />.\nlet wrapBlockSpec = blockSpec=> {\n  if (blockSpec === null) {\n    return null\n  }\n\n  let tempEl = document.createElement('blockquote')\n  // stringify meta data and insert it as text content of temp HTML element. We will later extract\n  // and parse it.\n  tempEl.innerText = JSON.stringify(blockSpec)\n  return tempEl\n}\n\n// Replaces <img> element with our temp element\nlet replaceElement = (oldEl, newEl)=> {\n  if (!(newEl instanceof HTMLElement)) {\n    return\n  }\n\n  let upEl = getUpEl(oldEl)\n  //parentNode = oldEl.parentNode\n  //return parentNode.replaceChild(newEl, oldEl)\n  return upEl.parentNode.insertBefore(newEl, upEl)\n}\n\nvar getUpEl = el=> {\n  let original_el = el\n  while (el.parentNode) {\n    if (el.parentNode.tagName !== 'BODY') {\n      el = el.parentNode\n    }\n    if (el.parentNode.tagName === 'BODY') { return el }\n  }\n}\n\nlet elementToBlockSpecElement = compose(wrapBlockSpec, getBlockSpecForElement)\n\nlet imgReplacer = imgElement=> {\n  return replaceElement(imgElement, elementToBlockSpecElement(imgElement))\n}\n\n/*\n * Main function\n */\n\n// takes HTML string and returns DraftJS ContentState\nlet customHTML2Content = function(HTML, blockRn){\n  let tempDoc = new DOMParser().parseFromString(HTML, 'text/html')\n  // replace all <img /> with <blockquote /> elements\n\n  let a = tempDoc.querySelectorAll('img').forEach( item=> imgReplacer(item))\n\n  // use DraftJS converter to do initial conversion. I don't provide DOMBuilder and\n  // blockRenderMap arguments here since it should fall back to its default ones, which are fine\n  console.log(tempDoc.body.innerHTML)\n  let contentBlocks = convertFromHTML(tempDoc.body.innerHTML,\n        getSafeBodyFromHTML,\n        blockRn\n  )\n\n  // now replace <blockquote /> ContentBlocks with 'atomic' ones\n  contentBlocks = contentBlocks.map(function(block){\n    let newBlock\n    console.log(\"CHECK BLOCK\", block.getType())\n    if (block.getType() !== 'blockquote') {\n      return block\n    }\n\n    let json = \"\"\n    try {\n      json = JSON.parse(block.getText())\n    } catch (error) {\n      return block\n    }\n\n    return newBlock = block.merge({\n      type: \"image\",\n      text: \"\",\n      data: {\n        url: json.imgSrc,\n        forceUpload: true\n      }\n    })\n  })\n\n  tempDoc = null\n  return ContentState.createFromBlockArray(contentBlocks)\n}\n\n\nexport default customHTML2Content\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/html2content.js\n **/","import axios from \"axios\"\nimport Immutable from 'immutable'\n\nclass SaveBehavior {\n  constructor(options) {\n    this.getLocks = options.getLocks\n    this.config = options.config\n    this.editorContent = options.editorContent\n    this.editorState = options.editorState\n  }\n\n  handleStore(ev){\n    return this.store()\n  }\n\n  store(content){\n    if (!this.config.data_storage.url) { return }\n    if (this.getLocks() > 0) { return }\n\n    clearTimeout(this.timeout)\n\n    return this.timeout = setTimeout(() => {\n      return this.checkforStore(content)\n    }\n    , this.config.data_storage.interval)\n  }\n\n  getTextFromEditor(content){\n    return content.blocks.map(o=> {\n        return o.text\n      }\n    )\n      .join(\"\\n\")\n  }\n\n  getUrl() {\n    let { url } = this.config.data_storage\n    if (typeof(url) === \"function\") { return url() } else { return url }\n  }\n\n  getMethod() {\n    let { method } = this.config.data_storage\n    if (typeof(method) === \"function\") { return method() } else { return method }\n  }\n\n\n  checkforStore(content){\n    // ENTER DATA STORE\n    let isChanged = !Immutable.is(Immutable.fromJS(this.editorContent), Immutable.fromJS(content))\n    // console.log(\"CONTENT CHANGED:\", isChanged)\n\n    if (!isChanged) { return }\n\n    if (this.config.xhr.before_handler) { this.config.xhr.before_handler() }\n    // console.log \"SAVING TO: #{@getMethod()} #{@getUrl()}\"\n\n    return axios({\n      method: this.getMethod(),\n      url: this.getUrl(),\n      data: {\n        editor_content: JSON.stringify(content),\n        text_content: this.getTextFromEditor(content)\n      }\n    })\n    .then(result=> {\n      // console.log \"STORING CONTENT\", result\n      if (this.config.data_storage.success_handler) { this.config.data_storage.success_handler(result) }\n      if (this.config.xhr.success_handler) { return this.config.xhr.success_handler(result) }\n    }\n    )\n    .catch(error=> {\n      // console.log(\"ERROR: got error saving content at #{@config.data_storage.url} - #{error}\")\n      if (this.config.xhr.failure_handler) { return this.config.xhr.failure_handler(error) }\n    }\n    )\n  }\n}\n\n\nexport default SaveBehavior\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/save_content.js\n **/"],"sourceRoot":""}